import{d as Q,a as $,h as H,D as V,_ as W}from"./index-D_TWD7wt.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-ZV0RCuCp.js";import{_ as Y}from"./DictTag.vue_vue_type_script_lang-BD_Qe0UA.js";import{_ as ee}from"./ContentWrap.vue_vue_type_script_setup_true_lang-4_WNC8um.js";import{_ as ae}from"./index-CBtRt3JL.js";import{l as le,r as u,j as te,e as oe,ag as re,m as M,q as s,J as a,B as o,u as l,Z as se,I as O,$ as pe,A as d,C as y,G as i,E as ne,n as ue}from"./form-create-_84fGzaM.js";import{d as ie}from"./formatTime-BGPGB_ys.js";import{h as ce}from"./tree-COGD3qag.js";import{d as de}from"./download-oWiM5xVU.js";import{P as h}from"./index-BtsEdHhP.js";import{_ as me}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-EbGI_F9T.js";import{h as fe,aj as ye,k as _e,x as ge,Q as ve,f as xe,Z as ke,_ as we,ak as Ce}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";import"./constants-C3gLHYOK.js";const be=le({name:"ErpProductCategory",__name:"index",setup(he){const g=Q(),{t:A}=$(),v=u(!0),P=u([]),r=te({name:void 0,status:void 0}),S=u(),x=u(!1),m=async()=>{v.value=!0;try{const p=await h.getProductCategoryList(r);P.value=ce(p,"id","parentId")}finally{v.value=!1}},k=()=>{r.pageNo=1,m()},I=()=>{S.value.resetFields(),k()},N=u(),T=(p,e)=>{N.value.open(p,e)},j=async()=>{try{await g.exportConfirm(),x.value=!0;const p=await h.exportProductCategory(r);de.excel(p,"\u4EA7\u54C1\u5206\u7C7B.xls")}catch{}finally{x.value=!1}},w=u(!0),C=u(!0),q=async()=>{C.value=!1,w.value=!w.value,await ue(),C.value=!0};return oe(()=>{m()}),(p,e)=>{const z=ae,E=_e,b=ye,F=ve,R=ge,f=W,n=xe,Z=fe,U=ee,c=we,B=Y,D=ke,G=X,_=re("hasPermi"),J=Ce;return s(),M(O,null,[a(z,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u4FE1\u606F\u3001\u5206\u7C7B\u3001\u5355\u4F4D",url:"https://doc.iocoder.cn/erp/product/"}),a(U,null,{default:o(()=>[a(Z,{class:"-mb-15px",model:l(r),ref_key:"queryFormRef",ref:S,inline:!0,"label-width":"68px"},{default:o(()=>[a(b,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:o(()=>[a(E,{modelValue:l(r).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(r).name=t),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:se(k,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(b,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[a(R,{modelValue:l(r).status,"onUpdate:modelValue":e[1]||(e[1]=t=>l(r).status=t),placeholder:"\u8BF7\u9009\u62E9\u5F00\u542F\u72B6\u6001",clearable:"",class:"!w-240px"},{default:o(()=>[(s(!0),M(O,null,pe(l(H)(l(V).COMMON_STATUS),t=>(s(),d(F,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(b,null,{default:o(()=>[a(n,{onClick:k},{default:o(()=>[a(f,{icon:"ep:search",class:"mr-5px"}),e[5]||(e[5]=i(" \u641C\u7D22"))]),_:1}),a(n,{onClick:I},{default:o(()=>[a(f,{icon:"ep:refresh",class:"mr-5px"}),e[6]||(e[6]=i(" \u91CD\u7F6E"))]),_:1}),y((s(),d(n,{type:"primary",plain:"",onClick:e[2]||(e[2]=t=>T("create"))},{default:o(()=>[a(f,{icon:"ep:plus",class:"mr-5px"}),e[7]||(e[7]=i(" \u65B0\u589E "))]),_:1})),[[_,["erp:product-category:create"]]]),y((s(),d(n,{type:"success",plain:"",onClick:j,loading:l(x)},{default:o(()=>[a(f,{icon:"ep:download",class:"mr-5px"}),e[8]||(e[8]=i(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[_,["erp:product-category:export"]]]),a(n,{type:"danger",plain:"",onClick:q},{default:o(()=>[a(f,{icon:"ep:sort",class:"mr-5px"}),e[9]||(e[9]=i(" \u5C55\u5F00/\u6298\u53E0 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(U,null,{default:o(()=>[l(C)?y((s(),d(D,{key:0,data:l(P),stripe:!0,"show-overflow-tooltip":!0,"row-key":"id","default-expand-all":l(w)},{default:o(()=>[a(c,{label:"\u7F16\u7801",align:"center",prop:"code"}),a(c,{label:"\u540D\u79F0",align:"center",prop:"name"}),a(c,{label:"\u6392\u5E8F",align:"center",prop:"sort"}),a(c,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:o(t=>[a(B,{type:l(V).COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),a(c,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(ie),width:"180px"},null,8,["formatter"]),a(c,{label:"\u64CD\u4F5C",align:"center"},{default:o(t=>[y((s(),d(n,{link:"",type:"primary",onClick:K=>T("update",t.row.id)},{default:o(()=>e[10]||(e[10]=[i(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[_,["erp:product-category:update"]]]),y((s(),d(n,{link:"",type:"danger",onClick:K=>(async L=>{try{await g.delConfirm(),await h.deleteProductCategory(L),g.success(A("common.delSuccess")),await m()}catch{}})(t.row.id)},{default:o(()=>e[11]||(e[11]=[i(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["erp:product-category:delete"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[J,l(v)]]):ne("",!0),a(G,{total:p.total,page:l(r).pageNo,"onUpdate:page":e[3]||(e[3]=t=>l(r).pageNo=t),limit:l(r).pageSize,"onUpdate:limit":e[4]||(e[4]=t=>l(r).pageSize=t),onPagination:m},null,8,["total","page","limit"])]),_:1}),a(me,{ref_key:"formRef",ref:N,onSuccess:m},null,512)],64)}}});export{be as default};
