import{d as G,a as I,h as K,D as V,_ as L}from"./index-D_TWD7wt.js";import{_ as Q}from"./DictTag.vue_vue_type_script_lang-BD_Qe0UA.js";import{_ as $}from"./ContentWrap.vue_vue_type_script_setup_true_lang-4_WNC8um.js";import{_ as z}from"./index-CBtRt3JL.js";import{l as E,r as m,j as H,e as W,ag as X,m as M,q as n,J as e,B as r,u as t,Z as Y,I as T,$ as ee,A as p,C as d,G as u}from"./form-create-_84fGzaM.js";import{d as ae}from"./formatTime-BGPGB_ys.js";import{b as le,d as re}from"./index-LLc83Zdv.js";import{_ as te}from"./LevelForm.vue_vue_type_script_setup_true_lang-DpkSr_zk.js";import{h as se,aj as ne,k as oe,x as ie,Q as pe,f as ue,Z as ce,_ as me,al as de,ak as fe}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";import"./constants-C3gLHYOK.js";const we=E({name:"MemberLevel",__name:"index",setup(_e){const v=G(),{t:O}=I(),f=m(!0),k=m([]),o=H({name:null,status:null}),x=m(),c=async()=>{f.value=!0;try{k.value=await le(o)}finally{f.value=!1}},w=()=>{c()},A=()=>{x.value.resetFields(),w()},y=m(),g=(C,l)=>{y.value.open(C,l)};return W(()=>{c()}),(C,l)=>{const j=z,q=oe,_=ne,F=pe,J=ie,b=L,i=ue,N=se,U=$,s=me,S=de,P=Q,R=ce,h=X("hasPermi"),Z=fe;return n(),M(T,null,[e(j,{title:"\u4F1A\u5458\u7B49\u7EA7\u3001\u79EF\u5206\u3001\u7B7E\u5230",url:"https://doc.iocoder.cn/member/level/"}),e(U,null,{default:r(()=>[e(N,{class:"-mb-15px",model:t(o),ref_key:"queryFormRef",ref:x,inline:!0,"label-width":"68px"},{default:r(()=>[e(_,{label:"\u7B49\u7EA7\u540D\u79F0",prop:"name"},{default:r(()=>[e(q,{modelValue:t(o).name,"onUpdate:modelValue":l[0]||(l[0]=a=>t(o).name=a),placeholder:"\u8BF7\u8F93\u5165\u7B49\u7EA7\u540D\u79F0",clearable:"",onKeyup:Y(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u72B6\u6001",prop:"status"},{default:r(()=>[e(J,{modelValue:t(o).status,"onUpdate:modelValue":l[1]||(l[1]=a=>t(o).status=a),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"!w-240px"},{default:r(()=>[(n(!0),M(T,null,ee(t(K)(t(V).COMMON_STATUS),a=>(n(),p(F,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:r(()=>[e(i,{onClick:w},{default:r(()=>[e(b,{icon:"ep:search",class:"mr-5px"}),l[3]||(l[3]=u(" \u641C\u7D22"))]),_:1}),e(i,{onClick:A},{default:r(()=>[e(b,{icon:"ep:refresh",class:"mr-5px"}),l[4]||(l[4]=u(" \u91CD\u7F6E"))]),_:1}),d((n(),p(i,{type:"primary",onClick:l[2]||(l[2]=a=>g("create"))},{default:r(()=>[e(b,{icon:"ep:plus",class:"mr-5px"}),l[5]||(l[5]=u(" \u65B0\u589E "))]),_:1})),[[h,["member:level:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(U,null,{default:r(()=>[d((n(),p(R,{data:t(k),stripe:!0,"show-overflow-tooltip":!0},{default:r(()=>[e(s,{label:"\u7F16\u53F7",align:"center",prop:"id","min-width":"60"}),e(s,{label:"\u7B49\u7EA7\u56FE\u6807",align:"center",prop:"icon","min-width":"80"},{default:r(a=>[e(S,{src:a.row.icon,class:"h-30px w-30px","preview-src-list":[a.row.icon]},null,8,["src","preview-src-list"])]),_:1}),e(s,{label:"\u7B49\u7EA7\u80CC\u666F\u56FE",align:"center",prop:"backgroundUrl","min-width":"100"},{default:r(a=>[e(S,{src:a.row.backgroundUrl,class:"h-30px w-30px","preview-src-list":[a.row.backgroundUrl]},null,8,["src","preview-src-list"])]),_:1}),e(s,{label:"\u7B49\u7EA7\u540D\u79F0",align:"center",prop:"name","min-width":"100"}),e(s,{label:"\u7B49\u7EA7",align:"center",prop:"level","min-width":"60"}),e(s,{label:"\u5347\u7EA7\u7ECF\u9A8C",align:"center",prop:"experience","min-width":"80"}),e(s,{label:"\u4EAB\u53D7\u6298\u6263(%)",align:"center",prop:"discountPercent","min-width":"110"}),e(s,{label:"\u72B6\u6001",align:"center",prop:"status","min-width":"70"},{default:r(a=>[e(P,{type:t(V).COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(s,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:t(ae),"min-width":"170"},null,8,["formatter"]),e(s,{label:"\u64CD\u4F5C",align:"center","min-width":"110px",fixed:"right"},{default:r(a=>[d((n(),p(i,{link:"",type:"primary",onClick:B=>g("update",a.row.id)},{default:r(()=>l[6]||(l[6]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[h,["member:level:update"]]]),d((n(),p(i,{link:"",type:"danger",onClick:B=>(async D=>{try{await v.delConfirm(),await re(D),v.success(O("common.delSuccess")),await c()}catch{}})(a.row.id)},{default:r(()=>l[7]||(l[7]=[u(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[h,["member:level:delete"]]])]),_:1})]),_:1},8,["data"])),[[Z,t(f)]])]),_:1}),e(te,{ref_key:"formRef",ref:y,onSuccess:c},null,512)],64)}}});export{we as default};
