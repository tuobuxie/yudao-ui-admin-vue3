import{u as L,d as Q,_ as $,h as O,D as N}from"./index-DmQdxAiK.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-OyXbUoED.js";import{_ as X}from"./DictTag.vue_vue_type_script_lang-DiMRMEpR.js";import{_ as ee}from"./ContentWrap.vue_vue_type_script_setup_true_lang-OPDE9cVe.js";import{_ as le}from"./index-C2x7yuaO.js";import{l as ae,r as m,j as te,e as oe,m as f,q as r,J as e,B as t,u as o,Z as se,G as i,I as b,$ as y,A as v,C as ne,E as re,H as I}from"./form-create-_84fGzaM.js";import{d as T,a as ie}from"./formatTime-BGPGB_ys.js";import{h as pe,w as de}from"./index-DX-DzHIf.js";import{C as ue}from"./index-UrKDy54_.js";import{c as ce}from"./index-6gTZpT9M.js";import{h as me,aj as fe,k as be,f as ge,x as _e,Q as he,n as we,F as ye,Z as ve,_ as ke,a7 as xe,ak as Ce}from"./form-designer-DHHJWkD5.js";const Ve={key:0,class:"flex flex-col"},Ie=ae({name:"BpmDoneTask",__name:"index",setup(Te){const{push:P}=L(),Y=Q(),k=m(!0),D=m(0),S=m([]),U=m([]),s=te({pageNo:1,pageSize:10,name:"",category:void 0,status:void 0,processDefinitionKey:"",createTime:[]}),K=m(),M=m([]),g=m(!1),_=async()=>{k.value=!0;try{const x=await pe(s);S.value=x.list,D.value=x.total}finally{k.value=!1}},u=()=>{s.pageNo=1,_()},j=()=>{K.value.resetFields(),u()};return oe(async()=>{await _(),M.value=await ue.getCategorySimpleList(),U.value=await ce()}),(x,a)=>{const h=le,q=be,p=fe,A=$,c=ge,C=he,V=_e,z=ye,F=we,H=me,B=ee,n=ke,R=xe,Z=X,E=ve,G=W,J=Ce;return r(),f(b,null,[e(h,{title:"\u5BA1\u6279\u901A\u8FC7\u3001\u4E0D\u901A\u8FC7\u3001\u9A73\u56DE",url:"https://doc.iocoder.cn/bpm/task-todo-done/"}),e(h,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(h,{title:"\u5BA1\u6279\u8F6C\u529E\u3001\u59D4\u6D3E\u3001\u6284\u9001",url:"https://doc.iocoder.cn/bpm/task-delegation-and-cc/"}),e(h,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(B,null,{default:t(()=>[e(H,{ref_key:"queryFormRef",ref:K,inline:!0,model:o(s),class:"-mb-15px","label-width":"68px"},{default:t(()=>[e(p,{label:"",prop:"name"},{default:t(()=>[e(q,{modelValue:o(s).name,"onUpdate:modelValue":a[0]||(a[0]=l=>o(s).name=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",onKeyup:se(u,["enter"])},null,8,["modelValue"])]),_:1}),e(p,null,{default:t(()=>[e(c,{onClick:u},{default:t(()=>[e(A,{class:"mr-5px",icon:"ep:search"}),a[9]||(a[9]=i(" \u641C\u7D22 "))]),_:1})]),_:1}),e(p,{label:"",prop:"category",style:{position:"absolute",right:"300px"}},{default:t(()=>[e(V,{modelValue:o(s).category,"onUpdate:modelValue":a[1]||(a[1]=l=>o(s).category=l),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B",clearable:"",class:"!w-155px",onChange:u},{default:t(()=>[(r(!0),f(b,null,y(o(M),l=>(r(),v(C,{key:l.code,label:l.name,value:l.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"",prop:"status",style:{position:"absolute",right:"130px"}},{default:t(()=>[e(V,{modelValue:o(s).status,"onUpdate:modelValue":a[2]||(a[2]=l=>o(s).status=l),placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u72B6\u6001",clearable:"",class:"!w-155px",onChange:u},{default:t(()=>[(r(!0),f(b,null,y(o(O)(o(N).BPM_TASK_STATUS),l=>(r(),v(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{style:{position:"absolute",right:"0px"}},{default:t(()=>[e(F,{visible:o(g),persistent:"",width:400,"show-arrow":!1,placement:"bottom-end"},{reference:t(()=>[e(c,{onClick:a[3]||(a[3]=l=>g.value=!o(g))},{default:t(()=>[e(A,{icon:"ep:plus",class:"mr-5px"}),a[10]||(a[10]=i("\u9AD8\u7EA7\u7B5B\u9009 "))]),_:1})]),default:t(()=>[e(p,{label:"\u6240\u5C5E\u6D41\u7A0B",class:"font-bold","label-position":"top",prop:"processDefinitionKey"},{default:t(()=>[e(V,{modelValue:o(s).processDefinitionKey,"onUpdate:modelValue":a[4]||(a[4]=l=>o(s).processDefinitionKey=l),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5B9A\u4E49",clearable:"",onChange:u,class:"!w-390px"},{default:t(()=>[(r(!0),f(b,null,y(o(U),l=>(r(),v(C,{key:l.key,label:l.name,value:l.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"\u53D1\u8D77\u65F6\u95F4",class:"bold-label","label-position":"top",prop:"createTime"},{default:t(()=>[e(z,{modelValue:o(s).createTime,"onUpdate:modelValue":a[5]||(a[5]=l=>o(s).createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(p,{class:"bold-label","label-position":"top"},{default:t(()=>[e(c,{onClick:u},{default:t(()=>a[11]||(a[11]=[i(" \u786E\u8BA4")])),_:1}),e(c,{onClick:a[6]||(a[6]=l=>g.value=!1)},{default:t(()=>a[12]||(a[12]=[i(" \u53D6\u6D88")])),_:1}),e(c,{onClick:j},{default:t(()=>a[13]||(a[13]=[i(" \u6E05\u7A7A")])),_:1})]),_:1})]),_:1},8,["visible"])]),_:1})]),_:1},8,["model"])]),_:1}),e(B,null,{default:t(()=>[ne((r(),v(E,{data:o(S)},{default:t(()=>[e(n,{align:"center",label:"\u6D41\u7A0B",prop:"processInstance.name",width:"180"}),e(n,{label:"\u6458\u8981",prop:"processInstance.summary",width:"180"},{default:t(l=>[l.row.processInstance.summary&&l.row.processInstance.summary.length>0?(r(),f("div",Ve,[(r(!0),f(b,null,y(l.row.processInstance.summary,(w,d)=>(r(),f("div",{key:d},[e(R,{type:"info"},{default:t(()=>[i(I(w.key)+" : "+I(w.value),1)]),_:2},1024)]))),128))])):re("",!0)]),_:1}),e(n,{align:"center",label:"\u53D1\u8D77\u4EBA",prop:"processInstance.startUser.nickname",width:"100"}),e(n,{formatter:o(T),align:"center",label:"\u53D1\u8D77\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(n,{align:"center",label:"\u5F53\u524D\u4EFB\u52A1",prop:"name",width:"180"}),e(n,{formatter:o(T),align:"center",label:"\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(n,{formatter:o(T),align:"center",label:"\u4EFB\u52A1\u7ED3\u675F\u65F6\u95F4",prop:"endTime",width:"180"},null,8,["formatter"]),e(n,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status",width:"120"},{default:t(l=>[e(Z,{type:o(N).BPM_TASK_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(n,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"180"}),e(n,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis",width:"160"},{default:t(l=>[i(I(o(ie)(l.row.durationInMillis)),1)]),_:1}),e(n,{align:"center",label:"\u6D41\u7A0B\u7F16\u53F7",prop:"processInstanceId","show-overflow-tooltip":!0}),e(n,{align:"center",label:"\u4EFB\u52A1\u7F16\u53F7",prop:"id","show-overflow-tooltip":!0}),e(n,{align:"center",label:"\u64CD\u4F5C",fixed:"right",width:"130"},{default:t(l=>[e(c,{link:"",type:"warning",onClick:w=>{return d=l.row,void de(d.id).then(()=>{Y.success("\u64A4\u56DE\u6210\u529F"),_()});var d}},{default:t(()=>a[14]||(a[14]=[i("\u64A4\u56DE")])),_:2},1032,["onClick"]),e(c,{link:"",type:"primary",onClick:w=>{return d=l.row,void P({name:"BpmProcessInstanceDetail",query:{id:d.processInstance.id,taskId:d.id}});var d}},{default:t(()=>a[15]||(a[15]=[i("\u5386\u53F2")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,o(k)]]),e(G,{limit:o(s).pageSize,"onUpdate:limit":a[7]||(a[7]=l=>o(s).pageSize=l),page:o(s).pageNo,"onUpdate:page":a[8]||(a[8]=l=>o(s).pageNo=l),total:o(D),onPagination:_},null,8,["limit","page","total"])]),_:1})],64)}}});export{Ie as default};
