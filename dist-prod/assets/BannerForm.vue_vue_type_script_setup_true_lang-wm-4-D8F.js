import{X as f,a as E,d as H,$ as K,h as O,D as R}from"./index-DzK2S43K.js";import{_ as L}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{h as X,i as z,j as Q,aj as W,k as Y,l as Z,s as ee,u as le,ak as ae,f as te}from"./form-designer-DHHJWkD5.js";import{l as ue,r as m,j as oe,A as g,q as p,B as a,C as se,u as t,J as u,m as B,I as C,$ as I,G as b,H as N,h as re}from"./form-create-_84fGzaM.js";const de=async v=>await f.get({url:"/promotion/banner/page",params:v}),ie=async v=>await f.delete({url:"/promotion/banner/delete?id="+v}),ne=ue({__name:"BannerForm",emits:["success"],setup(v,{expose:S,emit:T}){const{t:V}=E(),y=H(),i=m(!1),U=m(""),n=m(!1),w=m(""),o=m({id:void 0,title:void 0,picUrl:void 0,status:0,position:1,url:void 0,sort:0,memo:void 0}),x=oe({title:[{required:!0,message:"Banner \u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u56FE\u7247 URL \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u6D3B\u52A8\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],position:[{required:!0,message:"\u4F4D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],url:[{required:!0,message:"\u8DF3\u8F6C\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=m();S({open:async(s,e)=>{if(i.value=!0,U.value=V("action."+s),w.value=s,F(),e){n.value=!0;try{o.value=await(async c=>await f.get({url:"/promotion/banner/get?id="+c}))(e)}finally{n.value=!1}}}});const j=T,A=async()=>{if(_&&await _.value.validate()){n.value=!0;try{const s=o.value;w.value==="create"?(await(async e=>await f.post({url:"/promotion/banner/create",data:e}))(s),y.success(V("common.createSuccess"))):(await(async e=>await f.put({url:"/promotion/banner/update",data:e}))(s),y.success(V("common.updateSuccess"))),i.value=!1,j("success")}finally{n.value=!1}}},F=()=>{var s;o.value={id:void 0,title:void 0,picUrl:void 0,status:0,position:1,url:void 0,sort:0,memo:void 0},(s=_.value)==null||s.resetFields()};return(s,e)=>{const c=Y,r=W,d=Q,M=K,G=Z,h=le,k=ee,J=z,P=X,q=te,$=L,D=ae;return p(),g($,{modelValue:t(i),"onUpdate:modelValue":e[8]||(e[8]=l=>re(i)?i.value=l:null),title:t(U)},{footer:a(()=>[u(q,{disabled:t(n),type:"primary",onClick:A},{default:a(()=>e[9]||(e[9]=[b("\u786E \u5B9A")])),_:1},8,["disabled"]),u(q,{onClick:e[7]||(e[7]=l=>i.value=!1)},{default:a(()=>e[10]||(e[10]=[b("\u53D6 \u6D88")])),_:1})]),default:a(()=>[se((p(),g(P,{ref_key:"formRef",ref:_,model:t(o),rules:t(x),"label-width":"100px"},{default:a(()=>[u(J,null,{default:a(()=>[u(d,{span:24},{default:a(()=>[u(r,{label:"\u6807\u9898",prop:"title"},{default:a(()=>[u(c,{modelValue:t(o).title,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).title=l),placeholder:"\u8BF7\u8F93\u5165 Banner \u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{span:24},{default:a(()=>[u(r,{label:"\u56FE\u7247",prop:"picUrl"},{default:a(()=>[u(M,{modelValue:t(o).picUrl,"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).picUrl=l)},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{span:24},{default:a(()=>[u(r,{label:"\u8DF3\u8F6C\u5730\u5740",prop:"url"},{default:a(()=>[u(c,{modelValue:t(o).url,"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).url=l),placeholder:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{span:24},{default:a(()=>[u(r,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[u(G,{modelValue:t(o).sort,"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).sort=l),min:0,clearable:"","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{span:24},{default:a(()=>[u(r,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[u(k,{modelValue:t(o).status,"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).status=l)},{default:a(()=>[(p(!0),B(C,null,I(t(O)(t(R).COMMON_STATUS),l=>(p(),g(h,{key:l.value,value:l.value},{default:a(()=>[b(N(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(d,{span:24},{default:a(()=>[u(r,{label:"\u4F4D\u7F6E",prop:"position"},{default:a(()=>[u(k,{modelValue:t(o).position,"onUpdate:modelValue":e[5]||(e[5]=l=>t(o).position=l)},{default:a(()=>[(p(!0),B(C,null,I(t(O)(t(R).PROMOTION_BANNER_POSITION),l=>(p(),g(h,{key:l.value,value:l.value},{default:a(()=>[b(N(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(d,{span:24},{default:a(()=>[u(r,{label:"\u63CF\u8FF0",prop:"memo"},{default:a(()=>[u(c,{modelValue:t(o).memo,"onUpdate:modelValue":e[6]||(e[6]=l=>t(o).memo=l),placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[D,t(n)]])]),_:1},8,["modelValue","title"])}}});export{ne as _,ie as d,de as g};
