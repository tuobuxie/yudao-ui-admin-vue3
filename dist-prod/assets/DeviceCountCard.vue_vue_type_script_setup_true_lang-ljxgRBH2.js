import"./index-D_TWD7wt.js";import{aU as g,ad as h}from"./form-designer-DHHJWkD5.js";import{Y as y,a4 as C,a2 as b,ae as x,ag as D,am as w,w as j}from"./echarts-BmJPRACc.js";import{l as O,r as _,c as k,b as q,e as A,n as d,A as B,q as r,B as u,m as c,u as p,J as m,x as f}from"./form-create-_84fGzaM.js";const L={key:0,class:"h-[240px] flex justify-center items-center"},z={key:1,class:"h-[240px] flex justify-center items-center"},F=O({name:"DeviceCountCard",__name:"DeviceCountCard",props:{statsData:{type:Object,required:!0},loading:{type:Boolean,default:!1}},setup(i){const e=i,n=_(),o=k(()=>e.statsData?Object.entries(e.statsData.productCategoryDeviceCounts||{}).length>0&&e.statsData.deviceCount!==-1:!1),l=()=>{if(o.value&&n.value){y([C,b,x,D,w]);try{const a=j(n.value);return a.setOption({tooltip:{trigger:"item"},legend:{top:"5%",right:"10%",align:"left",orient:"vertical",icon:"circle"},series:[{name:"Access From",type:"pie",radius:["50%","80%"],avoidLabelOverlap:!1,center:["30%","50%"],label:{show:!1,position:"outside"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:Object.entries(e.statsData.productCategoryDeviceCounts).map(([t,s])=>({name:t,value:s}))}]}),a}catch{return null}}};return q(()=>e.statsData,()=>{d(()=>{l()})},{deep:!0}),A(async()=>{await d(()=>{l()})}),(a,t)=>{const s=g,v=h;return r(),B(v,{class:"chart-card",shadow:"never",loading:i.loading},{header:u(()=>t[0]||(t[0]=[f("div",{class:"flex items-center"},[f("span",{class:"text-base font-medium text-gray-600"},"\u8BBE\u5907\u6570\u91CF\u7EDF\u8BA1")],-1)])),default:u(()=>[i.loading&&!p(o)?(r(),c("div",L,[m(s,{description:"\u52A0\u8F7D\u4E2D..."})])):p(o)?(r(),c("div",{key:2,ref_key:"deviceCountChartRef",ref:n,class:"h-[240px]"},null,512)):(r(),c("div",z,[m(s,{description:"\u6682\u65E0\u6570\u636E"})]))]),_:1},8,["loading"])}}});export{F as _};
