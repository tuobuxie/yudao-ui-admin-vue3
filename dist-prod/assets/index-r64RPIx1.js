import{d as le,a as te,h as oe,D as K,_ as ne}from"./index-DzK2S43K.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{_ as re}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as ie}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as ce}from"./index-RnHrue4c.js";import{l as pe,r as u,j as de,e as ue,ag as me,m as _,q as s,J as e,B as t,u as o,Z as T,I as v,$ as M,A as c,C as b,G as i,E as Z,H as U}from"./form-create-_84fGzaM.js";import{d as j}from"./formatTime-BGPGB_ys.js";import{d as fe}from"./download-oWiM5xVU.js";import{a as ye,d as _e,b as be,e as ge}from"./index-pzza5ix4.js";import{g as we}from"./index-C0VS8u1k.js";import{_ as he}from"./TenantForm.vue_vue_type_script_setup_true_lang-DtPzVc1j.js";import{h as ke,aj as ve,k as xe,x as Ce,Q as Ve,F as Se,f as Ne,Z as Te,_ as Me,a6 as Ue,ak as De}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./constants-C3gLHYOK.js";const Fe={key:0},Ie=pe({name:"SystemTenant",__name:"index",setup(Oe){const g=le(),{t:D}=te(),V=u(!0),F=u(0),I=u([]),n=de({pageNo:1,pageSize:10,name:void 0,contactName:void 0,contactMobile:void 0,status:void 0,createTime:[]}),O=u(),S=u(!1),Y=u([]),f=async()=>{V.value=!0;try{const p=await ye(n);I.value=p.list,F.value=p.total}finally{V.value=!1}},w=()=>{n.pageNo=1,f()},q=()=>{O.value.resetFields(),w()},z=u(),A=(p,a)=>{z.value.open(p,a)},x=u([]),P=p=>{x.value=p.map(a=>a.id)},R=async()=>{try{await g.delConfirm(),await be(x.value),x.value=[],g.success(D("common.delSuccess")),await f()}catch{}},B=async()=>{try{await g.exportConfirm(),S.value=!0;const p=await ge(n);fe.excel(p,"\u79DF\u6237\u5217\u8868.xls")}catch{}finally{S.value=!1}};return ue(async()=>{await f(),Y.value=await we()}),(p,a)=>{const E=ce,N=xe,y=ve,G=Ve,J=Ce,Q=Se,h=ne,m=Ne,$=ke,H=ie,r=Me,C=Ue,L=re,W=Te,X=se,k=me("hasPermi"),ee=De;return s(),_(v,null,[e(E,{title:"SaaS \u591A\u79DF\u6237",url:"https://doc.iocoder.cn/saas-tenant/"}),e(H,null,{default:t(()=>[e($,{class:"-mb-15px",model:o(n),ref_key:"queryFormRef",ref:O,inline:!0,"label-width":"68px"},{default:t(()=>[e(y,{label:"\u79DF\u6237\u540D",prop:"name"},{default:t(()=>[e(N,{modelValue:o(n).name,"onUpdate:modelValue":a[0]||(a[0]=l=>o(n).name=l),placeholder:"\u8BF7\u8F93\u5165\u79DF\u6237\u540D",clearable:"",onKeyup:T(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(y,{label:"\u8054\u7CFB\u4EBA",prop:"contactName"},{default:t(()=>[e(N,{modelValue:o(n).contactName,"onUpdate:modelValue":a[1]||(a[1]=l=>o(n).contactName=l),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",clearable:"",onKeyup:T(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(y,{label:"\u8054\u7CFB\u624B\u673A",prop:"contactMobile"},{default:t(()=>[e(N,{modelValue:o(n).contactMobile,"onUpdate:modelValue":a[2]||(a[2]=l=>o(n).contactMobile=l),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u624B\u673A",clearable:"",onKeyup:T(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(y,{label:"\u79DF\u6237\u72B6\u6001",prop:"status"},{default:t(()=>[e(J,{modelValue:o(n).status,"onUpdate:modelValue":a[3]||(a[3]=l=>o(n).status=l),placeholder:"\u8BF7\u9009\u62E9\u79DF\u6237\u72B6\u6001",clearable:"",class:"!w-240px"},{default:t(()=>[(s(!0),_(v,null,M(o(oe)(o(K).COMMON_STATUS),l=>(s(),c(G,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[e(Q,{modelValue:o(n).createTime,"onUpdate:modelValue":a[4]||(a[4]=l=>o(n).createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(y,null,{default:t(()=>[e(m,{onClick:w},{default:t(()=>[e(h,{icon:"ep:search",class:"mr-5px"}),a[8]||(a[8]=i(" \u641C\u7D22 "))]),_:1}),e(m,{onClick:q},{default:t(()=>[e(h,{icon:"ep:refresh",class:"mr-5px"}),a[9]||(a[9]=i(" \u91CD\u7F6E "))]),_:1}),b((s(),c(m,{type:"primary",plain:"",onClick:a[5]||(a[5]=l=>A("create"))},{default:t(()=>[e(h,{icon:"ep:plus",class:"mr-5px"}),a[10]||(a[10]=i(" \u65B0\u589E "))]),_:1})),[[k,["system:tenant:create"]]]),b((s(),c(m,{type:"success",plain:"",onClick:B,loading:o(S)},{default:t(()=>[e(h,{icon:"ep:download",class:"mr-5px"}),a[11]||(a[11]=i(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[k,["system:tenant:export"]]]),b((s(),c(m,{type:"danger",plain:"",disabled:o(x).length===0,onClick:R},{default:t(()=>[e(h,{icon:"ep:delete",class:"mr-5px"}),a[12]||(a[12]=i(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[k,["system:tenant:delete"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(H,null,{default:t(()=>[b((s(),c(W,{data:o(I),onSelectionChange:P},{default:t(()=>[e(r,{type:"selection",width:"55"}),e(r,{label:"\u79DF\u6237\u7F16\u53F7",align:"center",prop:"id"}),e(r,{label:"\u79DF\u6237\u540D",align:"center",prop:"name"}),e(r,{label:"\u79DF\u6237\u5957\u9910",align:"center",prop:"packageId"},{default:t(l=>[l.row.packageId===0?(s(),c(C,{key:0,type:"danger"},{default:t(()=>a[13]||(a[13]=[i("\u7CFB\u7EDF\u79DF\u6237")])),_:1})):(s(!0),_(v,{key:1},M(o(Y),d=>(s(),_(v,null,[d.id===l.row.packageId?(s(),c(C,{type:"success",key:d.id},{default:t(()=>[i(U(d.name),1)]),_:2},1024)):Z("",!0)],64))),256))]),_:1}),e(r,{label:"\u8054\u7CFB\u4EBA",align:"center",prop:"contactName"}),e(r,{label:"\u8054\u7CFB\u624B\u673A",align:"center",prop:"contactMobile"}),e(r,{label:"\u8D26\u53F7\u989D\u5EA6",align:"center",prop:"accountCount"},{default:t(l=>[e(C,null,{default:t(()=>[i(U(l.row.accountCount),1)]),_:2},1024)]),_:1}),e(r,{label:"\u8FC7\u671F\u65F6\u95F4",align:"center",prop:"expireTime",width:"180",formatter:o(j)},null,8,["formatter"]),e(r,{label:"\u7ED1\u5B9A\u57DF\u540D",align:"center",prop:"websites",width:"180"},{default:t(l=>[(s(!0),_(v,null,M(l.row.websites||[],d=>(s(),c(C,{key:d,class:"mr-1 mb-1"},{default:t(()=>[i(U(d),1)]),_:2},1024))),128)),l.row.websites&&l.row.websites.length!==0?Z("",!0):(s(),_("span",Fe,"-"))]),_:1}),e(r,{label:"\u79DF\u6237\u72B6\u6001",align:"center",prop:"status"},{default:t(l=>[e(L,{type:o(K).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(r,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:o(j)},null,8,["formatter"]),e(r,{label:"\u64CD\u4F5C",align:"center","min-width":"110",fixed:"right"},{default:t(l=>[b((s(),c(m,{link:"",type:"primary",onClick:d=>A("update",l.row.id)},{default:t(()=>a[14]||(a[14]=[i(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[k,["system:tenant:update"]]]),b((s(),c(m,{link:"",type:"danger",onClick:d=>(async ae=>{try{await g.delConfirm(),await _e(ae),g.success(D("common.delSuccess")),await f()}catch{}})(l.row.id)},{default:t(()=>a[15]||(a[15]=[i(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[k,["system:tenant:delete"]]])]),_:1})]),_:1},8,["data"])),[[ee,o(V)]]),e(X,{total:o(F),page:o(n).pageNo,"onUpdate:page":a[6]||(a[6]=l=>o(n).pageNo=l),limit:o(n).pageSize,"onUpdate:limit":a[7]||(a[7]=l=>o(n).pageSize=l),onPagination:f},null,8,["total","page","limit"])]),_:1}),e(he,{ref_key:"formRef",ref:z,onSuccess:f},null,512)],64)}}});export{Ie as default};
