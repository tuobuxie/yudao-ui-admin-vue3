import{d as G,a as J,_ as P}from"./index-D_TWD7wt.js";import{_ as R}from"./ContentWrap.vue_vue_type_script_setup_true_lang-4_WNC8um.js";import{d as T}from"./formatTime-BGPGB_ys.js";import{g as Z,d as E,b as F}from"./index-Baj-tFyy.js";import{_ as K}from"./DataSourceConfigForm.vue_vue_type_script_setup_true_lang-Cb1jQ6eu.js";import{h as W,aj as z,f as H,Z as L,_ as M,ak as N}from"./form-designer-DHHJWkD5.js";import{l as O,r as m,e as Q,ag as U,m as V,q as r,J as e,B as l,C as i,A as s,G as _,u as g,I as X}from"./form-create-_84fGzaM.js";import"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";const Y=O({name:"InfraDataSourceConfig",__name:"index",setup($){const o=G(),{t:w}=J(),y=m(!0),b=m([]),c=async()=>{y.value=!0;try{b.value=await Z()}finally{y.value=!1}},C=m(),k=(u,a)=>{C.value.open(u,a)},d=m([]),x=u=>{d.value=u.map(a=>a.id).filter(a=>a!==0&&!!a)},S=async()=>{try{await o.delConfirm(),await F(d.value),d.value=[],o.success(w("common.delSuccess")),await c()}catch{}};return Q(()=>{c()}),(u,a)=>{const h=P,f=H,I=z,B=W,v=R,t=M,j=L,p=U("hasPermi"),q=N;return r(),V(X,null,[e(v,null,{default:l(()=>[e(B,{class:"-mb-15px",inline:!0},{default:l(()=>[e(I,null,{default:l(()=>[i((r(),s(f,{type:"primary",plain:"",onClick:a[0]||(a[0]=n=>k("create"))},{default:l(()=>[e(h,{icon:"ep:plus",class:"mr-5px"}),a[1]||(a[1]=_(" \u65B0\u589E "))]),_:1})),[[p,["infra:data-source-config:create"]]]),i((r(),s(f,{type:"danger",plain:"",disabled:g(d).length===0,onClick:S},{default:l(()=>[e(h,{icon:"ep:delete",class:"mr-5px"}),a[2]||(a[2]=_(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[p,["infra:data-source-config:delete"]]])]),_:1})]),_:1})]),_:1}),e(v,null,{default:l(()=>[i((r(),s(j,{data:g(b),onSelectionChange:x},{default:l(()=>[e(t,{type:"selection",width:"55"}),e(t,{label:"\u4E3B\u952E\u7F16\u53F7",align:"center",prop:"id"}),e(t,{label:"\u6570\u636E\u6E90\u540D\u79F0",align:"center",prop:"name"}),e(t,{label:"\u6570\u636E\u6E90\u8FDE\u63A5",align:"center",prop:"url","show-overflow-tooltip":!0}),e(t,{label:"\u7528\u6237\u540D",align:"center",prop:"username"}),e(t,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:g(T)},null,8,["formatter"]),e(t,{label:"\u64CD\u4F5C",align:"center"},{default:l(n=>[i((r(),s(f,{link:"",type:"primary",onClick:A=>k("update",n.row.id),disabled:n.row.id===0},{default:l(()=>a[3]||(a[3]=[_(" \u7F16\u8F91 ")])),_:2},1032,["onClick","disabled"])),[[p,["infra:data-source-config:update"]]]),i((r(),s(f,{link:"",type:"danger",onClick:A=>(async D=>{try{await o.delConfirm(),await E(D),o.success(w("common.delSuccess")),await c()}catch{}})(n.row.id),disabled:n.row.id===0},{default:l(()=>a[4]||(a[4]=[_(" \u5220\u9664 ")])),_:2},1032,["onClick","disabled"])),[[p,["infra:data-source-config:delete"]]])]),_:1})]),_:1},8,["data"])),[[q,g(y)]])]),_:1}),e(K,{ref_key:"formRef",ref:C,onSuccess:c},null,512)],64)}}});export{Y as default};
