import{_ as B}from"./XButton-D2DbA0bE.js";import{_ as C}from"./Form-Dwx7HbU_.js";import{a as j,d as E,b as F}from"./index-D_TWD7wt.js";import{u as M,g as N}from"./profile-Bv077R8-.js";import{s as R,u as A}from"./form-designer-DHHJWkD5.js";import{l as G,j as g,r as H,b as J,e as S,m as W,q as $,I as z,J as t,x as D,u as s,B as m,G as b,H as v}from"./form-create-_84fGzaM.js";const K={style:{"text-align":"center"}},L=G({name:"BasicInfo",__name:"BasicInfo",emits:["success"],setup(O,{emit:_}){const{t:e}=j(),k=E(),u=F(),y=_,x=g({nickname:[{required:!0,message:e("profile.rules.nickname"),trigger:"blur"}],email:[{required:!0,message:e("profile.rules.mail"),trigger:"blur"},{type:"email",message:e("profile.rules.truemail"),trigger:["blur","change"]}],mobile:[{required:!0,message:e("profile.rules.phone"),trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:e("profile.rules.truephone"),trigger:"blur"}]}),I=g([{field:"nickname",label:e("profile.user.nickname"),component:"Input"},{field:"mobile",label:e("profile.user.mobile"),component:"Input"},{field:"email",label:e("profile.user.email"),component:"Input"},{field:"sex",label:e("profile.user.sex"),component:"InputNumber",value:0}]),l=H();J(()=>u.getUser.avatar,r=>{if(r&&l.value){const a=l.value.formModel;a&&(a.avatar=r)}});const n=async()=>{var a;const r=await N();return(a=s(l))==null||a.setValues(r),r};return S(async()=>{await n()}),(r,a)=>{const c=A,h=R,w=C,p=B;return $(),W(z,null,[t(w,{ref_key:"formRef",ref:l,labelWidth:200,rules:s(x),schema:s(I)},{sex:m(o=>[t(h,{modelValue:o.sex,"onUpdate:modelValue":i=>o.sex=i},{default:m(()=>[t(c,{value:1},{default:m(()=>[b(v(s(e)("profile.user.man")),1)]),_:1}),t(c,{value:2},{default:m(()=>[b(v(s(e)("profile.user.woman")),1)]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["rules","schema"]),D("div",K,[t(p,{title:s(e)("common.save"),type:"primary",onClick:a[0]||(a[0]=o=>(()=>{var f;const i=(f=s(l))==null?void 0:f.getElFormRef();i&&i.validate(async V=>{var d;if(V){const q=(d=s(l))==null?void 0:d.formModel;await M(q),k.success(e("common.updateSuccess"));const U=await n();await u.setUserNicknameAction(U.nickname),y("success")}})})())},null,8,["title"]),t(p,{title:s(e)("common.reset"),type:"danger",onClick:a[1]||(a[1]=o=>n())},null,8,["title"])])],64)}}});export{L as _};
