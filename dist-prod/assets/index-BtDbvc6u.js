import{d as O,a as R,u as Z,_ as B,D}from"./index-DzK2S43K.js";import{_ as E}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as G}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as J}from"./index-RnHrue4c.js";import{l as N,r as _,j as z,e as H,ag as L,m as Q,q as i,J as e,B as l,u as t,Z as W,C as p,G as n,A as u,x as X,E as Y,I as $}from"./form-create-_84fGzaM.js";import{h as ee}from"./tree-COGD3qag.js";import{d as ae}from"./formatTime-BGPGB_ys.js";import{g as le,d as re}from"./category-D2wqANM9.js";import{_ as te}from"./CategoryForm.vue_vue_type_script_setup_true_lang-tLcUeLzj.js";import{h as oe,aj as se,k as ie,f as ne,Z as pe,_ as ue,ak as ce}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./constants-C3gLHYOK.js";const de=["src"],me=N({name:"ProductCategory",__name:"index",setup(fe){const g=O(),{t:T}=R(),w=_(!0),C=_([]),c=z({name:void 0}),x=_(),d=async()=>{w.value=!0;try{const m=await le(c);C.value=ee(m,"id","parentId")}finally{w.value=!1}},k=()=>{d()},U=()=>{x.value.resetFields(),k()},b=_(),v=(m,a)=>{b.value.open(m,a)},P=Z();return H(()=>{d()}),(m,a)=>{const V=J,j=ie,S=se,h=B,o=ne,A=oe,q=G,s=ue,F=E,K=pe,f=L("hasPermi"),M=ce;return i(),Q($,null,[e(V,{title:"\u3010\u5546\u54C1\u3011\u5546\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/mall/product-category/"}),e(q,null,{default:l(()=>[e(A,{class:"-mb-15px",model:t(c),ref_key:"queryFormRef",ref:x,inline:!0,"label-width":"68px"},{default:l(()=>[e(S,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:l(()=>[e(j,{modelValue:t(c).name,"onUpdate:modelValue":a[0]||(a[0]=r=>t(c).name=r),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:W(k,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(S,null,{default:l(()=>[e(o,{onClick:k},{default:l(()=>[e(h,{icon:"ep:search",class:"mr-5px"}),a[2]||(a[2]=n(" \u641C\u7D22"))]),_:1}),e(o,{onClick:U},{default:l(()=>[e(h,{icon:"ep:refresh",class:"mr-5px"}),a[3]||(a[3]=n(" \u91CD\u7F6E"))]),_:1}),p((i(),u(o,{type:"primary",plain:"",onClick:a[1]||(a[1]=r=>v("create"))},{default:l(()=>[e(h,{icon:"ep:plus",class:"mr-5px"}),a[4]||(a[4]=n(" \u65B0\u589E "))]),_:1})),[[f,["product:category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(q,null,{default:l(()=>[p((i(),u(K,{data:t(C),"row-key":"id","default-expand-all":""},{default:l(()=>[e(s,{label:"\u540D\u79F0","min-width":"240",prop:"name",sortable:""}),e(s,{label:"\u5206\u7C7B\u56FE\u6807",align:"center","min-width":"80",prop:"picUrl"},{default:l(r=>[X("img",{src:r.row.picUrl,alt:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",class:"h-36px"},null,8,de)]),_:1}),e(s,{label:"\u6392\u5E8F",align:"center","min-width":"150",prop:"sort"}),e(s,{label:"\u72B6\u6001",align:"center","min-width":"150",prop:"status"},{default:l(r=>[e(F,{type:t(D).COMMON_STATUS,value:r.row.status},null,8,["type","value"])]),_:1}),e(s,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:t(ae)},null,8,["formatter"]),e(s,{label:"\u64CD\u4F5C",align:"center","min-width":"180"},{default:l(r=>[p((i(),u(o,{link:"",type:"primary",onClick:I=>v("update",r.row.id)},{default:l(()=>a[5]||(a[5]=[n(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[f,["product:category:update"]]]),r.row.parentId>0?p((i(),u(o,{key:0,link:"",type:"primary",onClick:I=>{return y=r.row.id,void P.push({name:"ProductSpu",query:{categoryId:y}});var y}},{default:l(()=>a[6]||(a[6]=[n(" \u67E5\u770B\u5546\u54C1 ")])),_:2},1032,["onClick"])),[[f,["product:spu:query"]]]):Y("",!0),p((i(),u(o,{link:"",type:"danger",onClick:I=>(async y=>{try{await g.delConfirm(),await re(y),g.success(T("common.delSuccess")),await d()}catch{}})(r.row.id)},{default:l(()=>a[7]||(a[7]=[n(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[f,["product:category:delete"]]])]),_:1})]),_:1},8,["data"])),[[M,t(w)]])]),_:1}),e(te,{ref_key:"formRef",ref:b,onSuccess:d},null,512)],64)}}});export{me as default};
