import{aw as D,D as E,_ as F}from"./index-DmQdxAiK.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-OyXbUoED.js";import{_ as j}from"./ContentWrap.vue_vue_type_script_setup_true_lang-OPDE9cVe.js";import{l as q,r as d,j as x,m as v,q as c,J as l,B as r,u as e,I as V,$ as A,A as G,G as b,C as H,K as B}from"./form-create-_84fGzaM.js";import{W as J,g as K}from"./main-BIbBpBmv.js";import{M as Q}from"./types-VQvH2Qnl.js";import{_ as R}from"./main.vue_vue_type_script_setup_true_lang-DijmNsTR.js";import{_ as W}from"./MessageTable.vue_vue_type_script_setup_true_lang-CTxZZxoN.js";import{h as L,aj as Z,x as $,Q as O,k as X,F as ee,f as ae,v as le}from"./form-designer-DHHJWkD5.js";import"./TabNews-B7LkNpZh.js";import"./main-CJVSjYz7.js";import"./main-I-_7yN8H.js";import"./main-Ddqx4-1N.js";import"./main.vue_vue_type_script_setup_true_lang-DeOxeHzY.js";import"./index-CHHBmOkg.js";import"./index-CebrFt1o.js";import"./formatTime-BGPGB_ys.js";import"./main-BWoc3Odi.js";import"./TabText.vue_vue_type_script_setup_true_lang-CjSjCXTv.js";import"./TabImage-DasBtZ73.js";import"./useUpload-CW5EVrRd.js";import"./TabVoice-Cfw_efun.js";import"./TabVideo-CkUeWTPH.js";import"./TabMusic.vue_vue_type_script_setup_true_lang-CrK_E0Z2.js";import"./MsgList-Cwy6ZH4q.js";import"./Msg.vue_vue_type_script_setup_true_lang-CYADRi9W.js";import"./main.vue_vue_type_script_setup_true_lang-6iT9yr7G.js";import"./main-D9VokZmh.js";import"./MsgEvent.vue_vue_type_script_setup_true_lang-BDvLDiqV.js";import"./index-XgNgjN-E.js";import"./index-W8edep2c.js";import"./tagsView-CQDzb46U.js";const oe=q({name:"MpMessage",__name:"index",setup(te){const u=d(!1),n=d(0),f=d([]),o=x({pageNo:1,pageSize:10,openid:"",accountId:-1,type:Q.Text,createTime:[]}),_=d(null),i=x({show:!1,userId:0}),I=s=>{o.accountId=s,o.pageNo=1,p()},p=()=>{o.pageNo=1,g()},g=async()=>{try{u.value=!0;const s=await K(o);f.value=s.list,n.value=s.total}finally{u.value=!1}},M=async()=>{var a;const s=o.accountId;(a=_.value)==null||a.resetFields(),o.accountId=s,p()},U=async s=>{i.userId=s,i.show=!0};return(s,a)=>{const m=Z,S=O,T=$,k=X,C=ee,h=F,y=ae,N=L,w=j,Y=P,z=le;return c(),v(V,null,[l(w,null,{default:r(()=>[l(N,{class:"-mb-15px",model:e(o),ref_key:"queryFormRef",ref:_,inline:!0,"label-width":"68px"},{default:r(()=>[l(m,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:r(()=>[l(e(R),{onChange:I})]),_:1}),l(m,{label:"\u6D88\u606F\u7C7B\u578B",prop:"type"},{default:r(()=>[l(T,{modelValue:e(o).type,"onUpdate:modelValue":a[0]||(a[0]=t=>e(o).type=t),placeholder:"\u8BF7\u9009\u62E9\u6D88\u606F\u7C7B\u578B",class:"!w-240px"},{default:r(()=>[(c(!0),v(V,null,A(e(D)(e(E).MP_MESSAGE_TYPE),t=>(c(),G(S,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"\u7528\u6237\u6807\u8BC6",prop:"openid"},{default:r(()=>[l(k,{modelValue:e(o).openid,"onUpdate:modelValue":a[1]||(a[1]=t=>e(o).openid=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6807\u8BC6",clearable:"","v-on":p,class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[l(C,{modelValue:e(o).createTime,"onUpdate:modelValue":a[2]||(a[2]=t=>e(o).createTime=t),style:{width:"240px"},"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":["00:00:00","23:59:59"],class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(m,null,{default:r(()=>[l(y,{onClick:p},{default:r(()=>[l(h,{icon:"ep:search",class:"mr-5px"}),a[7]||(a[7]=b(" \u641C\u7D22 "))]),_:1}),l(y,{onClick:M},{default:r(()=>[l(h,{icon:"ep:refresh",class:"mr-5px"}),a[8]||(a[8]=b(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(w,null,{default:r(()=>[l(W,{list:e(f),loading:e(u),onSend:U},null,8,["list","loading"]),H(l(Y,{total:e(n),page:e(o).pageNo,"onUpdate:page":a[3]||(a[3]=t=>e(o).pageNo=t),limit:e(o).pageSize,"onUpdate:limit":a[4]||(a[4]=t=>e(o).pageSize=t),onPagination:g},null,8,["total","page","limit"]),[[B,e(n)>0]])]),_:1}),l(z,{title:"\u7C89\u4E1D\u6D88\u606F\u5217\u8868",modelValue:e(i).show,"onUpdate:modelValue":a[5]||(a[5]=t=>e(i).show=t),onClick:a[6]||(a[6]=t=>e(i).show=!0),width:"50%","destroy-on-close":""},{default:r(()=>[l(e(J),{"user-id":e(i).userId},null,8,["user-id"])]),_:1},8,["modelValue"])],64)}}});export{oe as default};
