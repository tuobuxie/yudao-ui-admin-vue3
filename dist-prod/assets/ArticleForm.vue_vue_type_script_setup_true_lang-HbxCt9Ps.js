import{a as W,d as X,$ as Y,h as ee,D as B,g as C,a0 as le}from"./index-DmQdxAiK.js";import{_ as ae}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{g as te,c as ue,u as oe}from"./index-Djt-eBeu.js";import{g as de}from"./index-CePFxe1P.js";import{i as re}from"./spu-BE3uLdh7.js";import{_ as se}from"./SpuSelect.vue_vue_type_script_setup_true_lang-BR4Mh8FR.js";import"./SkuList.vue_vue_type_style_index_0_lang-D0bwvLbd.js";import{h as ne,i as ie,j as me,aj as pe,k as ce,x as fe,Q as ve,l as _e,s as ge,u as Ve,a6 as be,f as ye,ak as he}from"./form-designer-DHHJWkD5.js";import{l as Ie,r as i,j as Ue,e as ke,m as v,q as n,I as _,J as l,u as a,h as qe,B as t,C as Be,A as f,$ as b,G as m,H as y,E as we}from"./form-create-_84fGzaM.js";const Ae=Ie({name:"PromotionArticleForm",__name:"ArticleForm",emits:["success"],setup(Se,{expose:O,emit:R}){const{t:h}=W(),w=X(),p=i(!1),A=i(""),c=i(!1),S=i(""),o=i({id:void 0,categoryId:void 0,title:void 0,author:void 0,picUrl:void 0,introduction:void 0,sort:0,status:0,spuId:0,recommendHot:!1,recommendBanner:!1,content:void 0}),F=Ue({categoryId:[{required:!0,message:"\u5206\u7C7Bid\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],title:[{required:!0,message:"\u6587\u7AE0\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u6587\u7AE0\u5C01\u9762\u56FE\u7247\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],spuId:[{required:!0,message:"\u5546\u54C1\u5173\u8054id\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],recommendHot:[{required:!0,message:"\u662F\u5426\u70ED\u95E8(\u5C0F\u7A0B\u5E8F)\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],recommendBanner:[{required:!0,message:"\u662F\u5426\u8F6E\u64AD\u56FE(\u5C0F\u7A0B\u5E8F)\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u6587\u7AE0\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),g=i(),x=i(),T=d=>{o.value.spuId=d};O({open:async(d,u)=>{if(p.value=!0,A.value=h("action."+d),S.value=d,G(),u){c.value=!0;try{o.value=await te(u)}finally{c.value=!1}}}});const j=R,E=async()=>{if(g&&await g.value.validate()){c.value=!0;try{const d=o.value;S.value==="create"?(await ue(d),w.success(h("common.createSuccess"))):(await oe(d),w.success(h("common.updateSuccess"))),p.value=!1,j("success")}finally{c.value=!1}}},G=()=>{var d;o.value={id:void 0,categoryId:void 0,title:void 0,author:void 0,picUrl:void 0,introduction:void 0,sort:0,status:0,spuId:0,recommendHot:!1,recommendBanner:!1,content:void 0},(d=g.value)==null||d.resetFields()},H=i([]),N=i([]);return ke(async()=>{H.value=await de(),N.value=await re()}),(d,u)=>{const I=ce,r=pe,s=me,$=ve,L=fe,M=Y,P=_e,U=Ve,k=ge,D=be,q=ye,J=le,K=ie,Q=ne,Z=ae,z=he;return n(),v(_,null,[l(Z,{modelValue:a(p),"onUpdate:modelValue":u[12]||(u[12]=e=>qe(p)?p.value=e:null),title:a(A),width:"70%"},{footer:t(()=>[l(q,{disabled:a(c),type:"primary",onClick:E},{default:t(()=>u[14]||(u[14]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),l(q,{onClick:u[11]||(u[11]=e=>p.value=!1)},{default:t(()=>u[15]||(u[15]=[m("\u53D6 \u6D88")])),_:1})]),default:t(()=>[Be((n(),f(Q,{ref_key:"formRef",ref:g,model:a(o),rules:a(F),"label-width":"110px"},{default:t(()=>[l(K,null,{default:t(()=>[l(s,{span:12},{default:t(()=>[l(r,{label:"\u6587\u7AE0\u6807\u9898",prop:"title"},{default:t(()=>[l(I,{modelValue:a(o).title,"onUpdate:modelValue":u[0]||(u[0]=e=>a(o).title=e),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:t(()=>[l(r,{label:"\u6587\u7AE0\u5206\u7C7B",prop:"categoryId"},{default:t(()=>[l(L,{modelValue:a(o).categoryId,"onUpdate:modelValue":u[1]||(u[1]=e=>a(o).categoryId=e),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(n(!0),v(_,null,b(a(H),e=>(n(),f($,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:t(()=>[l(r,{label:"\u6587\u7AE0\u4F5C\u8005",prop:"author"},{default:t(()=>[l(I,{modelValue:a(o).author,"onUpdate:modelValue":u[2]||(u[2]=e=>a(o).author=e),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u4F5C\u8005"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:t(()=>[l(r,{label:"\u6587\u7AE0\u7B80\u4ECB",prop:"introduction"},{default:t(()=>[l(I,{modelValue:a(o).introduction,"onUpdate:modelValue":u[3]||(u[3]=e=>a(o).introduction=e),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u7B80\u4ECB"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:24},{default:t(()=>[l(r,{label:"\u6587\u7AE0\u5C01\u9762",prop:"picUrl"},{default:t(()=>[l(M,{modelValue:a(o).picUrl,"onUpdate:modelValue":u[4]||(u[4]=e=>a(o).picUrl=e),height:"80px"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:t(()=>[l(r,{label:"\u6392\u5E8F",prop:"sort"},{default:t(()=>[l(P,{modelValue:a(o).sort,"onUpdate:modelValue":u[5]||(u[5]=e=>a(o).sort=e),min:0,clearable:"","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:t(()=>[l(r,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[l(k,{modelValue:a(o).status,"onUpdate:modelValue":u[6]||(u[6]=e=>a(o).status=e)},{default:t(()=>[(n(!0),v(_,null,b(a(ee)(a(B).COMMON_STATUS),e=>(n(),f(U,{key:e.value,value:e.value},{default:t(()=>[m(y(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:t(()=>[l(r,{label:"\u662F\u5426\u70ED\u95E8",prop:"recommendHot"},{default:t(()=>[l(k,{modelValue:a(o).recommendHot,"onUpdate:modelValue":u[7]||(u[7]=e=>a(o).recommendHot=e)},{default:t(()=>[(n(!0),v(_,null,b(a(C)(a(B).INFRA_BOOLEAN_STRING),e=>(n(),f(U,{key:e.value,value:e.value},{default:t(()=>[m(y(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(s,{span:12},{default:t(()=>[l(r,{label:"\u662F\u5426\u8F6E\u64AD\u56FE",prop:"recommendBanner"},{default:t(()=>[l(k,{modelValue:a(o).recommendBanner,"onUpdate:modelValue":u[8]||(u[8]=e=>a(o).recommendBanner=e)},{default:t(()=>[(n(!0),v(_,null,b(a(C)(a(B).INFRA_BOOLEAN_STRING),e=>(n(),f(U,{key:e.value,value:e.value},{default:t(()=>[m(y(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(s,{span:24},{default:t(()=>[l(r,{label:"\u5546\u54C1\u5173\u8054",prop:"spuId"},{default:t(()=>[a(o).spuId?(n(),f(D,{key:0,class:"mr-10px"},{default:t(()=>{var e;return[m(y((e=a(N).find(V=>V.id===a(o).spuId))==null?void 0:e.name),1)]}),_:1})):we("",!0),l(q,{onClick:u[9]||(u[9]=e=>{var V;return(V=a(x))==null?void 0:V.open()})},{default:t(()=>u[13]||(u[13]=[m("\u9009\u62E9\u5546\u54C1")])),_:1})]),_:1})]),_:1}),l(s,{span:24},{default:t(()=>[l(r,{label:"\u6587\u7AE0\u5185\u5BB9"},{default:t(()=>[l(J,{modelValue:a(o).content,"onUpdate:modelValue":u[10]||(u[10]=e=>a(o).content=e),height:"150px"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[z,a(c)]])]),_:1},8,["modelValue","title"]),l(a(se),{ref_key:"spuSelectRef",ref:x,onConfirm:T},null,512)],64)}}});export{Ae as _};
