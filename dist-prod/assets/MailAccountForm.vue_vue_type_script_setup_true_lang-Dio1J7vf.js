import{a as B,d as C,g as y,D as T}from"./index-DzK2S43K.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{g as j,c as D,u as H}from"./index-U_uo9mCA.js";import{h as J,aj as $,k as z,l as K,s as Q,u as W,ak as X,f as Y}from"./form-designer-DHHJWkD5.js";import{l as Z,r as i,j as ee,A as f,q as n,B as u,C as le,u as a,J as r,m as E,I as A,$ as k,G as b,H as q,h as ae}from"./form-create-_84fGzaM.js";const se=Z({name:"SystemMailAccountForm",__name:"MailAccountForm",emits:["success"],setup(ue,{expose:M,emit:R}){const{t:g}=B(),v=C(),d=i(!1),_=i(""),m=i(!1),V=i(""),s=i({id:void 0,mail:"",username:"",password:"",host:"",port:465,sslEnable:!0,starttlsEnable:!1}),U=ee({mail:[{required:!0,message:"\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u683C\u5F0F",trigger:["blur","change"]}],username:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],host:[{required:!0,message:"SMTP \u670D\u52A1\u5668\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],port:[{required:!0,message:"SMTP \u670D\u52A1\u5668\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sslEnable:[{required:!0,message:"\u662F\u5426\u5F00\u542F SSL \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],starttlsEnable:[{required:!0,message:"\u662F\u5426\u5F00\u542F STARTTLS \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),p=i();M({open:async(t,e)=>{if(d.value=!0,_.value=g("action."+t),V.value=t,P(),e){m.value=!0;try{s.value=await j(e)}finally{m.value=!1}}}});const L=R,N=async()=>{if(p&&await p.value.validate()){m.value=!0;try{const t=s.value;V.value==="create"?(await D(t),v.success(g("common.createSuccess"))):(await H(t),v.success(g("common.updateSuccess"))),d.value=!1,L("success")}finally{m.value=!1}}},P=()=>{var t;s.value={id:void 0,mail:"",username:"",password:"",host:"",port:465,sslEnable:!0,starttlsEnable:!1},(t=p.value)==null||t.resetFields()};return(t,e)=>{const c=z,o=$,F=K,S=W,h=Q,I=J,w=Y,x=G,O=X;return n(),f(x,{modelValue:a(d),"onUpdate:modelValue":e[8]||(e[8]=l=>ae(d)?d.value=l:null),title:a(_)},{footer:u(()=>[r(w,{disabled:a(m),type:"primary",onClick:N},{default:u(()=>e[9]||(e[9]=[b("\u786E \u5B9A")])),_:1},8,["disabled"]),r(w,{onClick:e[7]||(e[7]=l=>d.value=!1)},{default:u(()=>e[10]||(e[10]=[b("\u53D6 \u6D88")])),_:1})]),default:u(()=>[le((n(),f(I,{ref_key:"formRef",ref:p,model:a(s),rules:a(U),"label-width":"150px"},{default:u(()=>[r(o,{label:"\u90AE\u7BB1",prop:"mail"},{default:u(()=>[r(c,{modelValue:a(s).mail,"onUpdate:modelValue":e[0]||(e[0]=l=>a(s).mail=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),r(o,{label:"\u7528\u6237\u540D",prop:"username"},{default:u(()=>[r(c,{modelValue:a(s).username,"onUpdate:modelValue":e[1]||(e[1]=l=>a(s).username=l),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),r(o,{label:"\u5BC6\u7801",prop:"password"},{default:u(()=>[r(c,{modelValue:a(s).password,"onUpdate:modelValue":e[2]||(e[2]=l=>a(s).password=l),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),r(o,{label:"SMTP \u670D\u52A1\u5668\u57DF\u540D",prop:"host"},{default:u(()=>[r(c,{modelValue:a(s).host,"onUpdate:modelValue":e[3]||(e[3]=l=>a(s).host=l),placeholder:"\u8BF7\u8F93\u5165 SMTP \u670D\u52A1\u5668\u57DF\u540D"},null,8,["modelValue"])]),_:1}),r(o,{label:"SMTP \u670D\u52A1\u5668\u7AEF\u53E3",prop:"port"},{default:u(()=>[r(F,{modelValue:a(s).port,"onUpdate:modelValue":e[4]||(e[4]=l=>a(s).port=l),placeholder:"\u8BF7\u8F93\u5165 SMTP \u670D\u52A1\u5668\u7AEF\u53E3",min:1,max:65535},null,8,["modelValue"])]),_:1}),r(o,{label:"\u662F\u5426\u5F00\u542F SSL"},{default:u(()=>[r(h,{modelValue:a(s).sslEnable,"onUpdate:modelValue":e[5]||(e[5]=l=>a(s).sslEnable=l)},{default:u(()=>[(n(!0),E(A,null,k(a(y)(a(T).INFRA_BOOLEAN_STRING),l=>(n(),f(S,{key:l.value,value:l.value},{default:u(()=>[b(q(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(o,{label:"\u662F\u5426\u5F00\u542F STARTTLS"},{default:u(()=>[r(h,{modelValue:a(s).starttlsEnable,"onUpdate:modelValue":e[6]||(e[6]=l=>a(s).starttlsEnable=l)},{default:u(()=>[(n(!0),E(A,null,k(a(y)(a(T).INFRA_BOOLEAN_STRING),l=>(n(),f(S,{key:l.value,value:l.value},{default:u(()=>[b(q(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[O,a(m)]])]),_:1},8,["modelValue","title"])}}});export{se as _};
