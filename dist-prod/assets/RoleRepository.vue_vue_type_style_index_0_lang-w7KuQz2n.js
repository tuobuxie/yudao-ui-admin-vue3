import{u as V,_ as L}from"./index-DzK2S43K.js";import{_ as k}from"./RoleList.vue_vue_type_script_setup_true_lang-V-8ZTnha.js";import{_ as X,C as v}from"./ChatRoleForm.vue_vue_type_script_setup_true_lang-B3vlu6sN.js";import{_ as $}from"./RoleCategoryList.vue_vue_type_script_setup_true_lang-v3mP__6e.js";import{C as F}from"./index-DYHyZbxo.js";import{U as H,X as K,k as Q,aT as Z,f as W,a0 as Y,$ as aa}from"./form-designer-DHHJWkD5.js";import{u as ea}from"./tagsView-CKM4YfGJ.js";import{l as la,r as o,j as R,e as sa,A as S,q as U,B as n,J as l,x as oa,E as ta,u as z,G as na}from"./form-create-_84fGzaM.js";const ua={class:"mx-3 mt-3 mb-0 absolute right-0 -top-1.25 z-100"},ia=la({__name:"RoleRepository",setup(ra){const M=V(),{currentRoute:P}=V(),{delView:E}=ea(),r=o(!1),u=o("my-role"),c=o(""),d=R({pageNo:1,pageSize:50}),m=o([]),f=R({pageNo:1,pageSize:50}),p=o([]),y=o("\u5168\u90E8"),w=o([]),q=async a=>{u.value=a.paneName+"",await t()},_=async a=>{const e={...d,name:c.value,publicStatus:!1},{list:s}=await v.getMyPage(e);a?m.value.push.apply(m.value,s):m.value=s},b=async a=>{const e={...f,category:y.value==="\u5168\u90E8"?"":y.value,name:c.value,publicStatus:!0},{list:s}=await v.getMyPage(e);a?p.value.push.apply(p.value,s):p.value=s},t=async()=>{u.value==="my-role"?(d.pageNo=1,await _()):(f.pageNo=1,await b())},A=async a=>{y.value=a,await t()},g=o(),D=async()=>{g.value.open("my-create",null,"\u6DFB\u52A0\u89D2\u8272")},h=async a=>{g.value.open("my-update",a.id,"\u7F16\u8F91\u89D2\u8272")},I=async a=>{await t()},x=async a=>{await v.deleteMy(a.id),await t()},C=async a=>{try{r.value=!0,a==="public"?(f.pageNo++,await b(!0)):(d.pageNo++,await _(!0))}finally{r.value=!1}},O=async a=>{const e={roleId:a.id},s=await F.createChatConversationMy(e);E(z(P)),await M.replace({name:"AiChat",query:{conversationId:s}})};return sa(async()=>{await(async()=>{w.value=["\u5168\u90E8",...await v.getCategoryList()]})(),await t()}),(a,e)=>{const s=Q,T=L,j=W,N=aa,B=Y,G=K,J=H;return U(),S(J,{class:"bg-[var(--el-bg-color)] -mt-25px"},{default:n(()=>[l(X,{ref_key:"formRef",ref:g,onSuccess:I},null,512),l(G,{class:"flex-1 overflow-hidden m-0 !p-0 relative"},{default:n(()=>[oa("div",ua,[l(s,{loading:r.value,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=i=>c.value=i),class:"!w-60",size:"default",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u7684\u5185\u5BB9","suffix-icon":z(Z),onChange:t},null,8,["loading","modelValue","suffix-icon"]),u.value=="my-role"?(U(),S(j,{key:0,type:"primary",onClick:D,class:"ml-20px"},{default:n(()=>[l(T,{icon:"ep:user",class:"mr-1.25"}),e[4]||(e[4]=na(" \u6DFB\u52A0\u89D2\u8272 "))]),_:1})):ta("",!0)]),l(B,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=i=>u.value=i),onTabClick:q,class:"relative h-full"},{default:n(()=>[l(N,{label:"\u6211\u7684\u89D2\u8272",name:"my-role",class:"flex flex-col h-full overflow-y-auto"},{default:n(()=>[l(k,{loading:r.value,"role-list":m.value,"show-more":!0,onOnDelete:x,onOnEdit:h,onOnUse:O,onOnPage:e[1]||(e[1]=i=>C("my")),class:"mt-3"},null,8,["loading","role-list"])]),_:1}),l(N,{label:"\u516C\u5171\u89D2\u8272",name:"public-role",class:"!pt-2"},{default:n(()=>[l($,{class:"mx-3","category-list":w.value,active:y.value,onOnCategoryClick:A},null,8,["category-list","active"]),l(k,{"role-list":p.value,onOnDelete:x,onOnEdit:h,onOnUse:O,onOnPage:e[2]||(e[2]=i=>C("public")),class:"mt-3",loading:""},null,8,["role-list"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{ia as _};
