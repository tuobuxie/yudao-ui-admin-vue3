import{b as G,_ as J}from"./index-B2urM1q-.js";import{_ as S}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BRGqERh7.js";import{g as A}from"./index-CRqoysqb.js";import{g as E}from"./index-Bix5n4IG.js";import{f as i,e as x,g as D}from"./formatTime-BGPGB_ys.js";import{h as g,d as H}from"./tree-COGD3qag.js";import{_ as K}from"./ContractCountPerformance.vue_vue_type_script_setup_true_lang-BPVPG0JZ.js";import{_ as L}from"./ContractPricePerformance.vue_vue_type_script_setup_true_lang-C-GZb7gU.js";import{_ as M}from"./ReceivablePricePerformance.vue_vue_type_script_setup_true_lang-3ciFNiol.js";import{h as T,aj as W,F as N,a1 as O,x as X,Q as Z,f as ee,a0 as ae,$ as le,j as re}from"./form-designer-DHHJWkD5.js";import{l as te,j as oe,r as u,c as se,b as ue,e as me,m as q,q as b,J as e,B as t,u as r,I as R,$ as de,A as ne,G as Y,h as pe}from"./form-create-_84fGzaM.js";import"./Echart.vue_vue_type_script_setup_true_lang-DN874Bqe.js";import"./echarts-BmJPRACc.js";import"./performance-BwkiBpXk.js";const ce=te({name:"CrmStatisticsCustomer",__name:"index",setup(fe){const l=oe({deptId:G().getUser.deptId,userId:void 0,times:[i(x(new Date(new Date().getFullYear(),0,1))),i(D(new Date(new Date().getFullYear(),11,31)))]}),v=u(),I=u([]),C=u([]),F=se(()=>l.deptId?C.value.filter(n=>n.deptId===l.deptId):[]),d=u("ContractCountPerformance"),P=u(),w=u(),k=u(),_=()=>{var a,p,s,c,m,f;const n=parseInt(l.times[0]);switch(l.times[0]=i(x(new Date(n,0,1))),l.times[1]=i(D(new Date(n,11,31))),d.value){case"ContractCountPerformance":(p=(a=P.value)==null?void 0:a.loadData)==null||p.call(a);break;case"ContractPricePerformance":(c=(s=w.value)==null?void 0:s.loadData)==null||c.call(s);break;case"ReceivablePricePerformance":(f=(m=k.value)==null?void 0:m.loadData)==null||f.call(m)}};ue(d,()=>{_()});const U=()=>{v.value.resetFields(),_()};return me(async()=>{I.value=g(await A()),C.value=g(await E())}),(n,a)=>{const p=N,s=W,c=O,m=Z,f=X,V=J,h=ee,j=T,z=S,y=le,B=ae,Q=re;return b(),q(R,null,[e(z,null,{default:t(()=>[e(j,{class:"-mb-15px",model:r(l),ref_key:"queryFormRef",ref:v,inline:!0,"label-width":"68px"},{default:t(()=>[e(s,{label:"\u9009\u62E9\u5E74\u4EFD",prop:"orderDate"},{default:t(()=>[e(p,{modelValue:r(l).times[0],"onUpdate:modelValue":a[0]||(a[0]=o=>r(l).times[0]=o),class:"!w-240px",type:"year","value-format":"YYYY","default-time":[new Date().getFullYear()]},null,8,["modelValue","default-time"])]),_:1}),e(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:t(()=>[e(c,{modelValue:r(l).deptId,"onUpdate:modelValue":a[1]||(a[1]=o=>r(l).deptId=o),class:"!w-240px",data:r(I),props:r(H),"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:a[2]||(a[2]=o=>r(l).userId=void 0)},null,8,["modelValue","data","props"])]),_:1}),e(s,{label:"\u5458\u5DE5",prop:"userId"},{default:t(()=>[e(f,{modelValue:r(l).userId,"onUpdate:modelValue":a[3]||(a[3]=o=>r(l).userId=o),class:"!w-240px",placeholder:"\u5458\u5DE5",clearable:""},{default:t(()=>[(b(!0),q(R,null,de(r(F),(o,$)=>(b(),ne(m,{label:o.nickname,value:o.id,key:$},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(h,{onClick:_},{default:t(()=>[e(V,{icon:"ep:search",class:"mr-5px"}),a[5]||(a[5]=Y(" \u641C\u7D22 "))]),_:1}),e(h,{onClick:U},{default:t(()=>[e(V,{icon:"ep:refresh",class:"mr-5px"}),a[6]||(a[6]=Y(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(Q,null,{default:t(()=>[e(B,{modelValue:r(d),"onUpdate:modelValue":a[4]||(a[4]=o=>pe(d)?d.value=o:null)},{default:t(()=>[e(y,{label:"\u5458\u5DE5\u5408\u540C\u6570\u91CF\u7EDF\u8BA1",name:"ContractCountPerformance",lazy:""},{default:t(()=>[e(K,{"query-params":r(l),ref_key:"ContractCountPerformanceRef",ref:P},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u5408\u540C\u91D1\u989D\u7EDF\u8BA1",name:"ContractPricePerformance",lazy:""},{default:t(()=>[e(L,{"query-params":r(l),ref_key:"ContractPricePerformanceRef",ref:w},null,8,["query-params"])]),_:1}),e(y,{label:"\u5458\u5DE5\u56DE\u6B3E\u91D1\u989D\u7EDF\u8BA1",name:"ReceivablePricePerformance",lazy:""},{default:t(()=>[e(M,{"query-params":r(l),ref_key:"ReceivablePricePerformanceRef",ref:k},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{ce as default};
