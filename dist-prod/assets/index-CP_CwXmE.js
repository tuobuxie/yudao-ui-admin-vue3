import{d as G,a as J,h as K,D as S,_ as Q}from"./index-DzK2S43K.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{_ as H}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as L}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{l as W,r as f,j as X,e as ee,ag as ae,m as z,q as i,J as a,B as t,u as s,Z as le,I as A,$ as te,A as u,C as y,G as c}from"./form-create-_84fGzaM.js";import{d as se}from"./formatTime-BGPGB_ys.js";import{_ as oe,g as ie,d as ne,a as re,p as pe}from"./NoticeForm.vue_vue_type_script_setup_true_lang-3Cq3aYjx.js";import{h as ue,aj as ce,k as de,x as me,Q as fe,f as ye,Z as _e,_ as ge,ak as ve}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./constants-C3gLHYOK.js";const we=W({name:"SystemNotice",__name:"index",setup(ke){const d=G(),{t:w}=J(),k=f(!0),x=f(0),T=f([]),o=X({pageNo:1,pageSize:10,title:"",type:void 0,status:void 0}),N=f(),m=async()=>{k.value=!0;try{const n=await ie(o);T.value=n.list,x.value=n.total}finally{k.value=!1}},b=()=>{o.pageNo=1,m()},E=()=>{N.value.resetFields(),b()},U=f(),V=(n,e)=>{U.value.open(n,e)},g=f([]),P=n=>{g.value=n.map(e=>e.id)},R=async()=>{try{await d.delConfirm(),await re(g.value),g.value=[],d.success(w("common.delSuccess")),await m()}catch{}};return ee(()=>{m()}),(n,e)=>{const q=de,C=ce,F=fe,I=me,v=Q,r=ye,Y=ue,M=L,p=ge,O=H,Z=_e,B=$,_=ae("hasPermi"),D=ve;return i(),z(A,null,[a(M,null,{default:t(()=>[a(Y,{class:"-mb-15px",model:s(o),ref_key:"queryFormRef",ref:N,inline:!0,"label-width":"68px"},{default:t(()=>[a(C,{label:"\u516C\u544A\u6807\u9898",prop:"title"},{default:t(()=>[a(q,{modelValue:s(o).title,"onUpdate:modelValue":e[0]||(e[0]=l=>s(o).title=l),placeholder:"\u8BF7\u8F93\u5165\u516C\u544A\u6807\u9898",clearable:"",onKeyup:le(b,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(C,{label:"\u516C\u544A\u72B6\u6001",prop:"status"},{default:t(()=>[a(I,{modelValue:s(o).status,"onUpdate:modelValue":e[1]||(e[1]=l=>s(o).status=l),placeholder:"\u8BF7\u9009\u62E9\u516C\u544A\u72B6\u6001",clearable:"",class:"!w-240px"},{default:t(()=>[(i(!0),z(A,null,te(s(K)(s(S).COMMON_STATUS),l=>(i(),u(F,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(C,null,{default:t(()=>[a(r,{onClick:b},{default:t(()=>[a(v,{icon:"ep:search",class:"mr-5px"}),e[5]||(e[5]=c(" \u641C\u7D22"))]),_:1}),a(r,{onClick:E},{default:t(()=>[a(v,{icon:"ep:refresh",class:"mr-5px"}),e[6]||(e[6]=c(" \u91CD\u7F6E"))]),_:1}),y((i(),u(r,{type:"primary",plain:"",onClick:e[2]||(e[2]=l=>V("create"))},{default:t(()=>[a(v,{icon:"ep:plus",class:"mr-5px"}),e[7]||(e[7]=c(" \u65B0\u589E "))]),_:1})),[[_,["system:notice:create"]]]),y((i(),u(r,{type:"danger",plain:"",disabled:s(g).length===0,onClick:R},{default:t(()=>[a(v,{icon:"ep:delete",class:"mr-5px"}),e[8]||(e[8]=c(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[_,["system:notice:delete"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(M,null,{default:t(()=>[y((i(),u(Z,{data:s(T),onSelectionChange:P},{default:t(()=>[a(p,{type:"selection",width:"55"}),a(p,{label:"\u516C\u544A\u7F16\u53F7",align:"center",prop:"id"}),a(p,{label:"\u516C\u544A\u6807\u9898",align:"center",prop:"title"}),a(p,{label:"\u516C\u544A\u7C7B\u578B",align:"center",prop:"type"},{default:t(l=>[a(O,{type:s(S).SYSTEM_NOTICE_TYPE,value:l.row.type},null,8,["type","value"])]),_:1}),a(p,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:t(l=>[a(O,{type:s(S).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),a(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:s(se)},null,8,["formatter"]),a(p,{label:"\u64CD\u4F5C",align:"center"},{default:t(l=>[y((i(),u(r,{link:"",type:"primary",onClick:j=>V("update",l.row.id)},{default:t(()=>e[9]||(e[9]=[c(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[_,["system:notice:update"]]]),y((i(),u(r,{link:"",type:"danger",onClick:j=>(async h=>{try{await d.delConfirm(),await ne(h),d.success(w("common.delSuccess")),await m()}catch{}})(l.row.id)},{default:t(()=>e[10]||(e[10]=[c(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["system:notice:delete"]]]),y((i(),u(r,{link:"",onClick:j=>(async h=>{try{await d.confirm("\u662F\u5426\u63A8\u9001\u6240\u9009\u4E2D\u901A\u77E5\uFF1F"),await pe(h),d.success(w("\u63A8\u9001\u6210\u529F"))}catch{}})(l.row.id)},{default:t(()=>e[11]||(e[11]=[c(" \u63A8\u9001 ")])),_:2},1032,["onClick"])),[[_,["system:notice:update"]]])]),_:1})]),_:1},8,["data"])),[[D,s(k)]]),a(B,{total:s(x),page:s(o).pageNo,"onUpdate:page":e[3]||(e[3]=l=>s(o).pageNo=l),limit:s(o).pageSize,"onUpdate:limit":e[4]||(e[4]=l=>s(o).pageSize=l),onPagination:m},null,8,["total","page","limit"])]),_:1}),a(oe,{ref_key:"formRef",ref:U,onSuccess:m},null,512)],64)}}});export{we as default};
