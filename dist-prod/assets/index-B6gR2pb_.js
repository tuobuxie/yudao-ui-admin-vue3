import{_ as b}from"./Left.vue_vue_type_script_setup_true_lang-BpK8I07o.js";import h from"./Right-gTE9btBg.js";import{W as x}from"./index-Ba5hllgw.js";import{W as S}from"./constants-CHvLs4wt.js";import{d as _}from"./index-DmQdxAiK.js";import{l as y,r as l,m as C,q as E,J as p,u as i,h as J,n as R}from"./form-create-_84fGzaM.js";import"./Tag.vue_vue_type_script_setup_true_lang-BYOMTOt9.js";import"./form-designer-DHHJWkD5.js";import"./fetch-D5K_4anA.js";const W={class:"absolute top-0 left-0 right-0 bottom-0 flex"},j=y({__name:"index",setup(k){const f=_(),t=l(""),e=l(!1),s=l(),r=()=>{var a;(a=s.value)==null||a.abort(),e.value=!1},m=l(),v=a=>{s.value=new AbortController,t.value="",e.value=!0,x.writeStream({data:a,onMessage:async o=>{var u;const{code:n,data:g,msg:w}=JSON.parse(o.data);if(n!==0)return f.alert(`\u5199\u4F5C\u5F02\u5E38! ${w}`),void r();t.value=t.value+g,await R(),(u=m.value)==null||u.scrollToBottom()},ctrl:s.value,onClose:r,onError:o=>{throw r(),o}})},c=a=>{t.value=S[a].data},d=()=>{t.value=""};return(a,o)=>(E(),C("div",W,[p(b,{"is-writing":i(e),class:"h-full",onSubmit:v,onReset:d,onExample:c},null,8,["is-writing"]),p(h,{"is-writing":i(e),onStopStream:r,ref_key:"rightRef",ref:m,class:"flex-grow",content:i(t),"onUpdate:content":o[0]||(o[0]=n=>J(t)?t.value=n:null)},null,8,["is-writing","content"])]))}});export{j as default};
