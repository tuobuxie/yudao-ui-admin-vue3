import{d as z,a as P,_ as F,c as U}from"./index-B2urM1q-.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-Cj0jlW8o.js";import{_ as B}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BRGqERh7.js";import{_ as J}from"./index-Cb5mbozM.js";import{l as K,r as p,j as M,ag as R,m as n,q as i,J as a,B as s,u as e,C as d,I,$ as D,A as L,K as V}from"./form-create-_84fGzaM.js";import{g as W,d as $}from"./index-BHd2lZaq.js";import E from"./main-BI1-7LX3.js";import{_ as G}from"./main.vue_vue_type_script_setup_true_lang-o5xPK08r.js";import{h as H,aj as O,i as Q,f as T,ak as X}from"./form-designer-DHHJWkD5.js";import"./index-BO7ZkqWl.js";import"./tagsView-DIbur9wp.js";const Y={class:"waterfall"},Z=U(K({name:"MpFreePublish",__name:"index",setup(aa){const u=z(),{t:w}=P(),c=p(!0),f=p(0),g=p([]),t=M({pageNo:1,pageSize:10,accountId:-1}),y=o=>{t.accountId=o,t.pageNo=1,m()},m=async()=>{try{c.value=!0;const o=await W(t);g.value=o.list,f.value=o.total}finally{c.value=!1}};return(o,r)=>{const h=J,v=O,b=H,_=B,C=F,k=T,x=Q,N=A,S=R("hasPermi"),j=X;return i(),n(I,null,[a(h,{title:"\u516C\u4F17\u53F7\u56FE\u6587",url:"https://doc.iocoder.cn/mp/article/"}),a(_,null,{default:s(()=>[a(b,{class:"-mb-15px",model:e(t),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:s(()=>[a(v,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:s(()=>[a(e(G),{onChange:y})]),_:1})]),_:1},8,["model"])]),_:1}),a(_,null,{default:s(()=>[d((i(),n("div",Y,[(i(!0),n(I,null,D(e(g),l=>d((i(),n("div",{class:"waterfall-item",key:l.articleId},[a(e(E),{articles:l.content.newsItem},null,8,["articles"]),a(x,{justify:"center",class:"ope-row"},{default:s(()=>[d((i(),L(k,{type:"danger",circle:"",onClick:ea=>(async q=>{try{await u.delConfirm("\u5220\u9664\u540E\u7528\u6237\u5C06\u65E0\u6CD5\u8BBF\u95EE\u6B64\u9875\u9762\uFF0C\u786E\u5B9A\u5220\u9664\uFF1F"),await $(t.accountId,q.articleId),u.success(w("common.delSuccess")),await m()}catch{}})(l)},{default:s(()=>[a(C,{icon:"ep:delete"})]),_:2},1032,["onClick"])),[[S,["mp:free-publish:delete"]]])]),_:2},1024)])),[[V,l.content&&l.content.newsItem]])),128))])),[[j,e(c)]]),a(N,{total:e(f),page:e(t).pageNo,"onUpdate:page":r[0]||(r[0]=l=>e(t).pageNo=l),limit:e(t).pageSize,"onUpdate:limit":r[1]||(r[1]=l=>e(t).pageSize=l),onPagination:m},null,8,["total","page","limit"])]),_:1})],64)}}}),[["__scopeId","data-v-739ae23d"]]);export{Z as default};
