import{a as T,d as U}from"./index-DzK2S43K.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{g as A,c as B,u as G}from"./index-DZsv1_6z.js";import{h as J,aj as M,k as R,ak as z,f as D}from"./form-designer-DHHJWkD5.js";import{l as E,r as o,A as y,q as g,B as r,C as H,u as s,J as i,G as b,h as K}from"./form-create-_84fGzaM.js";const L=E({name:"MpTagForm",__name:"TagForm",emits:["success"],setup(N,{expose:k,emit:w}){const{t:d}=T(),f=U(),u=o(!1),p=o(""),t=o(!1),v=o(""),l=o({accountId:-1,name:""}),V={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0",trigger:"blur"}]},m=o(null),h=w;k({open:async(a,e,c)=>{if(u.value=!0,p.value=d("action."+a),v.value=a,C(),l.value.accountId=e,c){t.value=!0;try{l.value=await A(c)}finally{t.value=!1}}}});const x=async()=>{var a;if(m&&await((a=m.value)==null?void 0:a.validate())){t.value=!0;try{const e=l.value;v.value==="create"?(await B(e),f.success(d("common.createSuccess"))):(await G(e),f.success(d("common.updateSuccess"))),u.value=!1,h("success")}finally{t.value=!1}}},C=()=>{var a;l.value={accountId:-1,name:""},(a=m.value)==null||a.resetFields()};return(a,e)=>{const c=R,F=M,I=J,_=D,q=j,S=z;return g(),y(q,{modelValue:s(u),"onUpdate:modelValue":e[2]||(e[2]=n=>K(u)?u.value=n:null),title:s(p)},{footer:r(()=>[i(_,{disabled:s(t),type:"primary",onClick:x},{default:r(()=>e[3]||(e[3]=[b("\u786E \u5B9A")])),_:1},8,["disabled"]),i(_,{onClick:e[1]||(e[1]=n=>u.value=!1)},{default:r(()=>e[4]||(e[4]=[b("\u53D6 \u6D88")])),_:1})]),default:r(()=>[H((g(),y(I,{ref_key:"formRef",ref:m,model:s(l),rules:V,"label-width":"80px"},{default:r(()=>[i(F,{label:"\u6807\u7B7E\u540D\u79F0",prop:"name"},{default:r(()=>[i(c,{modelValue:s(l).name,"onUpdate:modelValue":e[0]||(e[0]=n=>s(l).name=n),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[S,s(t)]])]),_:1},8,["modelValue","title"])}}});export{L as _};
