import{d as Q,a as $,h as O,D as Y,_ as W,N as ee}from"./index-D_TWD7wt.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-ZV0RCuCp.js";import{_ as le}from"./DictTag.vue_vue_type_script_lang-BD_Qe0UA.js";import{_ as te}from"./ContentWrap.vue_vue_type_script_setup_true_lang-4_WNC8um.js";import{l as oe,r as c,j as ne,e as re,ag as ie,m as N,q as s,J as a,B as o,u as l,Z as se,I as M,$ as pe,A as d,C as f,G as m}from"./form-create-_84fGzaM.js";import{d as R}from"./formatTime-BGPGB_ys.js";import{d as ce}from"./download-oWiM5xVU.js";import{_ as de,D as v}from"./Demo01ContactForm.vue_vue_type_script_setup_true_lang-DSAYu9EQ.js";import{h as me,aj as ue,k as fe,x as _e,Q as ge,F as ye,f as xe,Z as we,_ as ve,ak as be}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";const he=oe({name:"Demo01Contact",__name:"index",setup(Ce){const _=Q(),{t:k}=$(),b=c(!0),S=c([]),D=c(0),n=ne({pageNo:1,pageSize:10,name:void 0,sex:void 0,createTime:[]}),V=c(),h=c(!1),u=async()=>{b.value=!0;try{const r=await v.getDemo01ContactPage(n);S.value=r.list,D.value=r.total}finally{b.value=!1}},C=()=>{n.pageNo=1,u()},z=()=>{V.value.resetFields(),C()},T=c(),U=(r,e)=>{T.value.open(r,e)},F=async()=>{try{await _.delConfirm(),await v.deleteDemo01ContactList(x.value),x.value=[],_.success(k("common.delSuccess")),await u()}catch{}},x=c([]),P=r=>{x.value=r.map(e=>e.id)},j=async()=>{try{await _.exportConfirm(),h.value=!0;const r=await v.exportDemo01Contact(n);ce.excel(r,"\u793A\u4F8B\u8054\u7CFB\u4EBA.xls")}catch{}finally{h.value=!1}};return re(()=>{u()}),(r,e)=>{const q=fe,w=ue,H=ge,J=_e,X=ye,g=W,p=xe,Z=me,E=te,i=ve,A=le,B=we,G=ae,y=ie("hasPermi"),I=be;return s(),N(M,null,[a(E,null,{default:o(()=>[a(Z,{class:"-mb-15px",model:l(n),ref_key:"queryFormRef",ref:V,inline:!0,"label-width":"68px"},{default:o(()=>[a(w,{label:"\u540D\u5B57",prop:"name"},{default:o(()=>[a(q,{modelValue:l(n).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(n).name=t),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",clearable:"",onKeyup:se(C,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(w,{label:"\u6027\u522B",prop:"sex"},{default:o(()=>[a(J,{modelValue:l(n).sex,"onUpdate:modelValue":e[1]||(e[1]=t=>l(n).sex=t),placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",clearable:"",class:"!w-240px"},{default:o(()=>[(s(!0),N(M,null,pe(l(O)(l(Y).SYSTEM_USER_SEX),t=>(s(),d(H,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[a(X,{modelValue:l(n).createTime,"onUpdate:modelValue":e[2]||(e[2]=t=>l(n).createTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-220px"},null,8,["modelValue","default-time"])]),_:1}),a(w,null,{default:o(()=>[a(p,{onClick:C},{default:o(()=>[a(g,{icon:"ep:search",class:"mr-5px"}),e[6]||(e[6]=m(" \u641C\u7D22"))]),_:1}),a(p,{onClick:z},{default:o(()=>[a(g,{icon:"ep:refresh",class:"mr-5px"}),e[7]||(e[7]=m(" \u91CD\u7F6E"))]),_:1}),f((s(),d(p,{type:"primary",plain:"",onClick:e[3]||(e[3]=t=>U("create"))},{default:o(()=>[a(g,{icon:"ep:plus",class:"mr-5px"}),e[8]||(e[8]=m(" \u65B0\u589E "))]),_:1})),[[y,["infra:demo01-contact:create"]]]),f((s(),d(p,{type:"success",plain:"",onClick:j,loading:l(h)},{default:o(()=>[a(g,{icon:"ep:download",class:"mr-5px"}),e[9]||(e[9]=m(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[y,["infra:demo01-contact:export"]]]),f((s(),d(p,{type:"danger",plain:"",disabled:l(ee)(l(x)),onClick:F},{default:o(()=>[a(g,{icon:"ep:delete",class:"mr-5px"}),e[10]||(e[10]=m(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[y,["infra:demo01-contact:delete"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(E,null,{default:o(()=>[f((s(),d(B,{"row-key":"id",data:l(S),stripe:!0,"show-overflow-tooltip":!0,onSelectionChange:P},{default:o(()=>[a(i,{type:"selection",width:"55"}),a(i,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(i,{label:"\u540D\u5B57",align:"center",prop:"name"}),a(i,{label:"\u6027\u522B",align:"center",prop:"sex"},{default:o(t=>[a(A,{type:l(Y).SYSTEM_USER_SEX,value:t.row.sex},null,8,["type","value"])]),_:1}),a(i,{label:"\u51FA\u751F\u5E74",align:"center",prop:"birthday",formatter:l(R),width:"180px"},null,8,["formatter"]),a(i,{label:"\u7B80\u4ECB",align:"center",prop:"description"}),a(i,{label:"\u5934\u50CF",align:"center",prop:"avatar"}),a(i,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(R),width:"180px"},null,8,["formatter"]),a(i,{label:"\u64CD\u4F5C",align:"center","min-width":"120px"},{default:o(t=>[f((s(),d(p,{link:"",type:"primary",onClick:K=>U("update",t.row.id)},{default:o(()=>e[11]||(e[11]=[m(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[y,["infra:demo01-contact:update"]]]),f((s(),d(p,{link:"",type:"danger",onClick:K=>(async L=>{try{await _.delConfirm(),await v.deleteDemo01Contact(L),_.success(k("common.delSuccess")),await u()}catch{}})(t.row.id)},{default:o(()=>e[12]||(e[12]=[m(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[y,["infra:demo01-contact:delete"]]])]),_:1})]),_:1},8,["data"])),[[I,l(b)]]),a(G,{total:l(D),page:l(n).pageNo,"onUpdate:page":e[4]||(e[4]=t=>l(n).pageNo=t),limit:l(n).pageSize,"onUpdate:limit":e[5]||(e[5]=t=>l(n).pageSize=t),onPagination:u},null,8,["total","page","limit"])]),_:1}),a(de,{ref_key:"formRef",ref:T,onSuccess:u},null,512)],64)}}});export{he as default};
