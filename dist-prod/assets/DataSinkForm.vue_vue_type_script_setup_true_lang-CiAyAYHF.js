import{a as L,d as j,h as T,D as h}from"./index-DzK2S43K.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{C as U}from"./constants-C3gLHYOK.js";import{I as g,D as y}from"./index-C-rYU1yo.js";import{_ as J}from"./HttpConfigForm.vue_vue_type_script_setup_true_lang-CY_2e3lT.js";import{_ as Y}from"./MqttConfigForm.vue_vue_type_script_setup_true_lang-CNSYDW4O.js";import{_ as $}from"./RocketMQConfigForm.vue_vue_type_script_setup_true_lang-LOkiTIcD.js";import{_ as z}from"./KafkaMQConfigForm.vue_vue_type_script_setup_true_lang-Cv-bj9n8.js";import{_ as W}from"./RabbitMQConfigForm.vue_vue_type_script_setup_true_lang-jMd_TiAU.js";import{_ as X}from"./RedisStreamConfigForm.vue_vue_type_script_setup_true_lang-BUWeYxl2.js";import{h as Z,aj as ee,k as ae,x as le,Q as re,s as ue,u as se,ak as oe,f as te}from"./form-designer-DHHJWkD5.js";import{l as ie,r as d,j as ge,A as t,q as u,B as s,C as me,u as e,J as i,E as c,m as A,I as D,$ as E,G as V,H as ne,h as de}from"./form-create-_84fGzaM.js";const ce=ie({name:"IoTDataSinkForm",__name:"DataSinkForm",emits:["success"],setup(fe,{expose:I,emit:K}){const{t:p}=L(),v=j(),m=d(!1),_=d(""),n=d(!1),q=d(""),a=d({status:U.ENABLE,type:g.HTTP,config:{}}),x=ge({name:[{required:!0,message:"\u76EE\u7684\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u76EE\u7684\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u76EE\u7684\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],"config.url":[{required:!0,message:"\u8BF7\u6C42\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.method":[{required:!0,message:"\u8BF7\u6C42\u65B9\u6CD5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.username":[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.password":[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.clientId":[{required:!0,message:"\u5BA2\u6237\u7AEF ID \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.topic":[{required:!0,message:"\u4E3B\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.nameServer":[{required:!0,message:"NameServer \u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.accessKey":[{required:!0,message:"AccessKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.secretKey":[{required:!0,message:"SecretKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.group":[{required:!0,message:"\u6D88\u8D39\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.bootstrapServers":[{required:!0,message:"\u670D\u52A1\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.ssl":[{required:!0,message:"SSL \u914D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],"config.host":[{required:!0,message:"\u4E3B\u673A\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.port":[{required:!0,message:"\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,max:65535,message:"\u7AEF\u53E3\u53F7\u8303\u56F4 1-65535",trigger:"blur"}],"config.virtualHost":[{required:!0,message:"\u865A\u62DF\u4E3B\u673A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.exchange":[{required:!0,message:"\u4EA4\u6362\u673A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.routingKey":[{required:!0,message:"\u8DEF\u7531\u952E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.queue":[{required:!0,message:"\u961F\u5217\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"config.database":[{required:!0,message:"\u6570\u636E\u5E93\u7D22\u5F15\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:0,message:"\u6570\u636E\u5E93\u7D22\u5F15\u5FC5\u987B\u662F\u975E\u8D1F\u6574\u6570",trigger:"blur"}]}),b=d();I({open:async(o,l)=>{if(m.value=!0,_.value=p("action."+o),q.value=o,B(),l){n.value=!0;try{a.value=await y.getDataSink(l)}finally{n.value=!1}}}});const C=K,M=async()=>{await b.value.validate(),n.value=!0;try{const o=a.value;q.value==="create"?(await y.createDataSink(o),v.success(p("common.createSuccess"))):(await y.updateDataSink(o),v.success(p("common.updateSuccess"))),m.value=!1,C("success")}finally{n.value=!1}},w=o=>{a.value.type=o,a.value.config={}},B=()=>{var o;a.value={status:U.ENABLE,type:g.HTTP,config:{}},(o=b.value)==null||o.resetFields()};return(o,l)=>{const k=ae,f=ee,H=re,N=le,Q=se,R=ue,F=Z,S=te,O=G,P=oe;return u(),t(O,{modelValue:e(m),"onUpdate:modelValue":l[11]||(l[11]=r=>de(m)?m.value=r:null),title:e(_)},{footer:s(()=>[i(S,{disabled:e(n),type:"primary",onClick:M},{default:s(()=>l[12]||(l[12]=[V("\u786E \u5B9A")])),_:1},8,["disabled"]),i(S,{onClick:l[10]||(l[10]=r=>m.value=!1)},{default:s(()=>l[13]||(l[13]=[V("\u53D6 \u6D88")])),_:1})]),default:s(()=>[me((u(),t(F,{ref_key:"formRef",ref:b,model:e(a),rules:e(x),"label-width":"120px"},{default:s(()=>[i(f,{label:"\u76EE\u7684\u540D\u79F0",prop:"name"},{default:s(()=>[i(k,{modelValue:e(a).name,"onUpdate:modelValue":l[0]||(l[0]=r=>e(a).name=r),placeholder:"\u8BF7\u8F93\u5165\u76EE\u7684\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(f,{label:"\u76EE\u7684\u63CF\u8FF0",prop:"description"},{default:s(()=>[i(k,{modelValue:e(a).description,"onUpdate:modelValue":l[1]||(l[1]=r=>e(a).description=r),height:"150px",type:"textarea"},null,8,["modelValue"])]),_:1}),i(f,{label:"\u76EE\u7684\u7C7B\u578B",prop:"type"},{default:s(()=>[i(N,{modelValue:e(a).type,"onUpdate:modelValue":l[2]||(l[2]=r=>e(a).type=r),onChange:w},{default:s(()=>[(u(!0),A(D,null,E(e(T)(e(h).IOT_DATA_SINK_TYPE_ENUM),r=>(u(),t(H,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g).HTTP===e(a).type?(u(),t(e(J),{key:0,modelValue:e(a).config,"onUpdate:modelValue":l[3]||(l[3]=r=>e(a).config=r)},null,8,["modelValue"])):c("",!0),e(g).MQTT===e(a).type?(u(),t(e(Y),{key:1,modelValue:e(a).config,"onUpdate:modelValue":l[4]||(l[4]=r=>e(a).config=r)},null,8,["modelValue"])):c("",!0),e(g).ROCKETMQ===e(a).type?(u(),t(e($),{key:2,modelValue:e(a).config,"onUpdate:modelValue":l[5]||(l[5]=r=>e(a).config=r)},null,8,["modelValue"])):c("",!0),e(g).KAFKA===e(a).type?(u(),t(e(z),{key:3,modelValue:e(a).config,"onUpdate:modelValue":l[6]||(l[6]=r=>e(a).config=r)},null,8,["modelValue"])):c("",!0),e(g).RABBITMQ===e(a).type?(u(),t(e(W),{key:4,modelValue:e(a).config,"onUpdate:modelValue":l[7]||(l[7]=r=>e(a).config=r)},null,8,["modelValue"])):c("",!0),e(g).REDIS_STREAM===e(a).type?(u(),t(e(X),{key:5,modelValue:e(a).config,"onUpdate:modelValue":l[8]||(l[8]=r=>e(a).config=r)},null,8,["modelValue"])):c("",!0),i(f,{label:"\u76EE\u7684\u72B6\u6001",prop:"status"},{default:s(()=>[i(R,{modelValue:e(a).status,"onUpdate:modelValue":l[9]||(l[9]=r=>e(a).status=r)},{default:s(()=>[(u(!0),A(D,null,E(e(T)(e(h).COMMON_STATUS),r=>(u(),t(Q,{key:r.value,label:r.value},{default:s(()=>[V(ne(r.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[P,e(n)]])]),_:1},8,["modelValue","title"])}}});export{ce as _};
