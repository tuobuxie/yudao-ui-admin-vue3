import{d as A,a as B,_ as F}from"./index-D_TWD7wt.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-ZV0RCuCp.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-4_WNC8um.js";import{_ as M}from"./index-CBtRt3JL.js";import{d as Z}from"./formatTime-BGPGB_ys.js";import{a as D,d as E,s as K}from"./index-C_Iz3V1h.js";import{_ as L}from"./TagForm.vue_vue_type_script_setup_true_lang-BSPE24PP.js";import{_ as V}from"./main.vue_vue_type_script_setup_true_lang-8q1CFDrv.js";import{h as W,aj as H,f as O,Z as Q,_ as X,ak as Y}from"./form-designer-DHHJWkD5.js";import{l as $,r as _,j as aa,ag as ta,m as ea,q as n,J as t,B as o,u as l,C as c,A as m,G as y,I as la}from"./form-create-_84fGzaM.js";import"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";import"./index-CeTsi327.js";import"./tagsView-CwT_HwtR.js";const oa=$({name:"MpTag",__name:"index",setup(ra){const d=A(),{t:S}=B(),b=_(!0),w=_(0),k=_([]),e=aa({pageNo:1,pageSize:10,accountId:-1}),h=_(null),N=r=>{e.accountId=r,e.pageNo=1,s()},s=async()=>{try{b.value=!0;const r=await D(e);k.value=r.list,w.value=r.total}finally{b.value=!1}},C=(r,a)=>{var u;(u=h.value)==null||u.open(r,e.accountId,a)},j=async()=>{try{await d.confirm("\u662F\u5426\u786E\u8BA4\u540C\u6B65\u6807\u7B7E\uFF1F"),await K(e.accountId),d.success("\u540C\u6B65\u6807\u7B7E\u6210\u529F"),await s()}catch{}};return(r,a)=>{const u=M,I=H,v=F,f=O,z=W,x=J,p=X,P=Q,q=G,g=ta("hasPermi"),R=Y;return n(),ea(la,null,[t(u,{title:"\u516C\u4F17\u53F7\u6807\u7B7E",url:"https://doc.iocoder.cn/mp/tag/"}),t(x,null,{default:o(()=>[t(z,{class:"-mb-15px",model:l(e),ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:o(()=>[t(I,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:o(()=>[t(l(V),{onChange:N})]),_:1}),t(I,null,{default:o(()=>[c((n(),m(f,{type:"primary",plain:"",onClick:a[0]||(a[0]=i=>C("create")),disabled:l(e).accountId===0},{default:o(()=>[t(v,{icon:"ep:plus",class:"mr-5px"}),a[3]||(a[3]=y(" \u65B0\u589E "))]),_:1},8,["disabled"])),[[g,["mp:tag:create"]]]),c((n(),m(f,{type:"success",plain:"",onClick:j,disabled:l(e).accountId===0},{default:o(()=>[t(v,{icon:"ep:refresh",class:"mr-5px"}),a[4]||(a[4]=y(" \u540C\u6B65 "))]),_:1},8,["disabled"])),[[g,["mp:tag:sync"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(x,null,{default:o(()=>[c((n(),m(P,{data:l(k)},{default:o(()=>[t(p,{label:"\u7F16\u53F7",align:"center",prop:"id"}),t(p,{label:"\u6807\u7B7E\u540D\u79F0",align:"center",prop:"name"}),t(p,{label:"\u7C89\u4E1D\u6570",align:"center",prop:"count"}),t(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:l(Z)},null,8,["formatter"]),t(p,{label:"\u64CD\u4F5C",align:"center"},{default:o(i=>[c((n(),m(f,{link:"",type:"primary",onClick:T=>C("update",i.row.id)},{default:o(()=>a[5]||(a[5]=[y(" \u4FEE\u6539 ")])),_:2},1032,["onClick"])),[[g,["mp:tag:update"]]]),c((n(),m(f,{link:"",type:"danger",onClick:T=>(async U=>{try{await d.delConfirm(),await E(U),d.success(S("common.delSuccess")),await s()}catch{}})(i.row.id)},{default:o(()=>a[6]||(a[6]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[g,["mp:tag:delete"]]])]),_:1})]),_:1},8,["data"])),[[R,l(b)]]),t(q,{total:l(w),page:l(e).pageNo,"onUpdate:page":a[1]||(a[1]=i=>l(e).pageNo=i),limit:l(e).pageSize,"onUpdate:limit":a[2]||(a[2]=i=>l(e).pageSize=i),onPagination:s},null,8,["total","page","limit"])]),_:1}),t(L,{ref_key:"formRef",ref:h,onSuccess:s},null,512)],64)}}});export{oa as default};
