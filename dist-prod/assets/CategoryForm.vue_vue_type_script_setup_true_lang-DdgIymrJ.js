import{a as z,d as D,$ as G,h as H,D as J}from"./index-DmQdxAiK.js";import{_ as P}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{C as h}from"./constants-C3gLHYOK.js";import{a as Q,g as R,c as K,u as W}from"./category-D9qCSQY9.js";import{h as X,aj as Y,x as Z,Q as ee,k as ae,l as le,s as se,u as te,ak as ue,f as re}from"./form-designer-DHHJWkD5.js";import{l as oe,r as o,j as de,A as p,q as d,B as t,C as ie,u as l,J as u,m as x,I as k,$ as I,x as me,G as v,H as ne,h as pe}from"./form-create-_84fGzaM.js";const ce=oe({name:"ProductCategory",__name:"CategoryForm",emits:["success"],setup(fe,{expose:w,emit:C}){const{t:f}=z(),g=D(),i=o(!1),V=o(""),m=o(!1),_=o(""),s=o({id:void 0,parentId:0,name:"",picUrl:"",sort:0,status:h.ENABLE}),q=de({parentId:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B",trigger:"blur"}],name:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u5206\u7C7B\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u5206\u7C7B\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=o(),b=o([]);w({open:async(r,e)=>{if(i.value=!0,V.value=f("action."+r),_.value=r,S(),e){m.value=!0;try{s.value=await Q(e)}finally{m.value=!1}}b.value=await R({parentId:0})}});const A=C,E=async()=>{if(c&&await c.value.validate()){m.value=!0;try{const r=s.value;_.value==="create"?(await K(r),g.success(f("common.createSuccess"))):(await W(r),g.success(f("common.updateSuccess"))),i.value=!1,A("success")}finally{m.value=!1}}},S=()=>{var r;s.value={id:void 0,parentId:0,name:"",picUrl:"",sort:0,status:h.ENABLE},(r=c.value)==null||r.resetFields()};return(r,e)=>{const y=ee,B=Z,n=Y,L=ae,N=G,O=le,T=te,j=se,F=X,U=re,M=P,$=ue;return d(),p(M,{title:l(V),modelValue:l(i),"onUpdate:modelValue":e[6]||(e[6]=a=>pe(i)?i.value=a:null)},{footer:t(()=>[u(U,{onClick:E,type:"primary",disabled:l(m)},{default:t(()=>e[8]||(e[8]=[v("\u786E \u5B9A")])),_:1},8,["disabled"]),u(U,{onClick:e[5]||(e[5]=a=>i.value=!1)},{default:t(()=>e[9]||(e[9]=[v("\u53D6 \u6D88")])),_:1})]),default:t(()=>[ie((d(),p(F,{ref_key:"formRef",ref:c,model:l(s),rules:l(q),"label-width":"120px"},{default:t(()=>[u(n,{label:"\u4E0A\u7EA7\u5206\u7C7B",prop:"parentId"},{default:t(()=>[u(B,{modelValue:l(s).parentId,"onUpdate:modelValue":e[0]||(e[0]=a=>l(s).parentId=a),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B"},{default:t(()=>[(d(),p(y,{key:0,label:"\u9876\u7EA7\u5206\u7C7B",value:0})),(d(!0),x(k,null,I(l(b),a=>(d(),p(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(n,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:t(()=>[u(L,{modelValue:l(s).name,"onUpdate:modelValue":e[1]||(e[1]=a=>l(s).name=a),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",prop:"picUrl"},{default:t(()=>[u(N,{modelValue:l(s).picUrl,"onUpdate:modelValue":e[2]||(e[2]=a=>l(s).picUrl=a),limit:1,"is-show-tip":!1},null,8,["modelValue"]),e[7]||(e[7]=me("div",{style:{"font-size":"10px"},class:"pl-10px"},"\u63A8\u8350 180x180 \u56FE\u7247\u5206\u8FA8\u7387",-1))]),_:1}),u(n,{label:"\u5206\u7C7B\u6392\u5E8F",prop:"sort"},{default:t(()=>[u(O,{modelValue:l(s).sort,"onUpdate:modelValue":e[3]||(e[3]=a=>l(s).sort=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),u(n,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:t(()=>[u(j,{modelValue:l(s).status,"onUpdate:modelValue":e[4]||(e[4]=a=>l(s).status=a)},{default:t(()=>[(d(!0),x(k,null,I(l(H)(l(J).COMMON_STATUS),a=>(d(),p(T,{key:a.value,value:a.value},{default:t(()=>[v(ne(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[$,l(m)]])]),_:1},8,["title","modelValue"])}}});export{ce as _};
