import{aE as q,_ as Q,c as H}from"./index-B2urM1q-.js";import{k as K,n as W,a6 as $,f as Z,b4 as ee}from"./form-designer-DHHJWkD5.js";import{J as a,y as t,z as u,a as c,A as I}from"./constants-D46CCSyK.js";import{l as ae,r as g,c as O,b as V,e as te,n as h,m as _,q as f,x as s,J as x,D as N,u as l,h as re,B as C,H as i,I as se,$ as le,G as A,A as ce,E as Y}from"./form-create-_84fGzaM.js";const ne={class:"w-full space-y-12px"},Ee={class:"relative"},ie={class:"absolute top-8px right-8px"},oe={class:"json-params-detail-content"},ue={class:"flex items-center gap-8px mb-16px"},pe={class:"text-16px font-600 text-[var(--el-text-color-primary)]"},Se={class:"space-y-16px"},Te={key:0},de={class:"flex items-center gap-8px mb-8px"},xe={class:"text-14px font-500 text-[var(--el-text-color-primary)]"},ve={class:"ml-22px space-y-8px"},Re={class:"flex-1"},Oe={class:"text-12px font-500 text-[var(--el-text-color-primary)]"},fe={class:"text-11px text-[var(--el-text-color-secondary)]"},Ae={class:"flex items-center gap-8px"},me={class:"text-11px text-[var(--el-text-color-secondary)]"},_e={class:"mt-12px ml-22px"},Ce={class:"text-12px text-[var(--el-text-color-secondary)] mb-6px"},ye={class:"p-12px bg-[var(--el-fill-color-light)] rounded-4px text-11px text-[var(--el-text-color-primary)] overflow-x-auto border-l-3px border-[var(--el-color-primary)]"},Ie={key:1},Ne={class:"text-center py-16px"},Pe={class:"text-14px text-[var(--el-text-color-secondary)]"},Me={class:"flex items-center justify-between"},Le={class:"flex items-center gap-8px"},Ue={key:0,class:"flex items-center gap-8px"},ge={class:"text-12px text-[var(--el-text-color-secondary)]"},Ve=H(ae({name:"JsonParamsInput",__name:"JsonParamsInput",props:{modelValue:{},config:{},type:{default:t.SERVICE},placeholder:{default:a.PLACEHOLDER}},emits:["update:modelValue"],setup(w,{emit:F}){const n=w,R=q(n,"modelValue",F,{defaultValue:""}),o=g(""),E=g(""),m=O(()=>{var e,r,p,S,T,v,y;switch(n.type){case t.SERVICE:return((r=(e=n.config)==null?void 0:e.service)==null?void 0:r.inputParams)||[];case t.EVENT:return((S=(p=n.config)==null?void 0:p.event)==null?void 0:S.outputParams)||[];case t.PROPERTY:return((T=n.config)==null?void 0:T.properties)||[];case t.CUSTOM:return((y=(v=n.config)==null?void 0:v.custom)==null?void 0:y.params)||[];default:return[]}}),D=O(()=>{var e,r,p,S,T,v;switch(n.type){case t.SERVICE:return a.TITLES.SERVICE((r=(e=n.config)==null?void 0:e.service)==null?void 0:r.name);case t.EVENT:return a.TITLES.EVENT((S=(p=n.config)==null?void 0:p.event)==null?void 0:S.name);case t.PROPERTY:return a.TITLES.PROPERTY;case t.CUSTOM:return a.TITLES.CUSTOM((v=(T=n.config)==null?void 0:T.custom)==null?void 0:v.name);default:return a.TITLES.DEFAULT}}),G=O(()=>{switch(n.type){case t.SERVICE:return u.TITLE_ICONS.SERVICE;case t.EVENT:return u.TITLE_ICONS.EVENT;case t.PROPERTY:return u.TITLE_ICONS.PROPERTY;case t.CUSTOM:return u.TITLE_ICONS.CUSTOM;default:return u.TITLE_ICONS.DEFAULT}}),B=O(()=>{switch(n.type){case t.SERVICE:return u.PARAMS_ICONS.SERVICE;case t.EVENT:return u.PARAMS_ICONS.EVENT;case t.PROPERTY:return u.PARAMS_ICONS.PROPERTY;case t.CUSTOM:return u.PARAMS_ICONS.CUSTOM;default:return u.PARAMS_ICONS.DEFAULT}}),J=O(()=>{switch(n.type){case t.SERVICE:return a.PARAMS_LABELS.SERVICE;case t.EVENT:return a.PARAMS_LABELS.EVENT;case t.PROPERTY:return a.PARAMS_LABELS.PROPERTY;case t.CUSTOM:return a.PARAMS_LABELS.CUSTOM;default:return a.PARAMS_LABELS.DEFAULT}}),b=O(()=>{switch(n.type){case t.SERVICE:return a.EMPTY_MESSAGES.SERVICE;case t.EVENT:return a.EMPTY_MESSAGES.EVENT;case t.PROPERTY:return a.EMPTY_MESSAGES.PROPERTY;case t.CUSTOM:return a.EMPTY_MESSAGES.CUSTOM;default:return a.EMPTY_MESSAGES.DEFAULT}});O(()=>{switch(n.type){case t.SERVICE:return a.NO_CONFIG_MESSAGES.SERVICE;case t.EVENT:return a.NO_CONFIG_MESSAGES.EVENT;case t.PROPERTY:return a.NO_CONFIG_MESSAGES.PROPERTY;case t.CUSTOM:return a.NO_CONFIG_MESSAGES.CUSTOM;default:return a.NO_CONFIG_MESSAGES.DEFAULT}});const P=()=>{try{if(E.value="",o.value.trim()){const e=JSON.parse(o.value);if(R.value=o.value,typeof e!="object"||e===null)return void(E.value=a.PARAMS_MUST_BE_OBJECT);for(const r of m.value)if(r.required&&(!e[r.identifier]||e[r.identifier]===""))return void(E.value=a.PARAM_REQUIRED_ERROR(r.name))}else R.value="";E.value=""}catch(e){E.value=a.JSON_FORMAT_ERROR(e instanceof Error?e.message:a.UNKNOWN_ERROR)}},k=()=>{o.value=M(),P()},z=()=>{o.value="",R.value="",E.value=""},j=e=>({[c.INT]:"\u6574\u6570",[c.FLOAT]:"\u6D6E\u70B9\u6570",[c.DOUBLE]:"\u53CC\u7CBE\u5EA6",[c.TEXT]:"\u5B57\u7B26\u4E32",[c.BOOL]:"\u5E03\u5C14\u503C",[c.ENUM]:"\u679A\u4E3E",[c.DATE]:"\u65E5\u671F",[c.STRUCT]:"\u7ED3\u6784\u4F53",[c.ARRAY]:"\u6570\u7EC4"})[e]||e,X=e=>(I[e.dataType]||I.DEFAULT).display,M=()=>{if(m.value.length===0)return"{}";const e={};return m.value.forEach(r=>{const p=I[r.dataType]||I.DEFAULT;e[r.identifier]=p.value}),JSON.stringify(e,null,2)},L=e=>{if(!e||!e.trim())return o.value="",void(E.value="");try{const r=JSON.parse(e);o.value=JSON.stringify(r,null,2),E.value=""}catch{o.value=e,E.value=""}};return V(()=>R.value,async(e,r)=>{e!==r&&(await h(),L(e||""))},{immediate:!0}),te(async()=>{await h(),R.value&&L(R.value)}),V(()=>n.config,(e,r)=>{JSON.stringify(e)!==JSON.stringify(r)&&(R.value||(o.value="",E.value=""))}),(e,r)=>{const p=K,S=Z,T=Q,v=$,y=W;return f(),_("div",ne,[s("div",Ee,[x(p,{modelValue:l(o),"onUpdate:modelValue":r[0]||(r[0]=d=>re(o)?o.value=d:null),type:"textarea",rows:4,placeholder:e.placeholder,onInput:P,class:N({"is-error":l(E)})},null,8,["modelValue","placeholder","class"]),s("div",ie,[x(y,{placement:"left-start",width:450,trigger:"click","show-arrow":!0,offset:8,"popper-class":"json-params-detail-popover"},{reference:C(()=>[x(S,{type:"info",icon:l(ee),circle:"",size:"small",title:l(a).VIEW_EXAMPLE_TITLE},null,8,["icon","title"])]),default:C(()=>[s("div",oe,[s("div",ue,[x(T,{icon:l(G),class:"text-[var(--el-color-primary)] text-18px"},null,8,["icon"]),s("span",pe,i(l(D)),1)]),s("div",Se,[l(m).length>0?(f(),_("div",Te,[s("div",de,[x(T,{icon:l(B),class:"text-[var(--el-color-primary)] text-14px"},null,8,["icon"]),s("span",xe,i(l(J)),1)]),s("div",ve,[(f(!0),_(se,null,le(l(m),d=>{return f(),_("div",{key:d.identifier,class:"flex items-center justify-between p-8px bg-[var(--el-fill-color-lighter)] rounded-4px"},[s("div",Re,[s("div",Oe,[A(i(d.name)+" ",1),d.required?(f(),ce(v,{key:0,size:"small",type:"danger",class:"ml-4px"},{default:C(()=>[A(i(l(a).REQUIRED_TAG),1)]),_:1})):Y("",!0)]),s("div",fe,i(d.identifier),1)]),s("div",Ae,[x(v,{type:(U=d.dataType,{[c.INT]:"primary",[c.FLOAT]:"success",[c.DOUBLE]:"success",[c.TEXT]:"info",[c.BOOL]:"warning",[c.ENUM]:"danger",[c.DATE]:"primary",[c.STRUCT]:"info",[c.ARRAY]:"warning"}[U]||"info"),size:"small"},{default:C(()=>[A(i(j(d.dataType)),1)]),_:2},1032,["type"]),s("span",me,i(X(d)),1)])]);var U}),128))]),s("div",_e,[s("div",Ce,i(l(a).COMPLETE_JSON_FORMAT),1),s("pre",ye,[r[1]||(r[1]=A("                      ")),s("code",null,i(M()),1),r[2]||(r[2]=A(`
                    `))])])])):(f(),_("div",Ie,[s("div",Ne,[s("p",Pe,i(l(b)),1)])]))])])]),_:1})])]),s("div",Me,[s("div",Le,[x(T,{icon:l(E)?l(u).STATUS_ICONS.ERROR:l(u).STATUS_ICONS.SUCCESS,class:N([l(E)?"text-[var(--el-color-danger)]":"text-[var(--el-color-success)]","text-14px"])},null,8,["icon","class"]),s("span",{class:N([l(E)?"text-[var(--el-color-danger)]":"text-[var(--el-color-success)]","text-12px"])},i(l(E)||l(a).JSON_FORMAT_CORRECT),3)]),l(m).length>0?(f(),_("div",Ue,[s("span",ge,i(l(a).QUICK_FILL_LABEL),1),x(S,{size:"small",type:"primary",plain:"",onClick:k},{default:C(()=>[A(i(l(a).EXAMPLE_DATA_BUTTON),1)]),_:1}),x(S,{size:"small",type:"danger",plain:"",onClick:z},{default:C(()=>[A(i(l(a).CLEAR_BUTTON),1)]),_:1})])):Y("",!0)])])}}}),[["__scopeId","data-v-1604fd24"]]);export{Ve as default};
