import{_ as P}from"./Dialog.vue_vue_type_style_index_0_lang-bMayE4GC.js";import{p as k,D as S,_ as x}from"./index-B2urM1q-.js";import{_ as D}from"./DictTag.vue_vue_type_script_lang-wg8pUI-B.js";import{d as y,a as L}from"./formatTime-BGPGB_ys.js";import{b as j}from"./formCreate-BIGK0pmc.js";import{g as q}from"./index-C6FuNdKy.js";import{Z as z,_ as E,f as F}from"./form-designer-DHHJWkD5.js";import{l as G,r as u,b as H,aa as J,m as K,q as T,I as Z,J as e,u as l,B as o,G as d,H as f,A as N,E as O,h as Q,n as R}from"./form-create-_84fGzaM.js";const W=G({name:"BpmProcessInstanceTaskList",__name:"ProcessInstanceTaskList",props:{loading:k.bool.def(!1),id:k.string},setup(V){const c=V,w=u([]),i=u(),s=u({rule:[],option:{},value:{}}),m=u(!1);return H(()=>c.loading,async _=>{_&&(w.value=await q(c.id))}),(_,t)=>{const r=E,I=D,U=x,A=F,B=z,C=J("form-create"),M=P;return T(),K(Z,null,[e(B,{data:l(w),border:"","header-cell-class-name":"table-header-gray"},{default:o(()=>[e(r,{label:"\u5BA1\u6279\u8282\u70B9",prop:"name","min-width":"120",align:"center"}),e(r,{label:"\u5BA1\u6279\u4EBA","min-width":"100",align:"center"},{default:o(a=>{var p,n;return[d(f(((p=a.row.assigneeUser)==null?void 0:p.nickname)||((n=a.row.ownerUser)==null?void 0:n.nickname)),1)]}),_:1}),e(r,{formatter:l(y),align:"center",label:"\u5F00\u59CB\u65F6\u95F4",prop:"createTime","min-width":"140"},null,8,["formatter"]),e(r,{formatter:l(y),align:"center",label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime","min-width":"140"},null,8,["formatter"]),e(r,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status","min-width":"90"},{default:o(a=>[e(I,{type:l(S).BPM_TASK_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),e(r,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"200"},{default:o(a=>[d(f(a.row.reason)+" ",1),a.row.formId>0?(T(),N(A,{key:0,class:"ml-10px",size:"small",onClick:p=>(async n=>{var b,g,h,v;j(s,n.formConf,n.formFields,n.formVariables),m.value=!0,await R(),i.value.fapi.btn.show(!1),(g=(b=i.value)==null?void 0:b.fapi)==null||g.resetBtn.show(!1),(v=(h=i.value)==null?void 0:h.fapi)==null||v.disabled(!0)})(a.row)},{default:o(()=>[e(U,{icon:"ep:document"}),t[2]||(t[2]=d(" \u67E5\u770B\u8868\u5355 "))]),_:2},1032,["onClick"])):O("",!0)]),_:1}),e(r,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis","min-width":"100"},{default:o(a=>[d(f(l(L)(a.row.durationInMillis)),1)]),_:1})]),_:1},8,["data"]),e(M,{title:"\u8868\u5355\u8BE6\u60C5",modelValue:l(m),"onUpdate:modelValue":t[1]||(t[1]=a=>Q(m)?m.value=a:null),width:"600"},{default:o(()=>[e(C,{ref_key:"fApi",ref:i,modelValue:l(s).value,"onUpdate:modelValue":t[0]||(t[0]=a=>l(s).value=a),option:l(s).option,rule:l(s).rule},null,8,["modelValue","option","rule"])]),_:1},8,["modelValue"])],64)}}});export{W as _};
