import{a as A,d as B,_ as J,N as T}from"./index-DzK2S43K.js";import{_ as F}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{d as Z}from"./formatTime-BGPGB_ys.js";import{D as v}from"./index-BmbAaXC0.js";import{_ as E}from"./Demo03GradeForm.vue_vue_type_script_setup_true_lang-CB1liYSH.js";import{f as H,ak as K,_ as O,Z as Q}from"./form-designer-DHHJWkD5.js";import{l as V,r as m,j as W,b as X,ag as Y,m as $,q as n,I as ee,J as a,B as i,C as c,A as u,G as y,u as l}from"./form-create-_84fGzaM.js";const ae=V({__name:"Demo03GradeList",props:{studentId:{}},setup(D){const{t:C}=A(),d=B(),w=D,k=m(!1),b=m([]),h=m(0),o=W({pageNo:1,pageSize:10,studentId:void 0});X(()=>w.studentId,t=>{t&&(o.studentId=t,N())},{immediate:!0,deep:!0});const p=async()=>{k.value=!0;try{const t=await v.getDemo03GradePage(o);b.value=t.list,h.value=t.total}finally{k.value=!1}},N=()=>{o.pageNo=1,p()},S=m(),I=(t,e)=>{w.studentId?S.value.open(t,e,w.studentId):d.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")},x=async()=>{try{await d.delConfirm(),await v.deleteDemo03GradeList(f.value),f.value=[],d.success(C("common.delSuccess")),await p()}catch{}},f=m([]),z=t=>{f.value=t.map(e=>e.id)};return(t,e)=>{const G=J,g=H,r=O,P=Q,L=M,R=F,_=Y("hasPermi"),U=K;return n(),$(ee,null,[a(R,null,{default:i(()=>[c((n(),u(g,{type:"primary",plain:"",onClick:e[0]||(e[0]=s=>I("create"))},{default:i(()=>[a(G,{icon:"ep:plus",class:"mr-5px"}),e[3]||(e[3]=y(" \u65B0\u589E "))]),_:1})),[[_,["infra:demo03-student:create"]]]),c((n(),u(g,{type:"danger",plain:"",disabled:l(T)(l(f)),onClick:x},{default:i(()=>[a(G,{icon:"ep:delete",class:"mr-5px"}),e[4]||(e[4]=y(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[_,["infra:demo03-student:delete"]]]),c((n(),u(P,{"row-key":"id",data:l(b),stripe:!0,"show-overflow-tooltip":!0,onSelectionChange:z},{default:i(()=>[a(r,{type:"selection",width:"55"}),a(r,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(r,{label:"\u540D\u5B57",align:"center",prop:"name"}),a(r,{label:"\u73ED\u4E3B\u4EFB",align:"center",prop:"teacher"}),a(r,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(Z),width:"180px"},null,8,["formatter"]),a(r,{label:"\u64CD\u4F5C",align:"center"},{default:i(s=>[c((n(),u(g,{link:"",type:"primary",onClick:j=>I("update",s.row.id)},{default:i(()=>e[5]||(e[5]=[y(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[_,["infra:demo03-student:update"]]]),c((n(),u(g,{link:"",type:"danger",onClick:j=>(async q=>{try{await d.delConfirm(),await v.deleteDemo03Grade(q),d.success(C("common.delSuccess")),await p()}catch{}})(s.row.id)},{default:i(()=>e[6]||(e[6]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[U,l(k)]]),a(L,{total:l(h),page:l(o).pageNo,"onUpdate:page":e[1]||(e[1]=s=>l(o).pageNo=s),limit:l(o).pageSize,"onUpdate:limit":e[2]||(e[2]=s=>l(o).pageSize=s),onPagination:p},null,8,["total","page","limit"])]),_:1}),a(E,{ref_key:"formRef",ref:S,onSuccess:p},null,512)],64)}}});export{ae as _};
