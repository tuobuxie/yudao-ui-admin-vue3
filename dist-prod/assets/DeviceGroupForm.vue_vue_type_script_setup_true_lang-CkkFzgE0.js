import{a as j,d as q}from"./index-DzK2S43K.js";import{_ as S}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{D as U}from"./index-BrWsOwLz.js";import{D as A}from"./index-Bo43e_mE.js";import{h as B,aj as J,x as K,Q as L,ak as Q,f as R}from"./form-designer-DHHJWkD5.js";import{l as T,r as t,j as $,A as c,q as i,B as s,C as z,u as l,J as m,m as E,I as H,$ as M,G as v,h as N}from"./form-create-_84fGzaM.js";const O=T({name:"IoTDeviceGroupForm",__name:"DeviceGroupForm",emits:["success"],setup(P,{expose:g,emit:_}){const{t:y}=j(),I=q(),u=t(!1),d=t(!1),o=t({ids:[],groupIds:[]}),b=$({groupIds:[{required:!0,message:"\u8BBE\u5907\u5206\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),p=t(),n=t([]);g({open:async r=>{u.value=!0,h(),o.value.ids=r;try{n.value=await A.getSimpleDeviceGroupList()}catch{}}});const V=_,D=async()=>{await p.value.validate(),d.value=!0;try{await U.updateDeviceGroup(o.value),I.success(y("common.updateSuccess")),u.value=!1,V("success")}finally{d.value=!1}},h=()=>{var r;o.value={ids:[],groupIds:[]},(r=p.value)==null||r.resetFields()};return(r,e)=>{const k=L,G=K,w=J,x=B,f=R,C=S,F=Q;return i(),c(C,{title:"\u6DFB\u52A0\u8BBE\u5907\u5230\u5206\u7EC4",modelValue:l(u),"onUpdate:modelValue":e[2]||(e[2]=a=>N(u)?u.value=a:null)},{footer:s(()=>[m(f,{onClick:D,type:"primary",disabled:l(d)},{default:s(()=>e[3]||(e[3]=[v("\u786E \u5B9A")])),_:1},8,["disabled"]),m(f,{onClick:e[1]||(e[1]=a=>u.value=!1)},{default:s(()=>e[4]||(e[4]=[v("\u53D6 \u6D88")])),_:1})]),default:s(()=>[z((i(),c(x,{ref_key:"formRef",ref:p,model:l(o),rules:l(b),"label-width":"100px"},{default:s(()=>[m(w,{label:"\u8BBE\u5907\u5206\u7EC4",prop:"groupIds"},{default:s(()=>[m(G,{modelValue:l(o).groupIds,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).groupIds=a),placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907\u5206\u7EC4",multiple:"",clearable:""},{default:s(()=>[(i(!0),E(H,null,M(l(n),a=>(i(),c(k,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[F,l(d)]])]),_:1},8,["modelValue"])}}});export{O as _};
