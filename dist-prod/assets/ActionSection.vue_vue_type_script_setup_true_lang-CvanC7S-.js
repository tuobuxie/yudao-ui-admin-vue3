import{aE as L,_ as P}from"./index-D_TWD7wt.js";import{_ as z}from"./DeviceControlConfig.vue_vue_type_script_setup_true_lang-BYYkGcUI.js";import{_ as D}from"./AlertConfig.vue_vue_type_script_setup_true_lang-DeLYEtNI.js";import{s as j,t as q,q as d}from"./constants-CaEZMpg0.js";import{ad as N,aU as Y,f as K,a6 as $,aj as B,x as H,Q as J}from"./form-designer-DHHJWkD5.js";import{l as Q,A as y,q as o,B as i,x as a,m as x,E,u as p,J as t,G as f,I as V,$ as k,H as _}from"./form-create-_84fGzaM.js";const F={class:"flex items-center justify-between"},M={class:"flex items-center gap-8px"},W={class:"flex items-center gap-8px"},X={class:"p-0"},Z={key:0},ee={key:1,class:"space-y-24px"},le={class:"flex items-center justify-between p-16px bg-gradient-to-r from-blue-50 to-sky-50 border-b border-blue-200 rounded-t-6px"},ae={class:"flex items-center gap-12px"},te={class:"flex items-center gap-8px text-16px font-600 text-blue-700"},se={class:"w-24px h-24px bg-blue-500 text-white rounded-full flex items-center justify-center text-12px font-bold"},oe={class:"flex items-center gap-8px"},ie={class:"p-16px space-y-16px"},re={class:"w-full"},de={key:2,class:"border border-[var(--el-border-color-light)] rounded-6px p-16px bg-[var(--el-fill-color-blank)]"},ne={class:"flex items-center gap-8px mb-8px"},pe={key:2,class:"text-center py-16px"},ce=Q({name:"ActionSection",__name:"ActionSection",props:{actions:{}},emits:["update:actions"],setup(T,{emit:w}){const r=L(T,"actions",w),C=l=>[d.DEVICE_PROPERTY_SET,d.DEVICE_SERVICE_INVOKE].includes(l),b=()=>{const l={type:d.DEVICE_PROPERTY_SET,productId:void 0,deviceId:void 0,identifier:void 0,params:void 0,alertConfigId:void 0};r.value.push(l)},I=(l,e)=>{C(e)?(l.alertConfigId=void 0,l.params||(l.params=""),l.identifier&&e!==l.type&&(l.identifier=void 0)):(c=>[d.ALERT_TRIGGER,d.ALERT_RECOVER].includes(c))(e)&&(l.productId=void 0,l.deviceId=void 0,l.identifier=void 0,l.params=void 0,l.alertConfigId=void 0)};return(l,e)=>{const c=P,R=$,g=K,A=Y,O=J,G=H,S=B,U=N;return o(),y(U,{class:"border border-[var(--el-border-color-light)] rounded-8px",shadow:"never"},{header:i(()=>[a("div",F,[a("div",M,[t(c,{icon:"ep:setting",class:"text-[var(--el-color-primary)] text-18px"}),e[0]||(e[0]=a("span",{class:"text-16px font-600 text-[var(--el-text-color-primary)]"},"\u6267\u884C\u5668\u914D\u7F6E",-1)),t(R,{size:"small",type:"info"},{default:i(()=>[f(_(p(r).length)+" \u4E2A\u6267\u884C\u5668",1)]),_:1})]),a("div",W,[t(g,{type:"primary",size:"small",onClick:b},{default:i(()=>[t(c,{icon:"ep:plus"}),e[1]||(e[1]=f(" \u6DFB\u52A0\u6267\u884C\u5668 "))]),_:1})])])]),default:i(()=>[a("div",X,[p(r).length===0?(o(),x("div",Z,[t(A,{description:"\u6682\u65E0\u6267\u884C\u5668\u914D\u7F6E"},{default:i(()=>[t(g,{type:"primary",onClick:b},{default:i(()=>[t(c,{icon:"ep:plus"}),e[2]||(e[2]=f(" \u6DFB\u52A0\u7B2C\u4E00\u4E2A\u6267\u884C\u5668 "))]),_:1})]),_:1})])):(o(),x("div",ee,[(o(!0),x(V,null,k(p(r),(n,v)=>{return o(),x("div",{key:`action-${v}`,class:"border-2 border-blue-200 rounded-8px bg-blue-50 shadow-sm hover:shadow-md transition-shadow"},[a("div",le,[a("div",ae,[a("div",te,[a("div",se,_(v+1),1),a("span",null,"\u6267\u884C\u5668 "+_(v+1),1)]),t(R,{type:(h=n.type,{[d.DEVICE_PROPERTY_SET]:"primary",[d.DEVICE_SERVICE_INVOKE]:"success",[d.ALERT_TRIGGER]:"danger",[d.ALERT_RECOVER]:"warning"}[h]||"info"),size:"small",class:"font-500"},{default:i(()=>[f(_(p(j)(n.type)),1)]),_:2},1032,["type"])]),a("div",oe,[p(r).length>1?(o(),y(g,{key:0,type:"danger",size:"small",text:"",onClick:s=>(u=>{r.value.splice(u,1)})(v),class:"hover:bg-red-50"},{default:i(()=>[t(c,{icon:"ep:delete"}),e[3]||(e[3]=f(" \u5220\u9664 "))]),_:2},1032,["onClick"])):E("",!0)])]),a("div",ie,[a("div",re,[t(S,{label:"\u6267\u884C\u7C7B\u578B",required:""},{default:i(()=>[t(G,{"model-value":n.type,"onUpdate:modelValue":s=>((u,m)=>{r.value[u].type=m,I(r.value[u],m)})(v,s),onChange:s=>I(n,s),placeholder:"\u8BF7\u9009\u62E9\u6267\u884C\u7C7B\u578B",class:"w-full"},{default:i(()=>[(o(!0),x(V,null,k(p(q)(),s=>(o(),y(O,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:2},1032,["model-value","onUpdate:modelValue","onChange"])]),_:2},1024)]),C(n.type)?(o(),y(z,{key:0,"model-value":n,"onUpdate:modelValue":s=>((u,m)=>{r.value[u]=m})(v,s)},null,8,["model-value","onUpdate:modelValue"])):E("",!0),n.type===p(d).ALERT_RECOVER?(o(),y(D,{key:1,"model-value":n.alertConfigId,"onUpdate:modelValue":s=>((u,m)=>{r.value[u].alertConfigId=m})(v,s)},null,8,["model-value","onUpdate:modelValue"])):E("",!0),n.type===p(d).ALERT_TRIGGER?(o(),x("div",de,[a("div",ne,[t(c,{icon:"ep:warning",class:"text-[var(--el-color-warning)] text-16px"}),e[5]||(e[5]=a("span",{class:"text-14px font-600 text-[var(--el-text-color-primary)]"},"\u89E6\u53D1\u544A\u8B66",-1)),t(R,{size:"small",type:"warning"},{default:i(()=>e[4]||(e[4]=[f("\u81EA\u52A8\u6267\u884C")])),_:1})]),e[6]||(e[6]=a("div",{class:"text-12px text-[var(--el-text-color-secondary)] leading-relaxed"}," \u5F53\u89E6\u53D1\u6761\u4EF6\u6EE1\u8DB3\u65F6\uFF0C\u7CFB\u7EDF\u5C06\u81EA\u52A8\u53D1\u9001\u544A\u8B66\u901A\u77E5\uFF0C\u53EF\u5728\u83DC\u5355 [\u544A\u8B66\u4E2D\u5FC3 -> \u544A\u8B66\u914D\u7F6E] \u7BA1\u7406\u3002 ",-1))])):E("",!0)])]);var h}),128))])),p(r).length>0?(o(),x("div",pe,[t(g,{type:"primary",plain:"",onClick:b},{default:i(()=>[t(c,{icon:"ep:plus"}),e[7]||(e[7]=f(" \u7EE7\u7EED\u6DFB\u52A0\u6267\u884C\u5668 "))]),_:1})])):E("",!0)])]),_:1})}}});export{ce as _};
