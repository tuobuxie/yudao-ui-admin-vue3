import{Y as E,Z as L,$ as q,a0 as z,a1 as G,a as J,p as R,n as Q,a2 as W,_ as Y,c as Z}from"./index-DmQdxAiK.js";import{I as H}from"./InputPassword-Dx7kyD_2.js";import{V as K,s as D,a1 as X,au as oo,av as to,S as ao,C as eo,B as no,F as so,G as lo,A as ro,D as co,m as io,x as po,l as mo,p as uo,k as fo,q as B,aw as bo,Q as Po,u as ho,t as vo,w as go,r as So,ak as Co,h as xo,ai as ko,i as To,j as Oo,aj as Io,o as Ro}from"./form-designer-DHHJWkD5.js";import{J as f,v as T,l as yo,r as y,c as Ao,u as m,e as Fo,b as jo,C as U,a0 as Vo,ag as $o,I as wo}from"./form-create-_84fGzaM.js";const _={Radio:D,Checkbox:B,CheckboxButton:B,Input:fo,Autocomplete:uo,InputNumber:mo,Select:po,Cascader:io,Switch:co,Slider:ro,TimePicker:lo,DatePicker:so,Rate:no,ColorPicker:eo,Transfer:ao,Divider:K,TimeSelect:to,SelectV2:oo,TreeSelect:X,RadioButton:D,InputPassword:H,Editor:z,UploadImg:q,UploadImgs:L,UploadFile:E},O=(u,P="default",I)=>{if(!u||!Reflect.has(u,P)||!G(u[P]))return null;const k=u[P];return k?k(I):null},Do=(u,P={},I)=>{const k={};for(const C in P)P[C]&&(k[C]=A=>O(u,`${I}-${C}`,A));return k};function M(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!Vo(u)}const{getPrefixCls:Bo}=Q(),Uo=Bo("form"),_o=Z(yo({name:"Form",props:{schema:{type:Array,default:()=>[]},isCol:R.bool.def(!1),model:{type:Object,default:()=>({})},autoSetPlaceholder:R.bool.def(!0),isCustom:R.bool.def(!1),labelWidth:R.oneOfType([String,Number]).def("auto"),vLoading:R.bool.def(!1)},emits:["register"],setup(u,{slots:P,expose:I,emit:k}){const C=y(),A=y({}),F=y({}),g=Ao(()=>{const o={...u};return Object.assign(o,m(F)),o}),S=y({});Fo(()=>{var o;k("register",(o=m(C))==null?void 0:o.$parent,m(C))}),I({setValues:(o={})=>{S.value=Object.assign(m(S),o)},formModel:S,setProps:(o={})=>{F.value=Object.assign(m(F),o),A.value=o},delSchema:o=>{const{schema:l}=m(g),a=W(l,r=>r.field===o);a>-1&&l.splice(a,1)},addSchema:(o,l)=>{const{schema:a}=m(g);l===void 0?a.push(o):a.splice(l,0,o)},setSchema:o=>{const{schema:l}=m(g);for(const a of l)for(const r of o)a.field===r.field&&ko(a,r.path,r.value)},getElFormRef:()=>m(C)}),jo(()=>m(g).schema,(o=[])=>{S.value=((l,a)=>{const r={...a};return l.map(t=>{if(t.hidden)delete r[t.field];else if(t.component&&t.component!=="Divider"){const v=Reflect.has(r,t.field);r[t.field]=v?r[t.field]:t.value!==void 0?t.value:""}}),r})(o,m(S))},{immediate:!0,deep:!0});const j=()=>{const{schema:o=[],isCol:l}=m(g);return o.filter(a=>!a.hidden).map(a=>{let r;return a.component==="Divider"?f(_.Divider,{contentPosition:"left",...a.componentProps},{default:()=>[a==null?void 0:a.label]}):l?f(Oo,((t={})=>({...t.span?{}:{xs:24,sm:12,md:12,lg:12,xl:12},...t}))(a.colProps),M(r=V(a))?r:{default:()=>[r]}):V(a)})},V=o=>{var t,v;const l=["SelectV2","Cascader","Transfer"],a={...Do(P,(t=o==null?void 0:o.componentProps)==null?void 0:t.slots,o.field)};(o==null?void 0:o.component)!=="SelectV2"&&(o==null?void 0:o.component)!=="Cascader"&&((v=o==null?void 0:o.componentProps)!=null&&v.options)&&(a.default=()=>N(o));const r=((n,p)=>{const c={};return n[`${p}-error`]&&(c.error=i=>O(n,`${p}-error`,i)),n[`${p}-label`]&&(c.label=i=>O(n,`${p}-label`,i)),c})(P,o.field);return o!=null&&o.labelMessage&&(r.label=()=>f(wo,null,[f("span",null,[o.label]),f(Ro,{placement:"right","raw-content":!0},{content:()=>U(f("span",null,null),[[$o("dompurify-html"),o.labelMessage]]),default:()=>f(Y,{icon:"ep:warning",size:16,color:"var(--el-color-primary)",class:"relative top-1px ml-2px"},null)})])),f(Io,T(o.formItemProps||{},{prop:o.field,label:o.label||""}),{...r,default:()=>{var c,i,h;const n=_[o.component],{autoSetPlaceholder:p}=m(g);return P[o.field]?O(P,o.field,S.value):f(n,T({modelValue:S.value[o.field],"onUpdate:modelValue":e=>S.value[o.field]=e},p&&(e=>{var b,d;const{t:s}=J();return["Input","Autocomplete","InputNumber","InputPassword"].includes(e==null?void 0:e.component)?{placeholder:s("common.inputText")+e.label}:["Select","SelectV2","TimePicker","DatePicker","TimeSelect","TimeSelect"].includes(e==null?void 0:e.component)?["datetimerange","daterange","monthrange","datetimerange","daterange"].includes(((b=e==null?void 0:e.componentProps)==null?void 0:b.type)||((d=e==null?void 0:e.componentProps)==null?void 0:d.isRange))?{startPlaceholder:s("common.startTimeText"),endPlaceholder:s("common.endTimeText"),rangeSeparator:"-"}:{placeholder:s("common.selectText")+e.label}:{}})(o),(e=>{const s=["ColorPicker"].includes(e.component)?{...e.componentProps}:{clearable:!0,...e.componentProps};return s==null||delete s.slots,s})(o),{style:(c=o.componentProps)==null?void 0:c.style},l.includes(o==null?void 0:o.component)&&((i=o==null?void 0:o.componentProps)!=null&&i.options)?{options:((h=o==null?void 0:o.componentProps)==null?void 0:h.options)||[]}:{}),{...a})}})},N=o=>{switch(o.component){case"Select":case"SelectV2":const{renderSelectOptions:l}=(t=>{const v=(n,p)=>{var b,d,x,$;const c=(d=(b=n==null?void 0:n.componentProps)==null?void 0:b.optionsAlias)==null?void 0:d.labelField,i=($=(x=n==null?void 0:n.componentProps)==null?void 0:x.optionsAlias)==null?void 0:$.valueField,{label:h,value:e,...s}=p;return f(Po,T(s,{label:c?p[c]:h,value:i?p[i]:e}),{default:()=>{var w;return(w=n==null?void 0:n.componentProps)!=null&&w.optionsSlot?O(t,`${n.field}-option`,{item:p}):void 0}})};return{renderSelectOptions:n=>{var c,i,h,e;const p=(i=(c=n==null?void 0:n.componentProps)==null?void 0:c.optionsAlias)==null?void 0:i.labelField;return(e=(h=n==null?void 0:n.componentProps)==null?void 0:h.options)==null?void 0:e.map(s=>{var b;return(b=s==null?void 0:s.options)!=null&&b.length?f(bo,{label:s[p||"label"]},{default:()=>{var d;return(d=s==null?void 0:s.options)==null?void 0:d.map(x=>v(n,x))}}):v(n,s)})}}})(P);return l(o);case"Radio":case"RadioButton":const{renderRadioOptions:a}={renderRadioOptions:t=>{var c,i,h,e,s,b;const v=(i=(c=t==null?void 0:t.componentProps)==null?void 0:c.optionsAlias)==null?void 0:i.labelField,n=(e=(h=t==null?void 0:t.componentProps)==null?void 0:h.optionsAlias)==null?void 0:e.valueField,p=t.component==="Radio"?ho:vo;return(b=(s=t==null?void 0:t.componentProps)==null?void 0:s.options)==null?void 0:b.map(d=>{const{...x}=d;return f(p,T(x,{label:d[n||"value"]}),{default:()=>[d[v||"label"]]})})}};return a(o);case"Checkbox":case"CheckboxButton":const{renderCheckboxOptions:r}={renderCheckboxOptions:t=>{var c,i,h,e,s,b;const v=(i=(c=t==null?void 0:t.componentProps)==null?void 0:c.optionsAlias)==null?void 0:i.labelField,n=(e=(h=t==null?void 0:t.componentProps)==null?void 0:h.optionsAlias)==null?void 0:e.valueField,p=t.component==="Checkbox"?go:So;return(b=(s=t==null?void 0:t.componentProps)==null?void 0:s.options)==null?void 0:b.map(d=>{const{...x}=d;return f(p,T(x,{label:d[n||"value"]}),{default:()=>[d[v||"label"]]})})}};return r(o)}};return()=>U(f(xo,T({ref:C},(()=>{const o=["schema","isCol","autoSetPlaceholder","isCustom","model"],l={...m(g)};for(const a in l)o.indexOf(a)!==-1&&delete l[a];return l})(),{model:u.isCustom?u.model:S,class:Uo}),{default:()=>{const{isCustom:o}=m(g);return o?O(P,"default"):(()=>{let l;const{isCol:a}=m(g);return a?f(To,{gutter:20},M(l=j())?l:{default:()=>[l]}):j()})()}}),[[Co,u.vLoading]])}}),[["__scopeId","data-v-348f152a"]]);export{_o as _};
