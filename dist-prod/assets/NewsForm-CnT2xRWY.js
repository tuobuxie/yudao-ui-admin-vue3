import{M as q,d as I,aH as D,_ as G,a0 as J,c as K}from"./index-D_TWD7wt.js";import L from"./CoverSelect-CimDJ0Vm.js";import{T as W,f as X,i as $,X as Q,k as R,j as Y,U as Z}from"./form-designer-DHHJWkD5.js";import{l as ee,i as le,u as e,c as N,r as ae,A as C,q as u,B as n,J as l,x as m,m as y,I as te,$ as oe,E as v,D as S,H as x,h as ne}from"./form-create-_84fGzaM.js";const O=I(),se=(_,V)=>({MENU_CONF:{uploadImage:{server:_,maxFileSize:5242880,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{accountId:V,type:"image"},metaWithUrl:!0,headers:{Accept:"*",Authorization:"Bearer "+D(),"tenant-id":q()},withCredentials:!0,timeout:5e3,fieldName:"file",onBeforeUpload:c=>c,onProgress(c){},onSuccess(c,p){},onFailed(c,p){O.alertError(p.message)},onError(c,p,U){O.alertError(p.message)},customInsert(c,p){p(c.data.url,"image",c.data.url)}}}}),ie=()=>({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),re={class:"select-item"},ue=["onClick"],de={class:"news-content"},ce=["src"],me={class:"news-content-title"},pe={key:0,class:"child"},ve=["onClick"],he={class:"news-content-item"},fe={class:"news-content-item-title"},ge={class:"news-content-item-img"},Ce=["src"],ye={class:"child"},ke={key:0},we=ee({name:"NewsForm",__name:"NewsForm",props:{isCreating:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(_,{emit:V}){const c=I(),p=_,U=le("accountId"),M=se("http://47.105.43.107:48080/admin-api/mp/material/upload-permanent",e(U)),A=V,a=N({get:()=>p.modelValue===null?[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}]:p.modelValue,set(s){A("update:modelValue",s)}}),d=ae(0),r=N(()=>a.value[d.value]),b=s=>{const t=a.value[s];a.value[s]=a.value[s+1],a.value[s+1]=t,d.value=s+1},F=async s=>{try{await c.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6587\u5417?"),a.value.splice(s,1),d.value===s&&(d.value=0)}catch{}},E=()=>{a.value.push({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),d.value=a.value.length-1};return(s,t)=>{const f=G,g=X,k=$,P=W,w=R,z=Y,B=Q,T=Z;return u(),C(T,null,{default:n(()=>[l(P,{width:"40%"},{default:n(()=>[m("div",re,[(u(!0),y(te,null,oe(e(a),(o,i)=>(u(),y("div",{key:i},[i===0?(u(),y("div",{key:0,class:S(["news-main father",{activeAddNews:e(d)===i}]),onClick:h=>d.value=i},[m("div",de,[m("img",{class:"material-img",src:o.thumbUrl},null,8,ce),m("div",me,x(o.title),1)]),e(a).length>1?(u(),y("div",pe,[l(g,{type:"info",circle:"",size:"small",onClick:()=>b(i)},{default:n(()=>[l(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"]),s.isCreating?(u(),C(g,{key:0,type:"danger",circle:"",size:"small",onClick:()=>F(i)},{default:n(()=>[l(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):v("",!0)])):v("",!0)],10,ue)):v("",!0),i>0?(u(),y("div",{key:1,class:S(["news-main-item father",{activeAddNews:e(d)===i}]),onClick:h=>d.value=i},[m("div",he,[m("div",fe,x(o.title),1),m("div",ge,[m("img",{class:"material-img",src:o.thumbUrl,width:"100%"},null,8,Ce)])]),m("div",ye,[e(a).length>i+1?(u(),C(g,{key:0,circle:"",type:"info",size:"small",onClick:()=>b(i)},{default:n(()=>[l(f,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"])):v("",!0),i>0?(u(),C(g,{key:1,type:"info",circle:"",size:"small",onClick:()=>(h=>{const H=a.value[h];a.value[h]=a.value[h-1],a.value[h-1]=H,d.value=h-1})(i)},{default:n(()=>[l(f,{icon:"ep:arrow-up-bold"})]),_:2},1032,["onClick"])):v("",!0),s.isCreating?(u(),C(g,{key:2,type:"danger",size:"small",circle:"",onClick:()=>F(i)},{default:n(()=>[l(f,{icon:"ep:delete"})]),_:2},1032,["onClick"])):v("",!0)])],10,ve)):v("",!0)]))),128)),l(k,{justify:"center",class:"ope-row"},{default:n(()=>[e(a).length<8&&s.isCreating?(u(),C(g,{key:0,type:"primary",circle:"",onClick:E},{default:n(()=>[l(f,{icon:"ep:plus"})]),_:1})):v("",!0)]),_:1})])]),_:1}),l(B,null,{default:n(()=>[e(a).length>0?(u(),y("div",ke,[l(k,{gutter:20},{default:n(()=>[l(w,{modelValue:e(r).title,"onUpdate:modelValue":t[0]||(t[0]=o=>e(r).title=o),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF08\u5FC5\u586B\uFF09"},null,8,["modelValue"]),l(w,{modelValue:e(r).author,"onUpdate:modelValue":t[1]||(t[1]=o=>e(r).author=o),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",style:{"margin-top":"5px"}},null,8,["modelValue"]),l(w,{modelValue:e(r).contentSourceUrl,"onUpdate:modelValue":t[2]||(t[2]=o=>e(r).contentSourceUrl=o),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587\u5730\u5740",style:{"margin-top":"5px"}},null,8,["modelValue"])]),_:1}),l(k,{gutter:20},{default:n(()=>[l(z,{span:12},{default:n(()=>[l(L,{modelValue:e(r),"onUpdate:modelValue":t[3]||(t[3]=o=>ne(r)?r.value=o:null),"is-first":e(d)===0},null,8,["modelValue","is-first"])]),_:1}),l(z,{span:12},{default:n(()=>[t[6]||(t[6]=m("p",null,"\u6458\u8981:",-1)),l(w,{rows:8,type:"textarea",modelValue:e(r).digest,"onUpdate:modelValue":t[4]||(t[4]=o=>e(r).digest=o),placeholder:"\u8BF7\u8F93\u5165\u6458\u8981",class:"digest",maxlength:"120"},null,8,["modelValue"])]),_:1})]),_:1}),l(k,null,{default:n(()=>[l(e(J),{modelValue:e(r).content,"onUpdate:modelValue":t[5]||(t[5]=o=>e(r).content=o),"editor-config":e(M)},null,8,["modelValue","editor-config"])]),_:1})])):v("",!0)]),_:1})]),_:1})}}}),j=K(we,[["__scopeId","data-v-47f02ab1"]]),_e=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{j as N,_e as a,ie as c};
