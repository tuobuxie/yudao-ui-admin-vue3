import{e as R,d as T,u as h}from"./index-DmQdxAiK.js";import{_ as q,g as D}from"./index-DWYt2ith.js";import{u as G}from"./tagsView-CQDzb46U.js";import{a as J}from"./index-I-Jey0yC.js";import{_ as P}from"./ReceivableDetailsHeader.vue_vue_type_script_setup_true_lang-DpPdILVY.js";import{_ as Q}from"./ReceivableDetailsInfo.vue_vue_type_script_setup_true_lang-7BmR0Qkh.js";import{_ as W}from"./PermissionList.vue_vue_type_script_setup_true_lang-DKquB-FT.js";import{B as w}from"./index-uUWMlvvc.js";import{_ as F}from"./ReceivableForm.vue_vue_type_script_setup_true_lang-h5s6VIKj.js";import{ak as K,f as S,a0 as $,$ as H,j as N}from"./form-designer-DHHJWkD5.js";import{l as O,r as o,e as U,m as X,q as n,C as Y,J as i,u as a,A as C,B as t,E as Z,G as aa,I as ea}from"./form-create-_84fGzaM.js";import"./formatTime-BGPGB_ys.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-OPDE9cVe.js";import"./DictTag.vue_vue_type_script_lang-DiMRMEpR.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-CYwTe1_g.js";import"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import"./index-oJNTIjFE.js";import"./index-Dl48SA-A.js";import"./index-2M5_FL7t.js";import"./index-DqAYrPV7.js";const ia=O({name:"CrmReceivablePlanDetail",__name:"index",props:{id:{}},setup(E){const z=E,k=R(),I=T(),p=o(0),s=o(!0),l=o({}),f=o(),d=async e=>{s.value=!0;try{l.value=await J(e),await g(e)}finally{s.value=!1}},c=o(),_=o([]),g=async e=>{if(!e)return;const r=await D({bizType:w.CRM_RECEIVABLE,bizId:e});_.value=r.list},{delView:B}=G(),{currentRoute:A}=h(),v=()=>{B(a(A))},{params:ra}=R();return U(async()=>{const e=z.id||k.params.id;if(!e)return I.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void v();p.value=e,await d(p.value)}),(e,r)=>{const L=S,m=H,V=q,j=$,x=N,M=K;return n(),X(ea,null,[Y((n(),C(P,{receivable:a(l)},{default:t(()=>{var u;return[(u=a(f))!=null&&u.validateWrite?(n(),C(L,{key:0,onClick:r[0]||(r[0]=ta=>{return b="update",y=a(l).id,void c.value.open(b,y);var b,y})},{default:t(()=>r[2]||(r[2]=[aa(" \u7F16\u8F91 ")])),_:1})):Z("",!0)]}),_:1},8,["receivable"])),[[M,a(s)]]),i(x,null,{default:t(()=>[i(j,null,{default:t(()=>[i(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:t(()=>[i(Q,{receivable:a(l)},null,8,["receivable"])]),_:1}),i(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[i(V,{"log-list":a(_)},null,8,["log-list"])]),_:1}),i(m,{label:"\u56E2\u961F\u6210\u5458"},{default:t(()=>[i(W,{ref_key:"permissionListRef",ref:f,"biz-id":a(l).id,"biz-type":a(w).CRM_RECEIVABLE,"show-action":!0,onQuitTeam:v},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),i(F,{ref_key:"formRef",ref:c,onSuccess:r[1]||(r[1]=u=>d(a(l).id))},null,512)],64)}}});export{ia as default};
