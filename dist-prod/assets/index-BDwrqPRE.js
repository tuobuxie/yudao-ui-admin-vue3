import{d as H,a as J,g as Q,D as k,_ as $}from"./index-B2urM1q-.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-Cj0jlW8o.js";import{_ as X}from"./DictTag.vue_vue_type_script_lang-wg8pUI-B.js";import{_ as Y}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BRGqERh7.js";import{_ as ee}from"./index-Cb5mbozM.js";import{l as le,r as d,j as ae,e as te,ag as oe,m as n,q as p,J as l,B as t,u as o,Z as O,I as U,$ as re,A as m,C as y,G as g,H as F}from"./form-create-_84fGzaM.js";import{_ as se,C as M}from"./ChatRoleForm.vue_vue_type_script_setup_true_lang-BPZOl2yr.js";import{h as pe,aj as ne,k as ie,x as ue,Q as ce,f as de,Z as me,_ as ge,al as fe,ak as _e}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-bMayE4GC.js";import"./constants-C3gLHYOK.js";import"./index-D1CYwmNH.js";import"./constants-CHvLs4wt.js";import"./index-D7ilv7e5.js";import"./index-yDje6PgJ.js";const ye={key:0},be={key:1},we={key:0},he={key:1},ke=le({name:"AiChatRole",__name:"index",setup(ve){const v=H(),{t:T}=J(),b=d(!0),S=d([]),C=d(0),r=ae({pageNo:1,pageSize:10,name:void 0,category:void 0,publicStatus:!0}),I=d(),i=async()=>{b.value=!0;try{const u=await M.getChatRolePage(r);S.value=u.list,C.value=u.total}finally{b.value=!1}},f=()=>{r.pageNo=1,i()},z=()=>{I.value.resetFields(),f()},x=d(),N=(u,a)=>{x.value.open(u,a)};return te(()=>{i()}),(u,a)=>{const B=ee,R=ie,_=ne,G=ce,P=ue,w=$,c=de,j=pe,V=Y,s=ge,q=fe,A=X,E=me,K=W,h=oe("hasPermi"),L=_e;return p(),n(U,null,[l(B,{title:"AI \u5BF9\u8BDD\u804A\u5929",url:"https://doc.iocoder.cn/ai/chat/"}),l(V,null,{default:t(()=>[l(j,{class:"-mb-15px",model:o(r),ref_key:"queryFormRef",ref:I,inline:!0,"label-width":"68px"},{default:t(()=>[l(_,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:t(()=>[l(R,{modelValue:o(r).name,"onUpdate:modelValue":a[0]||(a[0]=e=>o(r).name=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:"",onKeyup:O(f,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(_,{label:"\u89D2\u8272\u7C7B\u522B",prop:"category"},{default:t(()=>[l(R,{modelValue:o(r).category,"onUpdate:modelValue":a[1]||(a[1]=e=>o(r).category=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7C7B\u522B",clearable:"",onKeyup:O(f,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(_,{label:"\u662F\u5426\u516C\u5F00",prop:"publicStatus"},{default:t(()=>[l(P,{modelValue:o(r).publicStatus,"onUpdate:modelValue":a[2]||(a[2]=e=>o(r).publicStatus=e),placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u516C\u5F00",clearable:"",class:"!w-240px"},{default:t(()=>[(p(!0),n(U,null,re(o(Q)(o(k).INFRA_BOOLEAN_STRING),e=>(p(),m(G,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,null,{default:t(()=>[l(c,{onClick:f},{default:t(()=>[l(w,{icon:"ep:search",class:"mr-5px"}),a[6]||(a[6]=g(" \u641C\u7D22"))]),_:1}),l(c,{onClick:z},{default:t(()=>[l(w,{icon:"ep:refresh",class:"mr-5px"}),a[7]||(a[7]=g(" \u91CD\u7F6E"))]),_:1}),y((p(),m(c,{type:"primary",plain:"",onClick:a[3]||(a[3]=e=>N("create"))},{default:t(()=>[l(w,{icon:"ep:plus",class:"mr-5px"}),a[8]||(a[8]=g(" \u65B0\u589E "))]),_:1})),[[h,["ai:chat-role:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(V,null,{default:t(()=>[y((p(),m(E,{data:o(S),stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[l(s,{label:"\u89D2\u8272\u540D\u79F0",align:"center",prop:"name"}),l(s,{label:"\u7ED1\u5B9A\u6A21\u578B",align:"center",prop:"modelName"}),l(s,{label:"\u89D2\u8272\u5934\u50CF",align:"center",prop:"avatar"},{default:t(e=>[l(q,{src:e==null?void 0:e.row.avatar,class:"w-32px h-32px"},null,8,["src"])]),_:1}),l(s,{label:"\u89D2\u8272\u7C7B\u522B",align:"center",prop:"category"}),l(s,{label:"\u89D2\u8272\u63CF\u8FF0",align:"center",prop:"description"}),l(s,{label:"\u89D2\u8272\u8BBE\u5B9A",align:"center",prop:"systemMessage"}),l(s,{label:"\u77E5\u8BC6\u5E93",align:"center",prop:"knowledgeIds"},{default:t(e=>[e.row.knowledgeIds&&e.row.knowledgeIds.length!==0?(p(),n("span",be,"\u5F15\u7528 "+F(e.row.knowledgeIds.length)+" \u4E2A",1)):(p(),n("span",ye,"-"))]),_:1}),l(s,{label:"\u5DE5\u5177",align:"center",prop:"toolIds"},{default:t(e=>[e.row.toolIds&&e.row.toolIds.length!==0?(p(),n("span",he,"\u5F15\u7528 "+F(e.row.toolIds.length)+" \u4E2A",1)):(p(),n("span",we,"-"))]),_:1}),l(s,{label:"\u662F\u5426\u516C\u5F00",align:"center",prop:"publicStatus"},{default:t(e=>[l(A,{type:o(k).INFRA_BOOLEAN_STRING,value:e.row.publicStatus},null,8,["type","value"])]),_:1}),l(s,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:t(e=>[l(A,{type:o(k).COMMON_STATUS,value:e.row.status},null,8,["type","value"])]),_:1}),l(s,{label:"\u89D2\u8272\u6392\u5E8F",align:"center",prop:"sort"}),l(s,{label:"\u64CD\u4F5C",align:"center"},{default:t(e=>[y((p(),m(c,{link:"",type:"primary",onClick:Z=>N("update",e.row.id)},{default:t(()=>a[9]||(a[9]=[g(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[h,["ai:chat-role:update"]]]),y((p(),m(c,{link:"",type:"danger",onClick:Z=>(async D=>{try{await v.delConfirm(),await M.deleteChatRole(D),v.success(T("common.delSuccess")),await i()}catch{}})(e.row.id)},{default:t(()=>a[10]||(a[10]=[g(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[h,["ai:chat-role:delete"]]])]),_:1})]),_:1},8,["data"])),[[L,o(b)]]),l(K,{total:o(C),page:o(r).pageNo,"onUpdate:page":a[4]||(a[4]=e=>o(r).pageNo=e),limit:o(r).pageSize,"onUpdate:limit":a[5]||(a[5]=e=>o(r).pageSize=e),onPagination:i},null,8,["total","page","limit"])]),_:1}),l(se,{ref_key:"formRef",ref:x,onSuccess:i},null,512)],64)}}});export{ke as default};
