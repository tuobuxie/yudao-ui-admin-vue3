import{a as J,d as S,_ as T}from"./index-DzK2S43K.js";import{_ as z}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{u as D,a as K}from"./index-E1LBjb40.js";import{f as L}from"./formatTime-BGPGB_ys.js";import{h as M,aj as N,k as O,f as P,ak as Q,am as W,an as X,ah as Y,a6 as Z}from"./form-designer-DHHJWkD5.js";import{l as $,r as f,j as ee,A as i,q as n,B as e,C as I,E as ae,u as l,J as r,G as m,H as g,h as le}from"./form-create-_84fGzaM.js";const se=$({name:"BrokerageUserUpdateForm",__name:"BrokerageUserUpdateForm",emits:["success"],setup(re,{expose:h,emit:w}){const{t:V}=J(),c=S(),t=f(!1),u=f(!1),s=f(),v=f(),x=ee({bindUserId:[{required:!0,message:"\u63A8\u5E7F\u5458\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});h({open:async o=>{q(),s.value.id=o.id,s.value.bindUserId=o.bindUserId,o.bindUserId&&await U(),t.value=!0}});const B=w,C=async()=>{if(!u.value&&v&&await v.value.validate())if(d.value){u.value=!0;try{await D(s.value),c.success(V("common.updateSuccess")),t.value=!1,B("success",!0)}finally{u.value=!1}}else c.error("\u8BF7\u5148\u67E5\u8BE2\u5E76\u786E\u8BA4\u63A8\u5E7F\u4EBA")},q=()=>{var o;s.value={id:void 0,bindUserId:void 0},(o=v.value)==null||o.resetFields(),d.value=void 0},d=f(),U=async()=>{s.value.bindUserId!=s.value.id?(u.value=!0,d.value=await K(s.value.bindUserId),d.value||c.warning("\u63A8\u5E7F\u5458\u4E0D\u5B58\u5728"),u.value=!1):c.error("\u4E0D\u80FD\u7ED1\u5B9A\u81EA\u5DF1\u4E3A\u63A8\u5E7F\u4EBA")};return(o,a)=>{const E=T,_=P,F=O,j=N,H=M,R=Y,p=X,k=Z,A=W,G=z,y=Q;return n(),i(G,{modelValue:l(t),"onUpdate:modelValue":a[2]||(a[2]=b=>le(t)?t.value=b:null),title:"\u4FEE\u6539\u4E0A\u7EA7\u63A8\u5E7F\u4EBA",width:"500"},{footer:e(()=>[r(_,{disabled:l(u),type:"primary",onClick:C},{default:e(()=>a[5]||(a[5]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),r(_,{onClick:a[1]||(a[1]=b=>t.value=!1)},{default:e(()=>a[6]||(a[6]=[m("\u53D6 \u6D88")])),_:1})]),default:e(()=>[I((n(),i(H,{ref_key:"formRef",ref:v,model:l(s),rules:l(x),"label-width":"80px"},{default:e(()=>[r(j,{label:"\u63A8\u5E7F\u4EBA",prop:"bindUserId"},{default:e(()=>[I((n(),i(F,{modelValue:l(s).bindUserId,"onUpdate:modelValue":a[0]||(a[0]=b=>l(s).bindUserId=b),placeholder:"\u8BF7\u8F93\u5165\u63A8\u5E7F\u5458\u7F16\u53F7"},{append:e(()=>[r(_,{onClick:U},{default:e(()=>[r(E,{icon:"ep:search",class:"mr-5px"})]),_:1})]),_:1},8,["modelValue"])),[[y,l(u)]])]),_:1})]),_:1},8,["model","rules"])),[[y,l(u)]]),l(d)?(n(),i(A,{key:0,column:1,border:""},{default:e(()=>[r(p,{label:"\u5934\u50CF"},{default:e(()=>[r(R,{src:l(d).avatar},null,8,["src"])]),_:1}),r(p,{label:"\u6635\u79F0"},{default:e(()=>[m(g(l(d).nickname),1)]),_:1}),r(p,{label:"\u63A8\u5E7F\u8D44\u683C"},{default:e(()=>[l(d).brokerageEnabled?(n(),i(k,{key:0},{default:e(()=>a[3]||(a[3]=[m("\u6709")])),_:1})):(n(),i(k,{key:1,type:"info"},{default:e(()=>a[4]||(a[4]=[m("\u65E0")])),_:1}))]),_:1}),r(p,{label:"\u6210\u4E3A\u63A8\u5E7F\u5458\u7684\u65F6\u95F4"},{default:e(()=>[m(g(l(L)(l(d).brokerageTime)),1)]),_:1})]),_:1})):ae("",!0)]),_:1},8,["modelValue"])}}});export{se as _};
