import{a as B,d as G,_ as J,N as R}from"./index-DzK2S43K.js";import{_ as F}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{d as Z}from"./formatTime-BGPGB_ys.js";import{D as k}from"./index-BmbAaXC0.js";import{_ as E}from"./Demo03CourseForm.vue_vue_type_script_setup_true_lang-LuLo2K2D.js";import{f as H,ak as K,_ as O,Z as Q}from"./form-designer-DHHJWkD5.js";import{l as V,r as m,j as W,b as X,ag as Y,m as $,q as n,I as ee,J as a,B as i,C as c,A as u,G as y,u as o}from"./form-create-_84fGzaM.js";const ae=V({__name:"Demo03CourseList",props:{studentId:{}},setup(D){const{t:v}=B(),d=G(),w=D,C=m(!1),b=m([]),S=m(0),s=W({pageNo:1,pageSize:10,studentId:void 0});X(()=>w.studentId,t=>{t&&(s.studentId=t,x())},{immediate:!0,deep:!0});const p=async()=>{C.value=!0;try{const t=await k.getDemo03CoursePage(s);b.value=t.list,S.value=t.total}finally{C.value=!1}},x=()=>{s.pageNo=1,p()},h=m(),I=(t,e)=>{w.studentId?h.value.open(t,e,w.studentId):d.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")},z=async()=>{try{await d.delConfirm(),await k.deleteDemo03CourseList(f.value),f.value=[],d.success(v("common.delSuccess")),await p()}catch{}},f=m([]),P=t=>{f.value=t.map(e=>e.id)};return(t,e)=>{const N=J,g=H,r=O,L=Q,T=M,U=F,_=Y("hasPermi"),j=K;return n(),$(ee,null,[a(U,null,{default:i(()=>[c((n(),u(g,{type:"primary",plain:"",onClick:e[0]||(e[0]=l=>I("create"))},{default:i(()=>[a(N,{icon:"ep:plus",class:"mr-5px"}),e[3]||(e[3]=y(" \u65B0\u589E "))]),_:1})),[[_,["infra:demo03-student:create"]]]),c((n(),u(g,{type:"danger",plain:"",disabled:o(R)(o(f)),onClick:z},{default:i(()=>[a(N,{icon:"ep:delete",class:"mr-5px"}),e[4]||(e[4]=y(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[_,["infra:demo03-student:delete"]]]),c((n(),u(L,{"row-key":"id",data:o(b),stripe:!0,"show-overflow-tooltip":!0,onSelectionChange:P},{default:i(()=>[a(r,{type:"selection",width:"55"}),a(r,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(r,{label:"\u540D\u5B57",align:"center",prop:"name"}),a(r,{label:"\u5206\u6570",align:"center",prop:"score"}),a(r,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:o(Z),width:"180px"},null,8,["formatter"]),a(r,{label:"\u64CD\u4F5C",align:"center"},{default:i(l=>[c((n(),u(g,{link:"",type:"primary",onClick:q=>I("update",l.row.id)},{default:i(()=>e[5]||(e[5]=[y(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[_,["infra:demo03-student:update"]]]),c((n(),u(g,{link:"",type:"danger",onClick:q=>(async A=>{try{await d.delConfirm(),await k.deleteDemo03Course(A),d.success(v("common.delSuccess")),await p()}catch{}})(l.row.id)},{default:i(()=>e[6]||(e[6]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[j,o(C)]]),a(T,{total:o(S),page:o(s).pageNo,"onUpdate:page":e[1]||(e[1]=l=>o(s).pageNo=l),limit:o(s).pageSize,"onUpdate:limit":e[2]||(e[2]=l=>o(s).pageSize=l),onPagination:p},null,8,["total","page","limit"])]),_:1}),a(E,{ref_key:"formRef",ref:h,onSuccess:p},null,512)],64)}}});export{ae as _};
