import{d as B,a as G,_ as J}from"./index-B2urM1q-.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BRGqERh7.js";import{_ as T}from"./index-Cb5mbozM.js";import{l as U,r as p,j as z,e as D,ag as E,m as H,q as s,J as e,B as l,u as r,Z as L,C as u,G as n,A as f,I as M}from"./form-create-_84fGzaM.js";import{d as W}from"./formatTime-BGPGB_ys.js";import{g as N,d as O}from"./index-D1doDjAm.js";import{_ as Q}from"./ProductCategoryForm.vue_vue_type_script_setup_true_lang-CzvkRypU.js";import{h as X}from"./tree-COGD3qag.js";import{h as Y,aj as $,k as ee,f as ae,Z as le,_ as re,ak as te}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-bMayE4GC.js";const oe=U({name:"CrmProductCategory",__name:"index",setup(se){const C=B(),{t:V}=G(),_=p(!0),h=p([]),c=z({name:null}),w=p(),m=async()=>{_.value=!0;try{const d=await N(c);h.value=X(d,"id","parentId")}finally{_.value=!1}},y=()=>{m()},j=()=>{w.value.resetFields(),y()},x=p(),b=(d,a)=>{x.value.open(d,a)};return D(()=>{m()}),(d,a)=>{const q=T,F=ee,v=$,k=J,t=ae,P=Y,I=K,i=re,R=le,g=E("hasPermi"),S=te;return s(),H(M,null,[e(q,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u7BA1\u7406\u3001\u4EA7\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/crm/product/"}),e(I,null,{default:l(()=>[e(P,{class:"-mb-15px",model:r(c),ref_key:"queryFormRef",ref:w,inline:!0,"label-width":"68px"},{default:l(()=>[e(v,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(F,{modelValue:r(c).name,"onUpdate:modelValue":a[0]||(a[0]=o=>r(c).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:L(y,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(t,{onClick:y},{default:l(()=>[e(k,{icon:"ep:search",class:"mr-5px"}),a[2]||(a[2]=n(" \u641C\u7D22"))]),_:1}),e(t,{onClick:j},{default:l(()=>[e(k,{icon:"ep:refresh",class:"mr-5px"}),a[3]||(a[3]=n(" \u91CD\u7F6E"))]),_:1}),u((s(),f(t,{type:"primary",plain:"",onClick:a[1]||(a[1]=o=>b("create"))},{default:l(()=>[e(k,{icon:"ep:plus",class:"mr-5px"}),a[4]||(a[4]=n(" \u65B0\u589E "))]),_:1})),[[g,["crm:product-category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(I,null,{default:l(()=>[u((s(),f(R,{data:r(h),"row-key":"id","default-expand-all":""},{default:l(()=>[e(i,{label:"\u5206\u7C7B\u7F16\u53F7",align:"center",prop:"id"}),e(i,{label:"\u5206\u7C7B\u540D\u79F0",align:"center",prop:"name"}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:r(W),width:"180px"},null,8,["formatter"]),e(i,{label:"\u64CD\u4F5C",align:"center"},{default:l(o=>[u((s(),f(t,{link:"",type:"primary",onClick:Z=>b("update",o.row.id)},{default:l(()=>a[5]||(a[5]=[n(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[g,["crm:product-category:update"]]]),u((s(),f(t,{link:"",type:"danger",onClick:Z=>(async A=>{try{await C.delConfirm(),await O(A),C.success(V("common.delSuccess")),await m()}catch{}})(o.row.id)},{default:l(()=>a[6]||(a[6]=[n(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[g,["crm:product-category:delete"]]])]),_:1})]),_:1},8,["data"])),[[S,r(_)]])]),_:1}),e(Q,{ref_key:"formRef",ref:x,onSuccess:m},null,512)],64)}}});export{oe as default};
