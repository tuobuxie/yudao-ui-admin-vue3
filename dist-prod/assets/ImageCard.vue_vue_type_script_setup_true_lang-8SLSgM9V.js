import{d as $}from"./index-B2urM1q-.js";import{f as q,a_ as F,aR as L,aD as N,aX as P,al as z,ad as D,d as H}from"./form-designer-DHHJWkD5.js";import{a as r}from"./constants-CHvLs4wt.js";import{l as J,r as B,a5 as X,b as K,e as Q,A as c,q as i,B as o,x as u,E,u as a,G as x,J as p,m as h,H as v,I as T,$ as V}from"./form-create-_84fGzaM.js";const W={class:"!flex !flex-row !justify-between"},Y={key:0},Z={class:"!mt-5px !w-full !flex !flex-row !flex-wrap !justify-start"},aa=J({__name:"ImageCard",props:{detail:{type:Object,require:!0}},emits:["onBtnClick","onMjBtnClick"],setup(A,{emit:G}){const M=$(),f=A,k=B(),d=B(),m=async(n,e)=>{w("onBtnClick",n,e)},w=G,{detail:s}=X(f);K(s,async(n,e)=>{await C(n.status)});const C=async n=>{n===r.IN_PROGRESS?d.value=H.service({target:k.value,text:"\u751F\u6210\u4E2D..."}):d.value&&(d.value.close(),d.value=null)};return Q(async()=>{await C(f.detail.status)}),(n,e)=>{const l=q,O=z,U=D;return i(),c(U,{"body-class":"",class:"!w-80 !h-auto !rounded-10px !relative !flex !flex-col"},{default:o(()=>{var _,b,g,j,S,I,R;return[u("div",W,[u("div",null,[((_=a(s))==null?void 0:_.status)===a(r).IN_PROGRESS?(i(),c(l,{key:0,type:"primary",text:"",bg:""},{default:o(()=>e[4]||(e[4]=[x(" \u751F\u6210\u4E2D ")])),_:1})):((b=a(s))==null?void 0:b.status)===a(r).SUCCESS?(i(),c(l,{key:1,text:"",bg:""},{default:o(()=>e[5]||(e[5]=[x(" \u5DF2\u5B8C\u6210 ")])),_:1})):((g=a(s))==null?void 0:g.status)===a(r).FAIL?(i(),c(l,{key:2,type:"danger",text:"",bg:""},{default:o(()=>e[6]||(e[6]=[x(" \u5F02\u5E38 ")])),_:1})):E("",!0)]),u("div",null,[p(l,{class:"!p-10px !m-0",text:"",icon:a(F),onClick:e[0]||(e[0]=t=>m("download",a(s)))},null,8,["icon"]),p(l,{class:"!p-10px !m-0",text:"",icon:a(L),onClick:e[1]||(e[1]=t=>m("regeneration",a(s)))},null,8,["icon"]),p(l,{class:"!p-10px !m-0",text:"",icon:a(N),onClick:e[2]||(e[2]=t=>m("delete",a(s)))},null,8,["icon"]),p(l,{class:"!p-10px !m-0",text:"",icon:a(P),onClick:e[3]||(e[3]=t=>m("more",a(s)))},null,8,["icon"])])]),u("div",{class:"!overflow-hidden !mt-20px !h-280px !flex-1",ref_key:"cardImageRef",ref:k},[p(O,{class:"!w-full !rounded-10px",src:(j=a(s))==null?void 0:j.picUrl,"preview-src-list":[a(s).picUrl],"preview-teleported":""},null,8,["src","preview-src-list"]),((S=a(s))==null?void 0:S.status)===a(r).FAIL?(i(),h("div",Y,v((I=a(s))==null?void 0:I.errorMessage),1)):E("",!0)],512),u("div",Z,[(i(!0),h(T,null,V((R=a(s))==null?void 0:R.buttons,t=>(i(),c(l,{size:"small",key:t,class:"min-w-40px ml-0 mr-10px mt-5px",onClick:ea=>(async y=>{await M.confirm(`\u786E\u8BA4\u64CD\u4F5C "${y.label} ${y.emoji}" ?`),w("onMjBtnClick",y,f.detail)})(t)},{default:o(()=>[x(v(t.label)+v(t.emoji),1)]),_:2},1032,["onClick"]))),128))])]}),_:1})}}});export{aa as _};
