import{d as z,D as E}from"./index-DzK2S43K.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{_ as N}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as R}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{g as Z,b as H}from"./index-BhatRsUh.js";import{_ as K}from"./StoreStaffTableSelect.vue_vue_type_script_setup_true_lang-B-OOeiO1.js";import{h as Q,i as W,j as L,aj as X,k as Y,f as $,Z as ee,_ as ae,ak as le}from"./form-designer-DHHJWkD5.js";import{l as se,r as d,j as re,ag as ie,m as oe,q as v,I as te,J as a,u as r,h as ue,B as l,C as h,A as c,E as de,G as y}from"./form-create-_84fGzaM.js";const ne=se({__name:"DeliveryPickUpStoreBindForm",setup(fe,{expose:w}){const C=z(),t=d(!1),_=d(""),u=d(!1),s=d({id:void 0,name:"",verifyUserIds:[],verifyUsers:[]}),I=re({}),n=d(),U=d();w({open:async i=>{t.value=!0,_.value="\u7ED1\u5B9A\u81EA\u63D0\u95E8\u5E97\u5458\u5DE5",x(),u.value=!0;try{s.value=await Z(i)}finally{u.value=!1}}});const V=async()=>{if(n&&await n.value.validate()){u.value=!0;try{const i={id:s.value.id,verifyUserIds:s.value.verifyUsers.map(e=>e.id)};await H(i),C.success("\u7ED1\u5B9A\u6210\u529F"),t.value=!1}finally{u.value=!1}}},S=i=>{s.value.verifyUsers=i},x=()=>{var i;s.value={id:void 0,name:"",verifyUserIds:[],verifyUsers:[]},(i=n.value)==null||i.resetFields()};return(i,e)=>{const j=Y,k=X,b=L,g=W,f=$,p=ae,A=R,T=ee,B=N,D=Q,F=G,J=ie("hasPermi"),M=le;return v(),oe(te,null,[a(F,{title:r(_),modelValue:r(t),"onUpdate:modelValue":e[3]||(e[3]=o=>ue(t)?t.value=o:null),width:"20%"},{footer:l(()=>[a(f,{onClick:V,type:"primary",disabled:r(u)},{default:l(()=>e[6]||(e[6]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),a(f,{onClick:e[2]||(e[2]=o=>t.value=!1)},{default:l(()=>e[7]||(e[7]=[y("\u53D6 \u6D88")])),_:1})]),default:l(()=>[h((v(),c(D,{ref_key:"formRef",ref:n,model:r(s),rules:r(I),"label-width":"120px"},{default:l(()=>[a(g,null,{default:l(()=>[a(b,{span:24},{default:l(()=>[a(k,{label:"\u95E8\u5E97\u540D\u79F0",prop:"name"},{default:l(()=>[a(j,{modelValue:r(s).name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(s).name=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u540D\u79F0",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(g,null,{default:l(()=>[a(b,{span:24},{default:l(()=>{var o;return[a(k,{label:"\u95E8\u5E97\u5E97\u5458",prop:"verifyUserIds"},{default:l(()=>[a(f,{type:"primary",onClick:e[1]||(e[1]=m=>r(U).open())},{default:l(()=>e[4]||(e[4]=[y("\u9009\u62E9\u5E97\u5458")])),_:1})]),_:1}),((o=r(s).verifyUsers)==null?void 0:o.length)>0?(v(),c(B,{key:0},{default:l(()=>[a(T,{data:r(s).verifyUsers},{default:l(()=>[a(p,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(p,{label:"\u7528\u6237\u6635\u79F0",align:"center",prop:"nickname","show-overflow-tooltip":!0}),a(p,{label:"\u72B6\u6001",align:"center",key:"status"},{default:l(m=>[a(A,{type:r(E).COMMON_STATUS,value:m.row.status},null,8,["type","value"])]),_:1}),a(p,{align:"center",label:"\u64CD\u4F5C"},{default:l(m=>[h((v(),c(f,{link:"",type:"danger",onClick:pe=>(async O=>{const P=s.value.verifyUsers.findIndex(q=>{if(q.id==O)return!0});s.value.verifyUsers.splice(P,1)})(m.row.id)},{default:l(()=>e[5]||(e[5]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[J,["trade:delivery:pick-up-store:delete"]]])]),_:1})]),_:1},8,["data"])]),_:1})):de("",!0)]}),_:1})]),_:1})]),_:1},8,["model","rules"])),[[M,r(u)]])]),_:1},8,["title","modelValue"]),a(K,{ref_key:"storeStaffTableSelect",ref:U,onChange:S},null,512)],64)}}});export{ne as _};
