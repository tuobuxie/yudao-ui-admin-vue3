import{D as _}from"./index-DzK2S43K.js";import{_ as D}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{D as g}from"./index-BrWsOwLz.js";import{D as h}from"./constants-DGDXM-Iq.js";import{x as E,Q as w}from"./form-designer-DHHJWkD5.js";import{l as S,r as c,b as A,A as m,q as d,u,B as p,m as v,I as T,$ as L,x as o,E as j,H as n,J as k}from"./form-create-_84fGzaM.js";const B={class:"flex items-center justify-between w-full py-4px"},C={class:"flex-1"},N={class:"text-14px font-500 text-[var(--el-text-color-primary)] mb-2px"},q={class:"text-12px text-[var(--el-text-color-secondary)]"},H={key:0,class:"flex items-center gap-4px"},J=S({name:"DeviceSelector",__name:"DeviceSelector",props:{modelValue:{},productId:{}},emits:["update:modelValue","change"],setup(f,{emit:x}){const t=f,s=x,i=c(!1),l=c([]),y=e=>{s("update:modelValue",e),s("change",e)};return A(()=>t.productId,e=>{e?(async()=>{if(t.productId)try{i.value=!0;const r=await g.getDeviceListByProductId(t.productId);l.value=r||[]}catch{l.value=[]}finally{l.value.unshift(h.ALL_DEVICES),i.value=!1}else l.value=[]})():(l.value=[],t.modelValue&&(s("update:modelValue",void 0),s("change",void 0)))},{immediate:!0}),(e,r)=>{const I=D,b=w,V=E;return d(),m(V,{"model-value":e.modelValue,"onUpdate:modelValue":y,placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907",filterable:"",clearable:"",class:"w-full",loading:u(i),disabled:!e.productId},{default:p(()=>[(d(!0),v(T,null,L(u(l),a=>(d(),m(b,{key:a.id,label:a.deviceName,value:a.id},{default:p(()=>[o("div",B,[o("div",C,[o("div",N,n(a.deviceName),1),o("div",q,n(a.deviceKey),1)]),a.id>0?(d(),v("div",H,[k(I,{type:u(_).IOT_DEVICE_STATE,value:a.state},null,8,["type","value"])])):j("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["model-value","loading","disabled"])}}});export{J as _};
