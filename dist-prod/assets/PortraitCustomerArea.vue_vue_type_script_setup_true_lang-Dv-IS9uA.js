import{aM as D}from"./index-D_TWD7wt.js";import{e as b,_ as w}from"./Echart.vue_vue_type_script_setup_true_lang-kflkoiMg.js";import{c as A}from"./china-aeAnb323.js";import{S as N}from"./portrait-BbN1Ktau.js";import{i as P,j,ag as q,ad as R}from"./form-designer-DHHJWkD5.js";import{l as B,r as f,j as g,e as J,A as S,q as k,B as r,J as o,u as m}from"./form-create-_84fGzaM.js";const z=B({name:"PortraitCustomerArea",__name:"PortraitCustomerArea",props:{queryParams:{}},setup(h,{expose:v}){var p;const M=h;(p=b)==null||p.registerMap("china",A);const s=f(!1),n=f([]),i=g({title:{text:"\u5168\u90E8\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),l=g({title:{text:"\u6210\u4EA4\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),u=async()=>{s.value=!0;const t=await N.getCustomerArea(M.queryParams);n.value=t.map(e=>({...e,areaName:D(e.areaName)})),x(),C(),s.value=!1};v({loadData:u});const x=()=>{let t=0,e=0;i.series[0].data=n.value.map(a=>(t=Math.min(t,a.customerCount||0),e=Math.max(e,a.customerCount||0),{...a,name:a.areaName,value:a.customerCount||0})),i.visualMap.min=t,i.visualMap.max=e},C=()=>{let t=0,e=0;l.series[0].data=n.value.map(a=>(t=Math.min(t,a.dealCount||0),e=Math.max(e,a.dealCount||0),{...a,name:a.areaName,value:a.dealCount||0})),l.visualMap.min=t,l.visualMap.max=e};return J(()=>{u()}),(t,e)=>{const a=w,d=q,c=j,_=P,y=R;return k(),S(y,{shadow:"never"},{default:r(()=>[o(_,{gutter:20},{default:r(()=>[o(c,{span:12},{default:r(()=>[o(d,{loading:m(s),animated:""},{default:r(()=>[o(a,{height:500,options:m(i)},null,8,["options"])]),_:1},8,["loading"])]),_:1}),o(c,{span:12},{default:r(()=>[o(d,{loading:m(s),animated:""},{default:r(()=>[o(a,{height:500,options:m(l)},null,8,["options"])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}}});export{z as _};
