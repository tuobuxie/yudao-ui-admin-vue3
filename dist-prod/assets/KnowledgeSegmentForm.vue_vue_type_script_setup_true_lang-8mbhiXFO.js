import{a as q,d as U}from"./index-B2urM1q-.js";import{_ as A}from"./Dialog.vue_vue_type_style_index_0_lang-bMayE4GC.js";import{K as v}from"./index-BUi5Jgs2.js";import{h as B,aj as G,k as J,ak as R,f as z}from"./form-designer-DHHJWkD5.js";import{l as D,r as u,j as E,A as y,q as _,B as n,C as H,u as t,J as r,G as S,h as L}from"./form-create-_84fGzaM.js";const M=D({name:"KnowledgeSegmentForm",__name:"KnowledgeSegmentForm",emits:["success"],setup(N,{expose:K,emit:V}){const{t:m}=q(),p=U(),o=u(!1),f=u(""),s=u(!1),g=u(""),l=u({id:void 0,documentId:void 0,content:void 0}),b=E({content:[{required:!0,message:"\u5207\u7247\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=u();K({open:async(a,e,i)=>{if(o.value=!0,f.value=m("action."+a),g.value=a,x(),l.value.documentId=i,e){s.value=!0;try{l.value=await v.getKnowledgeSegment(e)}finally{s.value=!1}}}});const k=V,h=async()=>{await c.value.validate(),s.value=!0;try{const a=l.value;g.value==="create"?(await v.createKnowledgeSegment(a),p.success(m("common.createSuccess"))):(await v.updateKnowledgeSegment(a),p.success(m("common.updateSuccess"))),o.value=!1,k("success")}finally{s.value=!1}},x=()=>{var a;l.value={id:void 0,documentId:void 0,content:void 0},(a=c.value)==null||a.resetFields()};return(a,e)=>{const i=J,j=G,C=B,w=z,F=A,I=R;return _(),y(F,{title:t(f),modelValue:t(o),"onUpdate:modelValue":e[2]||(e[2]=d=>L(o)?o.value=d:null)},{footer:n(()=>[r(w,{onClick:h,type:"primary",disabled:t(s)},{default:n(()=>e[3]||(e[3]=[S("\u786E \u5B9A")])),_:1},8,["disabled"]),r(w,{onClick:e[1]||(e[1]=d=>o.value=!1)},{default:n(()=>e[4]||(e[4]=[S("\u53D6 \u6D88")])),_:1})]),default:n(()=>[H((_(),y(C,{ref_key:"formRef",ref:c,model:t(l),rules:t(b),"label-width":"100px"},{default:n(()=>[r(j,{label:"\u5207\u7247\u5185\u5BB9",prop:"content"},{default:n(()=>[r(i,{modelValue:t(l).content,"onUpdate:modelValue":e[0]||(e[0]=d=>t(l).content=d),type:"textarea",rows:6,placeholder:"\u8BF7\u8F93\u5165\u5207\u7247\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[I,t(s)]])]),_:1},8,["title","modelValue"])}}});export{M as _};
