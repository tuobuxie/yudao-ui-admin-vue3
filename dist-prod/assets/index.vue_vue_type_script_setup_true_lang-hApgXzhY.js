import{d as K,$ as L}from"./index-D_TWD7wt.js";import{I as P}from"./index-BpJOP-rI.js";import{I as T,M as j,g as $,N as W,h as E,b as D}from"./constants-CHvLs4wt.js";import{a7 as X,k as Z,f as ee,at as le,al as ae,x as te,Q as se}from"./form-designer-DHHJWkD5.js";import{l as oe,r as f,m,q as i,I as h,x as t,J as a,B as s,G as n,h as U,u as r,$ as _,A as R,H as I,D as Y,O as re}from"./form-create-_84fGzaM.js";const de={class:"prompt"},ue={class:"flex flex-col mt-30px"},ie={class:"w-full mt-30px"},ne=["onClick"],pe={class:"text-14px color-#3e3e3e font-bold"},fe={class:"mt-30px"},ce={class:"text-14px color-#3e3e3e font-bold"},me={class:"mt-20px"},xe={class:"mt-30px"},ve={class:"flex justify-center mt-50px"},ye=oe({__name:"index",props:{models:{type:Array,default:()=>[]}},emits:["onDrawStart","onDrawComplete"],setup(A,{expose:B,emit:H}){const J=K(),S=A,M=H,V=f(!1),k=f(""),c=f(""),v=f(),C=f("midjourney"),g=f("1:1"),x=f("6.0"),y=f(E),N=async o=>{C.value=o.key,o.key==="niji"?y.value=W:y.value=E,x.value=y.value[0].value},q=async()=>{const o=S.models.find(e=>e.model===C.value&&e.platform===D.MIDJOURNEY);if(o){await J.confirm("\u786E\u8BA4\u751F\u6210\u5185\u5BB9?");try{V.value=!0,M("onDrawStart",D.MIDJOURNEY);const e=j.find(u=>g.value===u.key),d={prompt:c.value,modelId:o.id,width:e.width,height:e.height,version:x.value,referImageUrl:v.value};await P.midjourneyImagine(d)}finally{M("onDrawComplete",D.MIDJOURNEY),V.value=!1}}else J.error("\u8BE5\u6A21\u578B\u4E0D\u53EF\u7528\uFF0C\u8BF7\u9009\u62E9\u5176\u5B83\u6A21\u578B")};return B({settingValues:async o=>{c.value=o.prompt;const e=j.find(u=>u.key===`${o.width}:${o.height}`);g.value=e.key;const d=$.find(u=>{var p;return u.key===((p=o.options)==null?void 0:p.model)});await N(d),x.value=y.value.find(u=>{var p;return u.value===((p=o.options)==null?void 0:p.version)}).value,v.value=o.options.referImageUrl}}),(o,e)=>{const d=X,u=Z,p=ee,w=le,z=ae,G=se,Q=te,F=L;return i(),m(h,null,[t("div",de,[a(d,{tag:"b"},{default:s(()=>e[3]||(e[3]=[n("\u753B\u9762\u63CF\u8FF0")])),_:1}),a(d,{tag:"p"},{default:s(()=>e[4]||(e[4]=[n("\u5EFA\u8BAE\u4F7F\u7528\u201C\u5F62\u5BB9\u8BCD+\u52A8\u8BCD+\u98CE\u683C\u201D\u7684\u683C\u5F0F\uFF0C\u4F7F\u7528\u201C\uFF0C\u201D\u9694\u5F00.")])),_:1}),a(u,{modelValue:r(c),"onUpdate:modelValue":e[0]||(e[0]=l=>U(c)?c.value=l:null),maxlength:"1024",rows:5,class:"w-100% mt-15px","input-style":"border-radius: 7px;",placeholder:"\u4F8B\u5982\uFF1A\u7AE5\u8BDD\u91CC\u7684\u5C0F\u5C4B\u5E94\u8BE5\u662F\u4EC0\u4E48\u6837\u5B50\uFF1F","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),t("div",ue,[t("div",null,[a(d,{tag:"b"},{default:s(()=>e[5]||(e[5]=[n("\u968F\u673A\u70ED\u8BCD")])),_:1})]),a(w,{wrap:"",class:"flex flex-row flex-wrap justify-start mt-15px"},{default:s(()=>[(i(!0),m(h,null,_(r(T),l=>(i(),R(p,{round:"",class:"m-0",type:r(k)===l?"primary":"default",key:l,onClick:O=>(async b=>{k.value!=b?(k.value=b,c.value=b):k.value=""})(l)},{default:s(()=>[n(I(l),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),t("div",ie,[t("div",null,[a(d,{tag:"b"},{default:s(()=>e[6]||(e[6]=[n("\u5C3A\u5BF8")])),_:1})]),a(w,{wrap:"",class:"flex flex-row justify-between w-full mt-20px"},{default:s(()=>[(i(!0),m(h,null,_(r(j),l=>(i(),m("div",{class:"flex flex-col items-center cursor-pointer",key:l.key,onClick:O=>(async b=>{g.value=b.key})(l)},[t("div",{class:Y(r(g)===l.key?"flex flex-col items-center justify-center rounded-7px p-4px w-50px h-50px bg-white border-1 border-solid border-#1293ff":"flex flex-col items-center justify-center rounded-7px p-4px w-50px h-50px bg-white border-1 border-solid border-white")},[t("div",{style:re(l.style)},null,4)],2),t("div",pe,I(l.key),1)],8,ne))),128))]),_:1})]),t("div",fe,[t("div",null,[a(d,{tag:"b"},{default:s(()=>e[7]||(e[7]=[n("\u6A21\u578B")])),_:1})]),a(w,{wrap:"",class:"mt-15px"},{default:s(()=>[(i(!0),m(h,null,_(r($),l=>(i(),m("div",{class:Y(r(C)===l.key?"flex flex-col items-center w-150px overflow-hidden border-3 border-solid border-#1293ff rounded-5px cursor-pointer":"flex flex-col items-center w-150px overflow-hidden border-3 border-solid border-transparent cursor-pointer"),key:l.key},[a(z,{src:l.image,fit:"contain",onClick:O=>N(l)},null,8,["src","onClick"]),t("div",ce,I(l.name),1)],2))),128))]),_:1})]),t("div",me,[t("div",null,[a(d,{tag:"b"},{default:s(()=>e[8]||(e[8]=[n("\u7248\u672C")])),_:1})]),a(w,{wrap:"",class:"mt-20px w-full"},{default:s(()=>[a(Q,{modelValue:r(x),"onUpdate:modelValue":e[1]||(e[1]=l=>U(x)?x.value=l:null),class:"!w-350px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u7248\u672C"},{default:s(()=>[(i(!0),m(h,null,_(r(y),l=>(i(),R(G,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",xe,[t("div",null,[a(d,{tag:"b"},{default:s(()=>e[9]||(e[9]=[n("\u53C2\u8003\u56FE")])),_:1})]),a(w,{wrap:"",class:"mt-15px"},{default:s(()=>[a(F,{modelValue:r(v),"onUpdate:modelValue":e[2]||(e[2]=l=>U(v)?v.value=l:null),height:"120px",width:"120px"},null,8,["modelValue"])]),_:1})]),t("div",ve,[a(p,{type:"primary",size:"large",round:"",disabled:r(c).length===0,onClick:q},{default:s(()=>[n(I(r(V)?"\u751F\u6210\u4E2D":"\u751F\u6210\u5185\u5BB9"),1)]),_:1},8,["disabled"])])],64)}}});export{ye as _};
