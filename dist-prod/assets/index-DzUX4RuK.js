import{d as E,a as H,h as L,D as O,_ as W}from"./index-DzK2S43K.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{_ as Y}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as ee}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{l as ae,r as u,j as le,e as te,ag as se,m as j,q as p,J as a,B as s,u as l,Z as q,I as z,$ as oe,A as c,C as f,G as d}from"./form-create-_84fGzaM.js";import{d as ne}from"./formatTime-BGPGB_ys.js";import{d as re}from"./download-oWiM5xVU.js";import{b as pe,d as ie,e as ue,f as ce}from"./index-CZkwXQBo.js";import{_ as de}from"./PostForm.vue_vue_type_script_setup_true_lang-sNX4TiXK.js";import{h as me,aj as fe,k as ye,x as _e,Q as ge,f as be,Z as we,_ as ve,ak as ke}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./constants-C3gLHYOK.js";const xe=ae({name:"SystemPost",__name:"index",setup(he){const y=E(),{t:h}=H(),k=u(!0),C=u(0),S=u([]),o=le({pageNo:1,pageSize:10,code:"",name:"",status:void 0}),V=u(),x=u(!1),m=async()=>{k.value=!0;try{const n=await pe(o);S.value=n.list,C.value=n.total}finally{k.value=!1}},b=()=>{o.pageNo=1,m()},A=()=>{V.value.resetFields(),b()},N=u(),U=(n,e)=>{N.value.open(n,e)},w=u([]),P=n=>{w.value=n.map(e=>e.id)},F=async()=>{try{await y.delConfirm(),await ue(w.value),w.value=[],y.success(h("common.delSuccess")),await m()}catch{}},K=async()=>{try{await y.exportConfirm(),x.value=!0;const n=await ce(o);re.excel(n,"\u5C97\u4F4D\u5217\u8868.xls")}catch{}finally{x.value=!1}};return te(()=>{m()}),(n,e)=>{const T=ye,v=fe,R=ge,Z=_e,_=W,i=be,B=me,M=ee,r=ve,D=Y,G=we,I=X,g=se("hasPermi"),J=ke;return p(),j(z,null,[a(M,null,{default:s(()=>[a(B,{class:"-mb-15px",model:l(o),ref_key:"queryFormRef",ref:V,inline:!0,"label-width":"68px"},{default:s(()=>[a(v,{label:"\u5C97\u4F4D\u540D\u79F0",prop:"name"},{default:s(()=>[a(T,{modelValue:l(o).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(o).name=t),placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u540D\u79F0",clearable:"",class:"!w-240px",onKeyup:q(b,["enter"])},null,8,["modelValue"])]),_:1}),a(v,{label:"\u5C97\u4F4D\u7F16\u7801",prop:"code"},{default:s(()=>[a(T,{modelValue:l(o).code,"onUpdate:modelValue":e[1]||(e[1]=t=>l(o).code=t),placeholder:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u7F16\u7801",clearable:"",class:"!w-240px",onKeyup:q(b,["enter"])},null,8,["modelValue"])]),_:1}),a(v,{label:"\u72B6\u6001",prop:"status"},{default:s(()=>[a(Z,{modelValue:l(o).status,"onUpdate:modelValue":e[2]||(e[2]=t=>l(o).status=t),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"!w-240px"},{default:s(()=>[(p(!0),j(z,null,oe(l(L)(l(O).COMMON_STATUS),t=>(p(),c(R,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,null,{default:s(()=>[a(i,{onClick:b},{default:s(()=>[a(_,{icon:"ep:search",class:"mr-5px"}),e[6]||(e[6]=d(" \u641C\u7D22"))]),_:1}),a(i,{onClick:A},{default:s(()=>[a(_,{icon:"ep:refresh",class:"mr-5px"}),e[7]||(e[7]=d(" \u91CD\u7F6E"))]),_:1}),f((p(),c(i,{type:"primary",plain:"",onClick:e[3]||(e[3]=t=>U("create"))},{default:s(()=>[a(_,{icon:"ep:plus",class:"mr-5px"}),e[8]||(e[8]=d(" \u65B0\u589E "))]),_:1})),[[g,["system:post:create"]]]),f((p(),c(i,{type:"success",plain:"",onClick:K,loading:l(x)},{default:s(()=>[a(_,{icon:"ep:download",class:"mr-5px"}),e[9]||(e[9]=d(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[g,["system:post:export"]]]),f((p(),c(i,{type:"danger",plain:"",disabled:l(w).length===0,onClick:F},{default:s(()=>[a(_,{icon:"ep:delete",class:"mr-5px"}),e[10]||(e[10]=d(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[g,["system:post:delete"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(M,null,{default:s(()=>[f((p(),c(G,{data:l(S),onSelectionChange:P},{default:s(()=>[a(r,{type:"selection",width:"55"}),a(r,{label:"\u5C97\u4F4D\u7F16\u53F7",align:"center",prop:"id"}),a(r,{label:"\u5C97\u4F4D\u540D\u79F0",align:"center",prop:"name"}),a(r,{label:"\u5C97\u4F4D\u7F16\u7801",align:"center",prop:"code"}),a(r,{label:"\u5C97\u4F4D\u987A\u5E8F",align:"center",prop:"sort"}),a(r,{label:"\u5C97\u4F4D\u5907\u6CE8",align:"center",prop:"remark"}),a(r,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:s(t=>[a(D,{type:l(O).COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),a(r,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:l(ne)},null,8,["formatter"]),a(r,{label:"\u64CD\u4F5C",align:"center"},{default:s(t=>[f((p(),c(i,{link:"",type:"primary",onClick:Q=>U("update",t.row.id)},{default:s(()=>e[11]||(e[11]=[d(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[g,["system:post:update"]]]),f((p(),c(i,{link:"",type:"danger",onClick:Q=>(async $=>{try{await y.delConfirm(),await ie($),y.success(h("common.delSuccess")),await m()}catch{}})(t.row.id)},{default:s(()=>e[12]||(e[12]=[d(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[g,["system:post:delete"]]])]),_:1})]),_:1},8,["data"])),[[J,l(k)]]),a(I,{total:l(C),page:l(o).pageNo,"onUpdate:page":e[4]||(e[4]=t=>l(o).pageNo=t),limit:l(o).pageSize,"onUpdate:limit":e[5]||(e[5]=t=>l(o).pageSize=t),onPagination:m},null,8,["total","page","limit"])]),_:1}),a(de,{ref_key:"formRef",ref:N,onSuccess:m},null,512)],64)}}});export{xe as default};
