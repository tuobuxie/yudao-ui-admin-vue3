import{X as m,a as N,d as Q,a4 as B,D}from"./index-DmQdxAiK.js";import{_ as J}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{h as L,aj as O,k as T,x as X,Q as $,l as z,s as H,u as M,ak as W,f as Y}from"./form-designer-DHHJWkD5.js";import{l as Z,r as y,j as ee,A as d,q as u,B as r,C as le,u as e,J as s,E as c,m as ae,I as oe,$ as re,G as f,h as se}from"./form-create-_84fGzaM.js";const ue=n=>m.get({url:"/infra/file-config/page",params:n}),te=n=>m.put({url:"/infra/file-config/update-master?id="+n}),de=n=>m.delete({url:"/infra/file-config/delete?id="+n}),ie=n=>m.delete({url:"/infra/file-config/delete-list",params:{ids:n.join(",")}}),ce=n=>m.get({url:"/infra/file-config/test?id="+n}),ne=Z({name:"InfraFileConfigForm",__name:"FileConfigForm",emits:["success"],setup(n,{expose:S,emit:A}){const{t:_}=N(),v=Q(),p=y(!1),U=y(""),b=y(!1),q=y(""),a=y({id:void 0,name:"",storage:0,remark:"",config:{}}),w=ee({name:[{required:!0,message:"\u914D\u7F6E\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],storage:[{required:!0,message:"\u5B58\u50A8\u5668\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],config:{basePath:[{required:!0,message:"\u57FA\u7840\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],host:[{required:!0,message:"\u4E3B\u673A\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],port:[{required:!0,message:"\u4E3B\u673A\u7AEF\u53E3\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],username:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],mode:[{required:!0,message:"\u8FDE\u63A5\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],endpoint:[{required:!0,message:"\u8282\u70B9\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],bucket:[{required:!0,message:"\u5B58\u50A8 bucket \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessKey:[{required:!0,message:"accessKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessSecret:[{required:!0,message:"accessSecret \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],enablePathStyleAccess:[{required:!0,message:"\u662F\u5426 PathStyle \u8BBF\u95EE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],enablePublicAccess:[{required:!0,message:"\u516C\u5F00\u8BBF\u95EE\u8BBE\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],domain:[{required:!0,message:"\u81EA\u5B9A\u4E49\u57DF\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),k=y();S({open:async(g,l)=>{if(p.value=!0,U.value=_("action."+g),q.value=g,I(),l){b.value=!0;try{a.value=await(i=>m.get({url:"/infra/file-config/get?id="+i}))(l)}finally{b.value=!1}}}});const F=A,C=async()=>{if(k&&await k.value.validate()){b.value=!0;try{const g=a.value;q.value==="create"?(await(l=>m.post({url:"/infra/file-config/create",data:l}))(g),v.success(_("common.createSuccess"))):(await(l=>m.put({url:"/infra/file-config/update",data:l}))(g),v.success(_("common.updateSuccess"))),p.value=!1,F("success")}finally{b.value=!1}}},I=()=>{var g;a.value={id:void 0,name:"",storage:void 0,remark:"",config:{}},(g=k.value)==null||g.resetFields()};return(g,l)=>{const i=T,t=O,K=$,x=X,E=z,V=M,h=H,R=L,P=Y,j=J,G=W;return u(),d(j,{modelValue:e(p),"onUpdate:modelValue":l[18]||(l[18]=o=>se(p)?p.value=o:null),title:e(U)},{footer:r(()=>[s(P,{disabled:e(b),type:"primary",onClick:C},{default:r(()=>l[25]||(l[25]=[f("\u786E \u5B9A")])),_:1},8,["disabled"]),s(P,{onClick:l[17]||(l[17]=o=>p.value=!1)},{default:r(()=>l[26]||(l[26]=[f("\u53D6 \u6D88")])),_:1})]),default:r(()=>[le((u(),d(R,{ref_key:"formRef",ref:k,model:e(a),rules:e(w),"label-width":"130px"},{default:r(()=>[s(t,{label:"\u914D\u7F6E\u540D",prop:"name"},{default:r(()=>[s(i,{modelValue:e(a).name,"onUpdate:modelValue":l[0]||(l[0]=o=>e(a).name=o),placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D"},null,8,["modelValue"])]),_:1}),s(t,{label:"\u5907\u6CE8",prop:"remark"},{default:r(()=>[s(i,{modelValue:e(a).remark,"onUpdate:modelValue":l[1]||(l[1]=o=>e(a).remark=o),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),s(t,{label:"\u5B58\u50A8\u5668",prop:"storage"},{default:r(()=>[s(x,{modelValue:e(a).storage,"onUpdate:modelValue":l[2]||(l[2]=o=>e(a).storage=o),disabled:e(a).id!==void 0,placeholder:"\u8BF7\u9009\u62E9\u5B58\u50A8\u5668"},{default:r(()=>[(u(!0),ae(oe,null,re(e(B)(e(D).INFRA_FILE_STORAGE),o=>(u(),d(K,{key:o.value,label:o.label,value:parseInt(o.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e(a).storage>=10&&e(a).storage<=12?(u(),d(t,{key:0,label:"\u57FA\u7840\u8DEF\u5F84",prop:"config.basePath"},{default:r(()=>[s(i,{modelValue:e(a).config.basePath,"onUpdate:modelValue":l[3]||(l[3]=o=>e(a).config.basePath=o),placeholder:"\u8BF7\u8F93\u5165\u57FA\u7840\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage>=11&&e(a).storage<=12?(u(),d(t,{key:1,label:"\u4E3B\u673A\u5730\u5740",prop:"config.host"},{default:r(()=>[s(i,{modelValue:e(a).config.host,"onUpdate:modelValue":l[4]||(l[4]=o=>e(a).config.host=o),placeholder:"\u8BF7\u8F93\u5165\u4E3B\u673A\u5730\u5740"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage>=11&&e(a).storage<=12?(u(),d(t,{key:2,label:"\u4E3B\u673A\u7AEF\u53E3",prop:"config.port"},{default:r(()=>[s(E,{modelValue:e(a).config.port,"onUpdate:modelValue":l[5]||(l[5]=o=>e(a).config.port=o),min:0,placeholder:"\u8BF7\u8F93\u5165\u4E3B\u673A\u7AEF\u53E3"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage>=11&&e(a).storage<=12?(u(),d(t,{key:3,label:"\u7528\u6237\u540D",prop:"config.username"},{default:r(()=>[s(i,{modelValue:e(a).config.username,"onUpdate:modelValue":l[6]||(l[6]=o=>e(a).config.username=o),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage>=11&&e(a).storage<=12?(u(),d(t,{key:4,label:"\u5BC6\u7801",prop:"config.password"},{default:r(()=>[s(i,{modelValue:e(a).config.password,"onUpdate:modelValue":l[7]||(l[7]=o=>e(a).config.password=o),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage===11?(u(),d(t,{key:5,label:"\u8FDE\u63A5\u6A21\u5F0F",prop:"config.mode"},{default:r(()=>[s(h,{modelValue:e(a).config.mode,"onUpdate:modelValue":l[8]||(l[8]=o=>e(a).config.mode=o)},{default:r(()=>[s(V,{key:"Active",value:"Active"},{default:r(()=>l[19]||(l[19]=[f("\u4E3B\u52A8\u6A21\u5F0F")])),_:1}),s(V,{key:"Passive",value:"Passive"},{default:r(()=>l[20]||(l[20]=[f("\u88AB\u52A8\u6A21\u5F0F")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),e(a).storage===20?(u(),d(t,{key:6,label:"\u8282\u70B9\u5730\u5740",prop:"config.endpoint"},{default:r(()=>[s(i,{modelValue:e(a).config.endpoint,"onUpdate:modelValue":l[9]||(l[9]=o=>e(a).config.endpoint=o),placeholder:"\u8BF7\u8F93\u5165\u8282\u70B9\u5730\u5740"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage===20?(u(),d(t,{key:7,label:"\u5B58\u50A8 bucket",prop:"config.bucket"},{default:r(()=>[s(i,{modelValue:e(a).config.bucket,"onUpdate:modelValue":l[10]||(l[10]=o=>e(a).config.bucket=o),placeholder:"\u8BF7\u8F93\u5165 bucket"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage===20?(u(),d(t,{key:8,label:"accessKey",prop:"config.accessKey"},{default:r(()=>[s(i,{modelValue:e(a).config.accessKey,"onUpdate:modelValue":l[11]||(l[11]=o=>e(a).config.accessKey=o),placeholder:"\u8BF7\u8F93\u5165 accessKey"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage===20?(u(),d(t,{key:9,label:"accessSecret",prop:"config.accessSecret"},{default:r(()=>[s(i,{modelValue:e(a).config.accessSecret,"onUpdate:modelValue":l[12]||(l[12]=o=>e(a).config.accessSecret=o),placeholder:"\u8BF7\u8F93\u5165 accessSecret"},null,8,["modelValue"])]),_:1})):c("",!0),e(a).storage===20?(u(),d(t,{key:10,label:"\u662F\u5426 Path Style",prop:"config.enablePathStyleAccess"},{default:r(()=>[s(h,{modelValue:e(a).config.enablePathStyleAccess,"onUpdate:modelValue":l[13]||(l[13]=o=>e(a).config.enablePathStyleAccess=o)},{default:r(()=>[s(V,{key:"true",value:!0},{default:r(()=>l[21]||(l[21]=[f("\u542F\u7528")])),_:1}),s(V,{key:"false",value:!1},{default:r(()=>l[22]||(l[22]=[f("\u7981\u7528")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),e(a).storage===20?(u(),d(t,{key:11,label:"\u516C\u5F00\u8BBF\u95EE",prop:"config.enablePublicAccess"},{default:r(()=>[s(h,{modelValue:e(a).config.enablePublicAccess,"onUpdate:modelValue":l[14]||(l[14]=o=>e(a).config.enablePublicAccess=o)},{default:r(()=>[s(V,{key:"true",value:!0},{default:r(()=>l[23]||(l[23]=[f("\u516C\u5F00")])),_:1}),s(V,{key:"false",value:!1},{default:r(()=>l[24]||(l[24]=[f("\u79C1\u6709")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),e(a).storage===20?(u(),d(t,{key:12,label:"\u81EA\u5B9A\u4E49\u57DF\u540D"},{default:r(()=>[s(i,{modelValue:e(a).config.domain,"onUpdate:modelValue":l[15]||(l[15]=o=>e(a).config.domain=o),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u57DF\u540D"},null,8,["modelValue"])]),_:1})):e(a).storage?(u(),d(t,{key:13,label:"\u81EA\u5B9A\u4E49\u57DF\u540D",prop:"config.domain"},{default:r(()=>[s(i,{modelValue:e(a).config.domain,"onUpdate:modelValue":l[16]||(l[16]=o=>e(a).config.domain=o),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u57DF\u540D"},null,8,["modelValue"])]),_:1})):c("",!0)]),_:1},8,["model","rules"])),[[G,e(b)]])]),_:1},8,["modelValue","title"])}}});export{ne as _,ie as a,de as d,ue as g,ce as t,te as u};
