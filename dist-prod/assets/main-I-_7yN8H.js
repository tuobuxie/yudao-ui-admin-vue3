import{X as I,_ as G,c as H}from"./index-DmQdxAiK.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-OyXbUoED.js";import K from"./main-CJVSjYz7.js";import X from"./main-Ddqx4-1N.js";import{_ as Z}from"./main.vue_vue_type_script_setup_true_lang-DeOxeHzY.js";import{g as $}from"./index-CHHBmOkg.js";import{g as L}from"./index-CebrFt1o.js";import{d as T}from"./formatTime-BGPGB_ys.js";import{i as Q,f as R,ak as V,Z as Y,_ as aa}from"./form-designer-DHHJWkD5.js";import{l as ea,r as C,j as la,e as ta,m as c,q as o,E,C as h,J as l,I as j,$ as D,x as M,H as ia,B as d,G as S,u as e,A as O}from"./form-create-_84fGzaM.js";var U=(n=>(n.Draft="2",n.Published="1",n))(U||{});const W=n=>I.get({url:"/mp/draft/page",params:n}),oa=(n,u)=>I.post({url:"/mp/draft/create?accountId="+n,data:{articles:u}}),na=(n,u,p)=>I.put({url:"/mp/draft/update?accountId="+n+"&mediaId="+u,method:"put",data:p}),ra=(n,u)=>I.delete({url:"/mp/draft/delete?accountId="+n+"&mediaId="+u}),pa={class:"pb-30px"},sa={key:0},ca={class:"waterfall"},da=["src"],ma={class:"item-name"},ua={key:1},ga={key:2},fa={key:3},ya={class:"waterfall"},wa={key:0},q=H(ea({name:"WxMaterialSelect",__name:"main",props:{type:{},accountId:{},newsType:{default:U.Published}},emits:["select-material"],setup(n,{emit:u}){const p=n,A=u,y=C(!1),g=C(0),f=C([]),i=la({pageNo:1,pageSize:10,accountId:p.accountId}),w=r=>{A("select-material",r)},N=async()=>{y.value=!0;try{p.type==="news"&&p.newsType===U.Published?await B():p.type==="news"&&p.newsType===U.Draft?await F():await _()}finally{y.value=!1}},_=async()=>{const r=await $({...i,type:p.type});f.value=r.list,g.value=r.total},B=async()=>{const r=await L(i);r.list.forEach(t=>{t.content.newsItem.forEach(m=>{m.picUrl=m.thumbUrl})}),f.value=r.list,g.value=r.total},F=async()=>{const r=await W(i);r.list.forEach(t=>{t.content.newsItem.forEach(m=>{m.picUrl=m.thumbUrl})}),f.value=r.list,g.value=r.total};return ta(async()=>{N()}),(r,t)=>{const m=G,v=R,P=Q,b=J,s=aa,x=Y,k=V;return o(),c("div",pa,[p.type==="image"?(o(),c("div",sa,[h((o(),c("div",ca,[(o(!0),c(j,null,D(e(f),a=>(o(),c("div",{class:"waterfall-item",key:a.mediaId},[M("img",{class:"material-img",src:a.url},null,8,da),M("p",ma,ia(a.name),1),l(P,{class:"ope-row"},{default:d(()=>[l(v,{type:"success",onClick:z=>w(a)},{default:d(()=>[t[8]||(t[8]=S(" \u9009\u62E9 ")),l(m,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[0]||(t[0]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[1]||(t[1]=a=>e(i).pageSize=a),onPagination:_},null,8,["total","page","limit"])])):p.type==="voice"?(o(),c("div",ua,[h((o(),O(x,{data:e(f)},{default:d(()=>[l(s,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),l(s,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),l(s,{label:"\u8BED\u97F3",align:"center"},{default:d(a=>[l(e(X),{url:a.row.url},null,8,["url"])]),_:1}),l(s,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e(T)},null,8,["formatter"]),l(s,{label:"\u64CD\u4F5C",align:"center",fixed:"right"},{default:d(a=>[l(v,{type:"primary",link:"",onClick:z=>w(a.row)},{default:d(()=>[t[9]||(t[9]=S("\u9009\u62E9 ")),l(m,{icon:"ep:plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[2]||(t[2]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[3]||(t[3]=a=>e(i).pageSize=a),onPagination:N},null,8,["total","page","limit"])])):p.type==="video"?(o(),c("div",ga,[h((o(),O(x,{data:e(f)},{default:d(()=>[l(s,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),l(s,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),l(s,{label:"\u6807\u9898",align:"center",prop:"title"}),l(s,{label:"\u4ECB\u7ECD",align:"center",prop:"introduction"}),l(s,{label:"\u89C6\u9891",align:"center"},{default:d(a=>[l(e(Z),{url:a.row.url},null,8,["url"])]),_:1}),l(s,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e(T)},null,8,["formatter"]),l(s,{label:"\u64CD\u4F5C",align:"center",fixed:"right","class-name":"small-padding fixed-width"},{default:d(a=>[l(v,{type:"primary",link:"",onClick:z=>w(a.row)},{default:d(()=>[t[10]||(t[10]=S("\u9009\u62E9 ")),l(m,{icon:"akar-icons:circle-plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[4]||(t[4]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[5]||(t[5]=a=>e(i).pageSize=a),onPagination:_},null,8,["total","page","limit"])])):p.type==="news"?(o(),c("div",fa,[h((o(),c("div",ya,[(o(!0),c(j,null,D(e(f),a=>(o(),c("div",{class:"waterfall-item",key:a.mediaId},[a.content&&a.content.newsItem?(o(),c("div",wa,[l(e(K),{articles:a.content.newsItem},null,8,["articles"]),l(P,{class:"ope-row"},{default:d(()=>[l(v,{type:"success",onClick:z=>w(a)},{default:d(()=>[t[11]||(t[11]=S(" \u9009\u62E9 ")),l(m,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)])):E("",!0)]))),128))])),[[k,e(y)]]),l(b,{total:e(g),page:e(i).pageNo,"onUpdate:page":t[6]||(t[6]=a=>e(i).pageNo=a),limit:e(i).pageSize,"onUpdate:limit":t[7]||(t[7]=a=>e(i).pageSize=a),onPagination:_},null,8,["total","page","limit"])])):E("",!0)])}}}),[["__scopeId","data-v-3322aeea"]]),_a=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{q as W,oa as c,ra as d,W as g,_a as m,na as u};
