import{d as N}from"./index-DmQdxAiK.js";import{I as Q}from"./index-B2QA-MrL.js";import{I as T,O as Y,b as $}from"./constants-CHvLs4wt.js";import{a7 as E,k as K,f as L,at as F,x as M,Q as P}from"./form-designer-DHHJWkD5.js";import{l as R,r as o,b as W,m as h,q as n,I as b,x as s,J as e,B as t,G as p,h as x,u,$ as C,A as I,H as G}from"./form-create-_84fGzaM.js";const X={class:"prompt"},Z={class:"flex flex-col mt-30px"},ll={class:"mt-30px"},al={class:"mt-30px"},el={class:"mt-30px"},tl={class:"flex justify-center mt-50px"},ul=R({__name:"index",props:{models:{type:Array,default:()=>[]}},emits:["onDrawStart","onDrawComplete"],setup(O,{expose:q,emit:B}){const H=N(),U=O,D=B,w=o(!1),y=o(""),r=o(""),f=o(512),c=o(512),m=o($.TONG_YI),g=o([]),i=o(),J=async()=>{await H.confirm("\u786E\u8BA4\u751F\u6210\u5185\u5BB9?");try{w.value=!0,D("onDrawStart",m.value);const d={platform:m.value,modelId:i.value,prompt:r.value,width:f.value,height:c.value,options:{}};await Q.drawImage(d)}finally{D("onDrawComplete",m.value),w.value=!1}},S=async d=>{g.value=U.models.filter(l=>l.platform===d),g.value.length>0?i.value=g.value[0].id:i.value=void 0};return W(()=>U.models,()=>{S(m.value)},{immediate:!0,deep:!0}),q({settingValues:async d=>{r.value=d.prompt,f.value=d.width,c.value=d.height}}),(d,l)=>{const v=E,V=K,z=L,_=F,A=P,j=M;return n(),h(b,null,[s("div",X,[e(v,{tag:"b"},{default:t(()=>l[5]||(l[5]=[p("\u753B\u9762\u63CF\u8FF0")])),_:1}),e(v,{tag:"p"},{default:t(()=>l[6]||(l[6]=[p("\u5EFA\u8BAE\u4F7F\u7528\u201C\u5F62\u5BB9\u8BCD + \u52A8\u8BCD + \u98CE\u683C\u201D\u7684\u683C\u5F0F\uFF0C\u4F7F\u7528\u201C\uFF0C\u201D\u9694\u5F00")])),_:1}),e(V,{modelValue:u(r),"onUpdate:modelValue":l[0]||(l[0]=a=>x(r)?r.value=a:null),maxlength:"1024",rows:5,class:"w-100% mt-15px","input-style":"border-radius: 7px;",placeholder:"\u4F8B\u5982\uFF1A\u7AE5\u8BDD\u91CC\u7684\u5C0F\u5C4B\u5E94\u8BE5\u662F\u4EC0\u4E48\u6837\u5B50\uFF1F","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),s("div",Z,[s("div",null,[e(v,{tag:"b"},{default:t(()=>l[7]||(l[7]=[p("\u968F\u673A\u70ED\u8BCD")])),_:1})]),e(_,{wrap:"",class:"flex flex-row flex-wrap justify-start mt-15px"},{default:t(()=>[(n(!0),h(b,null,C(u(T),a=>(n(),I(z,{round:"",class:"m-0",type:u(y)===a?"primary":"default",key:a,onClick:sl=>(async k=>{y.value!=k?(y.value=k,r.value=k):y.value=""})(a)},{default:t(()=>[p(G(a),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),s("div",ll,[s("div",null,[e(v,{tag:"b"},{default:t(()=>l[8]||(l[8]=[p("\u5E73\u53F0")])),_:1})]),e(_,{wrap:"",class:"mt-15px w-full"},{default:t(()=>[e(j,{modelValue:u(m),"onUpdate:modelValue":l[1]||(l[1]=a=>x(m)?m.value=a:null),placeholder:"Select",size:"large",class:"!w-350px",onChange:S},{default:t(()=>[(n(!0),h(b,null,C(u(Y),a=>(n(),I(A,{key:a.key,label:a.name,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),s("div",al,[s("div",null,[e(v,{tag:"b"},{default:t(()=>l[9]||(l[9]=[p("\u6A21\u578B")])),_:1})]),e(_,{wrap:"",class:"mt-15px w-full"},{default:t(()=>[e(j,{modelValue:u(i),"onUpdate:modelValue":l[2]||(l[2]=a=>x(i)?i.value=a:null),placeholder:"Select",size:"large",class:"!w-350px"},{default:t(()=>[(n(!0),h(b,null,C(u(g),a=>(n(),I(A,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),s("div",el,[s("div",null,[e(v,{tag:"b"},{default:t(()=>l[10]||(l[10]=[p("\u56FE\u7247\u5C3A\u5BF8")])),_:1})]),e(_,{wrap:"",class:"mt-15px w-full"},{default:t(()=>[e(V,{modelValue:u(f),"onUpdate:modelValue":l[3]||(l[3]=a=>x(f)?f.value=a:null),type:"number",class:"w-170px",placeholder:"\u56FE\u7247\u5BBD\u5EA6"},null,8,["modelValue"]),e(V,{modelValue:u(c),"onUpdate:modelValue":l[4]||(l[4]=a=>x(c)?c.value=a:null),type:"number",class:"w-170px",placeholder:"\u56FE\u7247\u9AD8\u5EA6"},null,8,["modelValue"])]),_:1})]),s("div",tl,[e(z,{type:"primary",size:"large",round:"",loading:u(w),disabled:u(r).length===0,onClick:J},{default:t(()=>[p(G(u(w)?"\u751F\u6210\u4E2D":"\u751F\u6210\u5185\u5BB9"),1)]),_:1},8,["loading","disabled"])])],64)}}});export{ul as _};
