import{aE as z,_ as A}from"./index-B2urM1q-.js";import{_ as G}from"./DeviceTriggerConfig.vue_vue_type_script_setup_true_lang-CqMMQI0Q.js";import{C as R}from"./Crontab-BL42GI8d.js";import{r as S,o as T,p as y}from"./constants-D46CCSyK.js";import{ad as q,a6 as B,f as D,aj as M,aU as $}from"./form-designer-DHHJWkD5.js";import{l as H,e as J,A as b,q as i,B as p,x as e,m as v,u as d,I as N,$ as O,J as o,H as g,G as m,E as k}from"./form-create-_84fGzaM.js";const P={class:"flex items-center justify-between"},F={class:"flex items-center gap-8px"},Q={class:"p-16px space-y-24px"},K={key:0,class:"space-y-24px"},L={class:"flex items-center justify-between p-16px bg-gradient-to-r from-green-50 to-emerald-50 border-b border-green-200 rounded-t-6px"},W={class:"flex items-center gap-12px"},X={class:"flex items-center gap-8px text-16px font-600 text-green-700"},Y={class:"w-24px h-24px bg-green-500 text-white rounded-full flex items-center justify-center text-12px font-bold"},Z={class:"flex items-center gap-8px"},ee={class:"p-16px space-y-16px"},re={key:1,class:"flex flex-col gap-16px"},te={class:"flex items-center gap-8px p-12px px-16px bg-[var(--el-fill-color-light)] rounded-6px border border-[var(--el-border-color-lighter)]"},ae={class:"p-16px border border-[var(--el-border-color-lighter)] rounded-6px bg-[var(--el-fill-color-blank)]"},oe={key:1,class:"py-40px text-center"},se=H({name:"TriggerSection",__name:"TriggerSection",props:{triggers:{}},emits:["update:triggers"],setup(w,{emit:C}){const r=z(w,"triggers",C),h=()=>{const u={type:y.DEVICE_STATE_UPDATE,productId:void 0,deviceId:void 0,identifier:void 0,operator:void 0,value:void 0,cronExpression:void 0,conditionGroups:[]};r.value.push(u)},I=(u,a)=>{const t=r.value[u];t.productId=void 0,t.deviceId=void 0,t.identifier=void 0,t.operator=void 0,t.value=void 0,t.cronExpression=void 0,t.conditionGroups=[]};return J(()=>{r.value.length===0&&h()}),(u,a)=>{const t=A,_=B,E=D,U=M,V=$,j=q;return i(),b(j,{class:"border border-[var(--el-border-color-light)] rounded-8px mb-10px",shadow:"never"},{header:p(()=>[e("div",P,[e("div",F,[o(t,{icon:"ep:lightning",class:"text-[var(--el-color-primary)] text-18px"}),a[0]||(a[0]=e("span",{class:"text-16px font-600 text-[var(--el-text-color-primary)]"},"\u89E6\u53D1\u5668\u914D\u7F6E",-1)),o(_,{size:"small",type:"info"},{default:p(()=>[m(g(d(r).length)+" \u4E2A\u89E6\u53D1\u5668",1)]),_:1})]),o(E,{type:"primary",size:"small",onClick:h},{default:p(()=>[o(t,{icon:"ep:plus"}),a[1]||(a[1]=m(" \u6DFB\u52A0\u89E6\u53D1\u5668 "))]),_:1})])]),default:p(()=>[e("div",Q,[d(r).length>0?(i(),v("div",K,[(i(!0),v(N,null,O(d(r),(n,s)=>{return i(),v("div",{key:`trigger-${s}`,class:"border-2 border-green-200 rounded-8px bg-green-50 shadow-sm hover:shadow-md transition-shadow"},[e("div",L,[e("div",W,[e("div",X,[e("div",Y,g(s+1),1),e("span",null,"\u89E6\u53D1\u5668 "+g(s+1),1)]),o(_,{size:"small",type:(f=n.type,f===y.TIMER?"warning":T(f)?"success":"info"),class:"font-500"},{default:p(()=>[m(g(d(S)(n.type)),1)]),_:2},1032,["type"])]),e("div",Z,[d(r).length>1?(i(),b(E,{key:0,type:"danger",size:"small",text:"",onClick:c=>(l=>{r.value.length>1&&r.value.splice(l,1)})(s),class:"hover:bg-red-50"},{default:p(()=>[o(t,{icon:"ep:delete"}),a[2]||(a[2]=m(" \u5220\u9664 "))]),_:2},1032,["onClick"])):k("",!0)])]),e("div",ee,[d(T)(n.type)?(i(),b(G,{key:0,"model-value":n,index:s,"onUpdate:modelValue":c=>((l,x)=>{r.value[l]=x})(s,c),onTriggerTypeChange:c=>((l,x)=>{r.value[l].type=x,I(l)})(s,c)},null,8,["model-value","index","onUpdate:modelValue","onTriggerTypeChange"])):n.type===d(y).TIMER?(i(),v("div",re,[e("div",te,[o(t,{icon:"ep:timer",class:"text-[var(--el-color-danger)] text-18px"}),a[3]||(a[3]=e("span",{class:"text-14px font-500 text-[var(--el-text-color-primary)]"},"\u5B9A\u65F6\u89E6\u53D1\u914D\u7F6E",-1))]),e("div",ae,[o(U,{label:"CRON\u8868\u8FBE\u5F0F",required:""},{default:p(()=>[o(d(R),{"model-value":n.cronExpression||"0 0 12 * * ?","onUpdate:modelValue":c=>((l,x)=>{r.value[l].cronExpression=x})(s,c)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)])])):k("",!0)])]);var f}),128))])):(i(),v("div",oe,[o(V,{description:"\u6682\u65E0\u89E6\u53D1\u5668"},{description:p(()=>a[4]||(a[4]=[e("div",{class:"space-y-8px"},[e("p",{class:"text-[var(--el-text-color-secondary)]"},"\u6682\u65E0\u89E6\u53D1\u5668\u914D\u7F6E"),e("p",{class:"text-12px text-[var(--el-text-color-placeholder)]"},' \u8BF7\u4F7F\u7528\u4E0A\u65B9\u7684"\u6DFB\u52A0\u89E6\u53D1\u5668"\u6309\u94AE\u6765\u8BBE\u7F6E\u89E6\u53D1\u89C4\u5219 ')],-1)])),_:1})]))])]),_:1})}}});export{se as _};
