import{d as q}from"./index-DzK2S43K.js";import{I as H}from"./index-Dul0EzIE.js";import{i as J,S as M,c as Q,d as $,b as B}from"./constants-CHvLs4wt.js";import{a7 as K,k as R,f as W,at as X,x as Y,Q as Z}from"./form-designer-DHHJWkD5.js";import{l as ll,r,m as I,q as i,I as S,x as t,J as e,B as u,G as p,h as c,u as d,$ as P,A as z,H as O}from"./form-create-_84fGzaM.js";const al={class:"prompt"},el={class:"flex flex-col mt-30px"},ul={class:"mt-30px"},sl={class:"mt-30px"},tl={class:"mt-30px"},dl={class:"mt-30px"},ol={class:"mt-30px"},pl={class:"mt-30px"},nl={class:"mt-30px"},rl={class:"flex justify-center mt-50px"},ml=ll({__name:"index",props:{models:{type:Array,default:()=>[]}},emits:["onDrawStart","onDrawComplete"],setup(E,{expose:L,emit:G}){const C=q(),T=E,N=G,U=r(!1),D=r(""),v=r(""),x=r(512),w=r(512),y=r("DDIM"),_=r(20),V=r(42),g=r(7.5),b=r("NONE"),h=r("3d-model"),j=async()=>{const o=T.models.find(s=>s.model==="stable-diffusion-v1-6"&&s.platform===B.STABLE_DIFFUSION);if(o)if(l=v.value,/[\u4e00-\u9fa5]/.test(l))C.alert("\u6682\u4E0D\u652F\u6301\u4E2D\u6587\uFF01");else{var l;await C.confirm("\u786E\u8BA4\u751F\u6210\u5185\u5BB9?");try{U.value=!0,N("onDrawStart",B.STABLE_DIFFUSION);const s={modelId:o.id,prompt:v.value,width:x.value,height:w.value,options:{seed:V.value,steps:_.value,scale:g.value,sampler:y.value,clipGuidancePreset:b.value,stylePreset:h.value}};await H.drawImage(s)}finally{N("onDrawComplete",B.STABLE_DIFFUSION),U.value=!1}}else C.error("\u8BE5\u6A21\u578B\u4E0D\u53EF\u7528\uFF0C\u8BF7\u9009\u62E9\u5176\u5B83\u6A21\u578B")};return L({settingValues:async o=>{var l,s,m,k,n,f;v.value=o.prompt,x.value=o.width,w.value=o.height,V.value=(l=o.options)==null?void 0:l.seed,_.value=(s=o.options)==null?void 0:s.steps,g.value=(m=o.options)==null?void 0:m.scale,y.value=(k=o.options)==null?void 0:k.sampler,b.value=(n=o.options)==null?void 0:n.clipGuidancePreset,h.value=(f=o.options)==null?void 0:f.stylePreset}}),(o,l)=>{const s=K,m=R,k=W,n=X,f=Z,F=Y;return i(),I(S,null,[t("div",al,[e(s,{tag:"b"},{default:u(()=>l[9]||(l[9]=[p("\u753B\u9762\u63CF\u8FF0")])),_:1}),e(s,{tag:"p"},{default:u(()=>l[10]||(l[10]=[p("\u5EFA\u8BAE\u4F7F\u7528\u201C\u5F62\u5BB9\u8BCD + \u52A8\u8BCD + \u98CE\u683C\u201D\u7684\u683C\u5F0F\uFF0C\u4F7F\u7528\u201C\uFF0C\u201D\u9694\u5F00")])),_:1}),e(m,{modelValue:d(v),"onUpdate:modelValue":l[0]||(l[0]=a=>c(v)?v.value=a:null),maxlength:"1024",rows:5,class:"w-100% mt-15px","input-style":"border-radius: 7px;",placeholder:"\u4F8B\u5982\uFF1A\u7AE5\u8BDD\u91CC\u7684\u5C0F\u5C4B\u5E94\u8BE5\u662F\u4EC0\u4E48\u6837\u5B50\uFF1F","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),t("div",el,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[11]||(l[11]=[p("\u968F\u673A\u70ED\u8BCD")])),_:1})]),e(n,{wrap:"",class:"flex flex-row flex-wrap justify-start mt-15px"},{default:u(()=>[(i(!0),I(S,null,P(d(J),a=>(i(),z(k,{round:"",class:"m-0",type:d(D)===a?"primary":"default",key:a,onClick:il=>(async A=>{D.value!=A?(D.value=A,v.value=A):D.value=""})(a)},{default:u(()=>[p(O(a),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),t("div",ul,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[12]||(l[12]=[p("\u91C7\u6837\u65B9\u6CD5")])),_:1})]),e(n,{wrap:"",class:"mt-15px w-full"},{default:u(()=>[e(F,{modelValue:d(y),"onUpdate:modelValue":l[1]||(l[1]=a=>c(y)?y.value=a:null),placeholder:"Select",size:"large",class:"!w-350px"},{default:u(()=>[(i(!0),I(S,null,P(d(M),a=>(i(),z(f,{key:a.key,label:a.name,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",sl,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[13]||(l[13]=[p("CLIP")])),_:1})]),e(n,{wrap:"",class:"mt-15px w-full"},{default:u(()=>[e(F,{modelValue:d(b),"onUpdate:modelValue":l[2]||(l[2]=a=>c(b)?b.value=a:null),placeholder:"Select",size:"large",class:"!w-350px"},{default:u(()=>[(i(!0),I(S,null,P(d(Q),a=>(i(),z(f,{key:a.key,label:a.name,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",tl,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[14]||(l[14]=[p("\u98CE\u683C")])),_:1})]),e(n,{wrap:"",class:"mt-15px w-full"},{default:u(()=>[e(F,{modelValue:d(h),"onUpdate:modelValue":l[3]||(l[3]=a=>c(h)?h.value=a:null),placeholder:"Select",size:"large",class:"!w-350px"},{default:u(()=>[(i(!0),I(S,null,P(d($),a=>(i(),z(f,{key:a.key,label:a.name,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),t("div",dl,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[15]||(l[15]=[p("\u56FE\u7247\u5C3A\u5BF8")])),_:1})]),e(n,{wrap:"",class:"mt-15px w-full"},{default:u(()=>[e(m,{modelValue:d(x),"onUpdate:modelValue":l[4]||(l[4]=a=>c(x)?x.value=a:null),class:"w-170px",placeholder:"\u56FE\u7247\u5BBD\u5EA6"},null,8,["modelValue"]),e(m,{modelValue:d(w),"onUpdate:modelValue":l[5]||(l[5]=a=>c(w)?w.value=a:null),class:"w-170px",placeholder:"\u56FE\u7247\u9AD8\u5EA6"},null,8,["modelValue"])]),_:1})]),t("div",ol,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[16]||(l[16]=[p("\u8FED\u4EE3\u6B65\u6570")])),_:1})]),e(n,{wrap:"",class:"mt-15px w-full"},{default:u(()=>[e(m,{modelValue:d(_),"onUpdate:modelValue":l[6]||(l[6]=a=>c(_)?_.value=a:null),type:"number",size:"large",class:"!w-350px",placeholder:"Please input"},null,8,["modelValue"])]),_:1})]),t("div",pl,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[17]||(l[17]=[p("\u5F15\u5BFC\u7CFB\u6570")])),_:1})]),e(n,{wrap:"",class:"mt-15px w-full"},{default:u(()=>[e(m,{modelValue:d(g),"onUpdate:modelValue":l[7]||(l[7]=a=>c(g)?g.value=a:null),type:"number",size:"large",class:"!w-350px",placeholder:"Please input"},null,8,["modelValue"])]),_:1})]),t("div",nl,[t("div",null,[e(s,{tag:"b"},{default:u(()=>l[18]||(l[18]=[p("\u968F\u673A\u56E0\u5B50")])),_:1})]),e(n,{wrap:"",class:"mt-15px w-full"},{default:u(()=>[e(m,{modelValue:d(V),"onUpdate:modelValue":l[8]||(l[8]=a=>c(V)?V.value=a:null),type:"number",size:"large",class:"!w-350px",placeholder:"Please input"},null,8,["modelValue"])]),_:1})]),t("div",rl,[e(k,{type:"primary",size:"large",round:"",loading:d(U),disabled:d(v).length===0,onClick:j},{default:u(()=>[p(O(d(U)?"\u751F\u6210\u4E2D":"\u751F\u6210\u5185\u5BB9"),1)]),_:1},8,["loading","disabled"])])],64)}}});export{ml as _};
