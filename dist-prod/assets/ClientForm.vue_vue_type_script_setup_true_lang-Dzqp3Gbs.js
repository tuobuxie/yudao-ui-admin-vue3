import{X as y,a as $,d as H,$ as J,h as Y,D as A,a4 as D}from"./index-DmQdxAiK.js";import{_ as P}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{C as q}from"./constants-C3gLHYOK.js";import{h as Q,aj as X,k as K,s as W,u as Z,l as ee,x as le,Q as ae,ak as te,f as oe}from"./form-designer-DHHJWkD5.js";import{l as de,r as g,j as se,A as i,q as s,B as d,C as ue,u as a,J as o,m as p,I as c,$ as m,G as S,H as re,h as ie}from"./form-create-_84fGzaM.js";const ne=f=>y.get({url:"/system/oauth2-client/page",params:f}),pe=f=>y.delete({url:"/system/oauth2-client/delete?id="+f}),ce=f=>y.delete({url:"/system/oauth2-client/delete-list",params:{ids:f.join(",")}}),me=de({name:"SystemOAuth2ClientForm",__name:"ClientForm",emits:["success"],setup(f,{expose:G,emit:z}){const{t:U}=$(),k=H(),V=g(!1),T=g(""),v=g(!1),I=g(""),t=g({id:void 0,clientId:void 0,secret:void 0,name:void 0,logo:void 0,description:void 0,status:q.ENABLE,accessTokenValiditySeconds:1800,refreshTokenValiditySeconds:43200,redirectUris:[],authorizedGrantTypes:[],scopes:[],autoApproveScopes:[],authorities:[],resourceIds:[],additionalInformation:void 0}),C=se({clientId:[{required:!0,message:"\u5BA2\u6237\u7AEF\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],secret:[{required:!0,message:"\u5BA2\u6237\u7AEF\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5E94\u7528\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],logo:[{required:!0,message:"\u5E94\u7528\u56FE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessTokenValiditySeconds:[{required:!0,message:"\u8BBF\u95EE\u4EE4\u724C\u7684\u6709\u6548\u671F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],refreshTokenValiditySeconds:[{required:!0,message:"\u5237\u65B0\u4EE4\u724C\u7684\u6709\u6548\u671F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],redirectUris:[{required:!0,message:"\u53EF\u91CD\u5B9A\u5411\u7684 URI \u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],authorizedGrantTypes:[{required:!0,message:"\u6388\u6743\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=g();G({open:async(r,l)=>{if(V.value=!0,T.value=U("action."+r),I.value=r,O(),l){v.value=!0;try{t.value=await(n=>y.get({url:"/system/oauth2-client/get?id="+n}))(l)}finally{v.value=!1}}}});const E=z,N=async()=>{if(_&&await _.value.validate()){v.value=!0;try{const r=t.value;I.value==="create"?(await(l=>y.post({url:"/system/oauth2-client/create",data:l}))(r),k.success(U("common.createSuccess"))):(await(l=>y.put({url:"/system/oauth2-client/update",data:l}))(r),k.success(U("common.updateSuccess"))),V.value=!1,E("success")}finally{v.value=!1}}},O=()=>{var r;t.value={id:void 0,clientId:void 0,secret:void 0,name:void 0,logo:void 0,description:void 0,status:q.ENABLE,accessTokenValiditySeconds:1800,refreshTokenValiditySeconds:43200,redirectUris:[],authorizedGrantTypes:[],scopes:[],autoApproveScopes:[],authorities:[],resourceIds:[],additionalInformation:void 0},(r=_.value)==null||r.resetFields()};return(r,l)=>{const n=K,u=X,R=J,M=Z,j=W,w=ee,h=ae,b=le,B=Q,x=oe,F=P,L=te;return s(),i(F,{modelValue:a(V),"onUpdate:modelValue":l[16]||(l[16]=e=>ie(V)?V.value=e:null),title:a(T),"max-height":"500px",scroll:""},{footer:d(()=>[o(x,{disabled:a(v),type:"primary",onClick:N},{default:d(()=>l[17]||(l[17]=[S("\u786E \u5B9A")])),_:1},8,["disabled"]),o(x,{onClick:l[15]||(l[15]=e=>V.value=!1)},{default:d(()=>l[18]||(l[18]=[S("\u53D6 \u6D88")])),_:1})]),default:d(()=>[ue((s(),i(B,{ref_key:"formRef",ref:_,model:a(t),rules:a(C),"label-width":"160px"},{default:d(()=>[o(u,{label:"\u5BA2\u6237\u7AEF\u7F16\u53F7",prop:"secret"},{default:d(()=>[o(n,{modelValue:a(t).clientId,"onUpdate:modelValue":l[0]||(l[0]=e=>a(t).clientId=e),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7AEF\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u5BA2\u6237\u7AEF\u5BC6\u94A5",prop:"secret"},{default:d(()=>[o(n,{modelValue:a(t).secret,"onUpdate:modelValue":l[1]||(l[1]=e=>a(t).secret=e),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7AEF\u5BC6\u94A5"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u5E94\u7528\u540D",prop:"name"},{default:d(()=>[o(n,{modelValue:a(t).name,"onUpdate:modelValue":l[2]||(l[2]=e=>a(t).name=e),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u5E94\u7528\u56FE\u6807"},{default:d(()=>[o(R,{modelValue:a(t).logo,"onUpdate:modelValue":l[3]||(l[3]=e=>a(t).logo=e),limit:1},null,8,["modelValue"])]),_:1}),o(u,{label:"\u5E94\u7528\u63CF\u8FF0"},{default:d(()=>[o(n,{modelValue:a(t).description,"onUpdate:modelValue":l[4]||(l[4]=e=>a(t).description=e),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D",type:"textarea"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u72B6\u6001",prop:"status"},{default:d(()=>[o(j,{modelValue:a(t).status,"onUpdate:modelValue":l[5]||(l[5]=e=>a(t).status=e)},{default:d(()=>[(s(!0),p(c,null,m(a(Y)(a(A).COMMON_STATUS),e=>(s(),i(M,{key:e.value,value:e.value},{default:d(()=>[S(re(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u8BBF\u95EE\u4EE4\u724C\u7684\u6709\u6548\u671F",prop:"accessTokenValiditySeconds"},{default:d(()=>[o(w,{modelValue:a(t).accessTokenValiditySeconds,"onUpdate:modelValue":l[6]||(l[6]=e=>a(t).accessTokenValiditySeconds=e),placeholder:"\u5355\u4F4D\uFF1A\u79D2"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u5237\u65B0\u4EE4\u724C\u7684\u6709\u6548\u671F",prop:"refreshTokenValiditySeconds"},{default:d(()=>[o(w,{modelValue:a(t).refreshTokenValiditySeconds,"onUpdate:modelValue":l[7]||(l[7]=e=>a(t).refreshTokenValiditySeconds=e),placeholder:"\u5355\u4F4D\uFF1A\u79D2"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u6388\u6743\u7C7B\u578B",prop:"authorizedGrantTypes"},{default:d(()=>[o(b,{modelValue:a(t).authorizedGrantTypes,"onUpdate:modelValue":l[8]||(l[8]=e=>a(t).authorizedGrantTypes=e),filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u7C7B\u578B",style:{width:"500px"}},{default:d(()=>[(s(!0),p(c,null,m(a(D)(a(A).SYSTEM_OAUTH2_GRANT_TYPE),e=>(s(),i(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u6388\u6743\u8303\u56F4",prop:"scopes"},{default:d(()=>[o(b,{modelValue:a(t).scopes,"onUpdate:modelValue":l[9]||(l[9]=e=>a(t).scopes=e),filterable:"",multiple:"","allow-create":"",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u8303\u56F4",style:{width:"500px"}},{default:d(()=>[(s(!0),p(c,null,m(a(t).scopes,e=>(s(),i(h,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u81EA\u52A8\u6388\u6743\u8303\u56F4",prop:"autoApproveScopes"},{default:d(()=>[o(b,{modelValue:a(t).autoApproveScopes,"onUpdate:modelValue":l[10]||(l[10]=e=>a(t).autoApproveScopes=e),filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u8303\u56F4",style:{width:"500px"}},{default:d(()=>[(s(!0),p(c,null,m(a(t).scopes,e=>(s(),i(h,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u53EF\u91CD\u5B9A\u5411\u7684 URI \u5730\u5740",prop:"redirectUris"},{default:d(()=>[o(b,{modelValue:a(t).redirectUris,"onUpdate:modelValue":l[11]||(l[11]=e=>a(t).redirectUris=e),"allow-create":"",filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u53EF\u91CD\u5B9A\u5411\u7684 URI \u5730\u5740",style:{width:"500px"}},{default:d(()=>[(s(!0),p(c,null,m(a(t).redirectUris,e=>(s(),i(h,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u6743\u9650",prop:"authorities"},{default:d(()=>[o(b,{modelValue:a(t).authorities,"onUpdate:modelValue":l[12]||(l[12]=e=>a(t).authorities=e),"allow-create":"",filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u6743\u9650",style:{width:"500px"}},{default:d(()=>[(s(!0),p(c,null,m(a(t).authorities,e=>(s(),i(h,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u8D44\u6E90",prop:"resourceIds"},{default:d(()=>[o(b,{modelValue:a(t).resourceIds,"onUpdate:modelValue":l[13]||(l[13]=e=>a(t).resourceIds=e),"allow-create":"",filterable:"",multiple:"",placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90",style:{width:"500px"}},{default:d(()=>[(s(!0),p(c,null,m(a(t).resourceIds,e=>(s(),i(h,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u9644\u52A0\u4FE1\u606F",prop:"additionalInformation"},{default:d(()=>[o(n,{modelValue:a(t).additionalInformation,"onUpdate:modelValue":l[14]||(l[14]=e=>a(t).additionalInformation=e),placeholder:"\u8BF7\u8F93\u5165\u9644\u52A0\u4FE1\u606F\uFF0CJSON \u683C\u5F0F\u6570\u636E",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[L,a(v)]])]),_:1},8,["modelValue","title"])}}});export{me as _,ce as a,pe as d,ne as g};
