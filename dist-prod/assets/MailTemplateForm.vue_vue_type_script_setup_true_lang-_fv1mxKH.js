import{a as D,d as G,a0 as H,h as J,D as Q}from"./index-DmQdxAiK.js";import{_ as R}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{g as $,c as z,u as K}from"./index-kTay95qt.js";import{e as P}from"./index-CKdmpNMa.js";import{C as y}from"./constants-C3gLHYOK.js";import{h as W,aj as X,x as Y,Q as Z,k as ee,s as le,u as ae,ak as te,f as ue}from"./form-designer-DHHJWkD5.js";import{l as oe,r,j as de,A as f,q as i,B as o,C as se,u as a,J as u,m as U,I as q,$ as w,G as V,H as re,h as me}from"./form-create-_84fGzaM.js";const ne=oe({name:"SystemMailTemplateForm",__name:"MailTemplateForm",emits:["success"],setup(ie,{expose:I,emit:x}){const{t:v}=D(),g=G(),m=r(!1),_=r(""),n=r(!1),b=r(""),t=r({id:void 0,name:"",code:"",accountId:void 0,nickname:"",title:"",content:"",status:y.ENABLE,remark:""}),C=de({accountId:[{required:!0,message:"\u90AE\u7BB1\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],code:[{required:!0,message:"\u6A21\u677F\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6A21\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],title:[{required:!0,message:"\u6A21\u677F\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u6A21\u677F\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),p=r(),k=r([]);I({open:async(d,e)=>{if(m.value=!0,_.value=v("action."+d),b.value=d,A(),e){n.value=!0;try{t.value=await $(e)}finally{n.value=!1}}k.value=await P()}});const S=x,T=async()=>{if(p&&await p.value.validate()){n.value=!0;try{const d=t.value;b.value==="create"?(await z(d),g.success(v("common.createSuccess"))):(await K(d),g.success(v("common.updateSuccess"))),m.value=!1,S("success")}finally{n.value=!1}}},A=()=>{var d;t.value={id:void 0,name:"",code:"",accountId:void 0,nickname:"",title:"",content:"",status:y.ENABLE,remark:""},(d=p.value)==null||d.resetFields()};return(d,e)=>{const E=Z,F=Y,s=X,c=ee,M=H,B=ae,N=le,j=W,h=ue,L=R,O=te;return i(),f(L,{modelValue:a(m),"onUpdate:modelValue":e[9]||(e[9]=l=>me(m)?m.value=l:null),title:a(_),width:800},{footer:o(()=>[u(h,{disabled:a(n),type:"primary",onClick:T},{default:o(()=>e[10]||(e[10]=[V("\u786E \u5B9A")])),_:1},8,["disabled"]),u(h,{onClick:e[8]||(e[8]=l=>m.value=!1)},{default:o(()=>e[11]||(e[11]=[V("\u53D6 \u6D88")])),_:1})]),default:o(()=>[se((i(),f(j,{ref_key:"formRef",ref:p,model:a(t),rules:a(C),"label-width":"140px"},{default:o(()=>[u(s,{label:"\u90AE\u7BB1\u8D26\u53F7",prop:"accountId"},{default:o(()=>[u(F,{modelValue:a(t).accountId,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).accountId=l),placeholder:"\u8BF7\u9009\u62E9\u90AE\u7BB1\u8D26\u53F7"},{default:o(()=>[(i(!0),U(q,null,w(a(k),l=>(i(),f(E,{key:l.id,label:l.mail,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u677F\u7F16\u7801",prop:"code"},{default:o(()=>[u(c,{modelValue:a(t).code,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).code=l),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u7F16\u7801"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u677F\u540D\u79F0",prop:"name"},{default:o(()=>[u(c,{modelValue:a(t).name,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).name=l),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u53D1\u9001\u4EBA\u540D\u79F0",prop:"nickname"},{default:o(()=>[u(c,{modelValue:a(t).nickname,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).nickname=l),placeholder:"\u8BF7\u8F93\u5165\u53D1\u9001\u4EBA\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u677F\u6807\u9898",prop:"title"},{default:o(()=>[u(c,{modelValue:a(t).title,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).title=l),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u6807\u9898"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6A21\u677F\u5185\u5BB9",prop:"content"},{default:o(()=>[u(M,{modelValue:a(t).content,"onUpdate:modelValue":e[5]||(e[5]=l=>a(t).content=l),height:"200px"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[u(N,{modelValue:a(t).status,"onUpdate:modelValue":e[6]||(e[6]=l=>a(t).status=l)},{default:o(()=>[(i(!0),U(q,null,w(a(J)(a(Q).COMMON_STATUS),l=>(i(),f(B,{key:l.value,value:l.value},{default:o(()=>[V(re(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[u(c,{modelValue:a(t).remark,"onUpdate:modelValue":e[7]||(e[7]=l=>a(t).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[O,a(n)]])]),_:1},8,["modelValue","title"])}}});export{ne as _};
