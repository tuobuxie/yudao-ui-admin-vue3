import{d as E,a as L,h as W,D as G,_ as X}from"./index-DzK2S43K.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{_ as ee}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as ae}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as le}from"./index-RnHrue4c.js";import{l as te,r as m,j as se,e as oe,ag as ne,m as v,q as r,J as e,B as t,u as s,Z as re,I as C,$ as j,A as p,C as f,G as i,x as ie,H as T}from"./form-create-_84fGzaM.js";import{d as ue}from"./formatTime-BGPGB_ys.js";import{_ as pe,g as ce,d as de,a as me}from"./ClientForm.vue_vue_type_script_setup_true_lang-CBpiv9jx.js";import{h as fe,aj as _e,k as ye,x as ge,Q as he,f as be,Z as ke,_ as we,a6 as Se,ak as xe}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./constants-C3gLHYOK.js";const ve=["src"],Ce=te({name:"SystemOAuth2Client",__name:"index",setup(Te){const _=E(),{t:V}=L(),k=m(!0),N=m(0),O=m([]),o=se({pageNo:1,pageSize:10,name:null,status:void 0}),U=m(),c=async()=>{k.value=!0;try{const u=await ce(o);O.value=u.list,N.value=u.total}finally{k.value=!1}},w=()=>{o.pageNo=1,c()},q=()=>{U.value.resetFields(),w()},z=m(),A=(u,a)=>{z.value.open(u,a)},y=m([]),F=u=>{y.value=u.map(a=>a.id)},I=async()=>{try{await _.delConfirm(),await me(y.value),y.value=[],_.success(V("common.delSuccess")),await c()}catch{}};return oe(()=>{c()}),(u,a)=>{const K=le,P=ye,S=_e,R=he,Z=ge,g=X,d=be,B=fe,M=ae,n=we,D=ee,H=Se,J=ke,Q=Y,h=ne("hasPermi"),$=xe;return r(),v(C,null,[e(K,{title:"OAuth 2.0\uFF08SSO \u5355\u70B9\u767B\u5F55)",url:"https://doc.iocoder.cn/oauth2/"}),e(M,null,{default:t(()=>[e(B,{class:"-mb-15px",model:s(o),ref_key:"queryFormRef",ref:U,inline:!0,"label-width":"68px"},{default:t(()=>[e(S,{label:"\u5E94\u7528\u540D",prop:"name"},{default:t(()=>[e(P,{modelValue:s(o).name,"onUpdate:modelValue":a[0]||(a[0]=l=>s(o).name=l),placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528\u540D",clearable:"",onKeyup:re(w,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(S,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[e(Z,{modelValue:s(o).status,"onUpdate:modelValue":a[1]||(a[1]=l=>s(o).status=l),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"!w-240px"},{default:t(()=>[(r(!0),v(C,null,j(s(W)(s(G).COMMON_STATUS),l=>(r(),p(R,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(S,null,{default:t(()=>[e(d,{onClick:w},{default:t(()=>[e(g,{icon:"ep:search",class:"mr-5px"}),a[5]||(a[5]=i(" \u641C\u7D22"))]),_:1}),e(d,{onClick:q},{default:t(()=>[e(g,{icon:"ep:refresh",class:"mr-5px"}),a[6]||(a[6]=i(" \u91CD\u7F6E"))]),_:1}),f((r(),p(d,{plain:"",type:"primary",onClick:a[2]||(a[2]=l=>A("create"))},{default:t(()=>[e(g,{icon:"ep:plus",class:"mr-5px"}),a[7]||(a[7]=i(" \u65B0\u589E "))]),_:1})),[[h,["system:oauth2-client:create"]]]),f((r(),p(d,{plain:"",type:"danger",disabled:s(y).length===0,onClick:I},{default:t(()=>[e(g,{icon:"ep:delete",class:"mr-5px"}),a[8]||(a[8]=i(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[h,["system:oauth2-client:delete"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(M,null,{default:t(()=>[f((r(),p(J,{data:s(O),onSelectionChange:F},{default:t(()=>[e(n,{type:"selection",width:"55"}),e(n,{label:"\u5BA2\u6237\u7AEF\u7F16\u53F7",align:"center",prop:"clientId"}),e(n,{label:"\u5BA2\u6237\u7AEF\u5BC6\u94A5",align:"center",prop:"secret"}),e(n,{label:"\u5E94\u7528\u540D",align:"center",prop:"name"}),e(n,{label:"\u5E94\u7528\u56FE\u6807",align:"center",prop:"logo"},{default:t(l=>[ie("img",{width:"40px",height:"40px",src:l.row.logo},null,8,ve)]),_:1}),e(n,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:t(l=>[e(D,{type:s(G).COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),e(n,{label:"\u8BBF\u95EE\u4EE4\u724C\u7684\u6709\u6548\u671F",align:"center",prop:"accessTokenValiditySeconds"},{default:t(l=>[i(T(l.row.accessTokenValiditySeconds)+" \u79D2",1)]),_:1}),e(n,{label:"\u5237\u65B0\u4EE4\u724C\u7684\u6709\u6548\u671F",align:"center",prop:"refreshTokenValiditySeconds"},{default:t(l=>[i(T(l.row.refreshTokenValiditySeconds)+" \u79D2",1)]),_:1}),e(n,{label:"\u6388\u6743\u7C7B\u578B",align:"center",prop:"authorizedGrantTypes"},{default:t(l=>[(r(!0),v(C,null,j(l.row.authorizedGrantTypes,(x,b)=>(r(),p(H,{"disable-transitions":!0,key:b,index:b,class:"mr-5px"},{default:t(()=>[i(T(x),1)]),_:2},1032,["index"]))),128))]),_:1}),e(n,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:s(ue)},null,8,["formatter"]),e(n,{label:"\u64CD\u4F5C",align:"center"},{default:t(l=>[f((r(),p(d,{link:"",type:"primary",onClick:x=>A("update",l.row.id)},{default:t(()=>a[9]||(a[9]=[i(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[h,["system:oauth2-client:update"]]]),f((r(),p(d,{link:"",type:"danger",onClick:x=>(async b=>{try{await _.delConfirm(),await de(b),_.success(V("common.delSuccess")),await c()}catch{}})(l.row.id)},{default:t(()=>a[10]||(a[10]=[i(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[h,["system:oauth2-client:delete"]]])]),_:1})]),_:1},8,["data"])),[[$,s(k)]]),e(Q,{total:s(N),page:s(o).pageNo,"onUpdate:page":a[3]||(a[3]=l=>s(o).pageNo=l),limit:s(o).pageSize,"onUpdate:limit":a[4]||(a[4]=l=>s(o).pageSize=l),onPagination:c},null,8,["total","page","limit"])]),_:1}),e(pe,{ref_key:"formRef",ref:z,onSuccess:c},null,512)],64)}}});export{Ce as default};
