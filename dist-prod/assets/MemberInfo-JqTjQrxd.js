import{N as g,c as N}from"./index-DzK2S43K.js";import{l as O,r as i,c as T,A as c,q as u,B as l,J as o,x as d,D as x,u as e,C as H,E as n,m as W,K as R,n as B}from"./form-create-_84fGzaM.js";import{_ as X}from"./ProductBrowsingHistory.vue_vue_type_script_setup_true_lang-BvABs2kY.js";import{_ as P}from"./OrderBrowsingHistory.vue_vue_type_script_setup_true_lang-BoYD5FTQ.js";import{C as j}from"./CardTitle-DbupmRpB.js";import Q from"./UserBasicInfo-CFcu5r6z.js";import V from"./UserAccountInfo-CZZkek_x.js";import{g as z}from"./index-DRo1UxMu.js";import{g as F}from"./index-LUzlrz61.js";import{as as G,U as Y,W as Z,ak as $,ad as ee,e as ae,aU as te,X as re}from"./form-designer-DHHJWkD5.js";import"./ProductItem-B1yiaH0B.js";import"./OrderItem-CsXxFSx8.js";import"./index-CiJyozfD.js";import"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import"./formatTime-BGPGB_ys.js";import"./DescriptionsItemLabel-CEyphZB3.js";import"./el-collapse-transition-l0sNRNKZ.js";const se={key:0},ie=N(O({name:"MemberBrowsingHistory",__name:"MemberInfo",setup(le,{expose:U}){const r=i("\u4F1A\u5458\u4FE1\u606F"),p=T(()=>a=>r.value===a),v=i(),y=i(),k=async a=>{r.value=a,await B(),await I()},I=async()=>{var a,t;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":await S(),await L();break;case"\u6700\u8FD1\u6D4F\u89C8":await((a=v.value)==null?void 0:a.getHistoryList(s.value));break;case"\u4EA4\u6613\u8BA2\u5355":await((t=y.value)==null?void 0:t.getHistoryList(s.value))}},s=i({});U({initHistory:async a=>{r.value="\u4F1A\u5458\u4FE1\u606F",s.value=a,await B(),await I()}});const C=i(),E=G(()=>{var t;const a=(t=C.value)==null?void 0:t.wrapRef;Math.abs(a.scrollHeight-a.clientHeight-a.scrollTop)<1&&(async()=>{var f,m;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":break;case"\u6700\u8FD1\u6D4F\u89C8":await((f=v.value)==null?void 0:f.loadMore());break;case"\u4EA4\u6613\u8BA2\u5355":await((m=y.value)==null?void 0:m.loadMore())}})()},200),w={balance:0,totalExpense:0,totalRecharge:0},h=i(w),L=async()=>{s.value.userId?h.value=await F({userId:s.value.userId})||w:h.value=w},_=i(!0),b=i({}),S=async()=>{_.value=!0;try{b.value=await z(s.value.userId)}finally{_.value=!1}};return(a,t)=>{const f=Z,m=ee,q=ae,A=te,D=re,J=Y,K=$;return u(),c(J,{class:"kefu"},{default:l(()=>[o(f,{class:"kefu-header"},{default:l(()=>[d("div",{class:x([{"kefu-header-item-activation":e(p)("\u4F1A\u5458\u4FE1\u606F")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[0]||(t[0]=M=>k("\u4F1A\u5458\u4FE1\u606F"))}," \u4F1A\u5458\u4FE1\u606F ",2),d("div",{class:x([{"kefu-header-item-activation":e(p)("\u6700\u8FD1\u6D4F\u89C8")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[1]||(t[1]=M=>k("\u6700\u8FD1\u6D4F\u89C8"))}," \u6700\u8FD1\u6D4F\u89C8 ",2),d("div",{class:x([{"kefu-header-item-activation":e(p)("\u4EA4\u6613\u8BA2\u5355")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:t[2]||(t[2]=M=>k("\u4EA4\u6613\u8BA2\u5355"))}," \u4EA4\u6613\u8BA2\u5355 ",2)]),_:1}),o(D,{class:"kefu-content p-10px!"},{default:l(()=>[e(g)(e(s))?n("",!0):H((u(),W("div",se,[e(r)==="\u4F1A\u5458\u4FE1\u606F"?(u(),c(Q,{key:0,user:e(b),mode:"kefu"},{header:l(()=>[o(e(j),{title:"\u57FA\u672C\u4FE1\u606F"})]),_:1},8,["user"])):n("",!0),e(r)==="\u4F1A\u5458\u4FE1\u606F"?(u(),c(m,{key:1,class:"h-full mt-10px",shadow:"never"},{header:l(()=>[o(e(j),{title:"\u8D26\u6237\u4FE1\u606F"})]),default:l(()=>[o(V,{column:1,user:e(b),wallet:e(h)},null,8,["user","wallet"])]),_:1})):n("",!0)])),[[K,e(_)]]),H(d("div",null,[o(q,{ref_key:"scrollbarRef",ref:C,always:"",onScroll:e(E)},{default:l(()=>[e(r)==="\u6700\u8FD1\u6D4F\u89C8"?(u(),c(X,{key:0,ref_key:"productBrowsingHistoryRef",ref:v},null,512)):n("",!0),e(r)==="\u4EA4\u6613\u8BA2\u5355"?(u(),c(P,{key:1,ref_key:"orderBrowsingHistoryRef",ref:y},null,512)):n("",!0)]),_:1},8,["onScroll"])],512),[[R,!e(g)(e(s))]]),H(o(A,{description:"\u8BF7\u9009\u62E9\u5DE6\u4FA7\u7684\u4E00\u4E2A\u4F1A\u8BDD\u540E\u5F00\u59CB"},null,512),[[R,e(g)(e(s))]])]),_:1})]),_:1})}}}),[["__scopeId","data-v-2e30041e"]]);export{ie as default};
