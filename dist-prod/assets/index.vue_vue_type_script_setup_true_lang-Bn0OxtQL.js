import{a as F,d as J,h as Q,D as N,_ as Z}from"./index-DzK2S43K.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{_ as B}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as K}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{T as P}from"./index-CeJe158m.js";import{_ as W}from"./ThingModelForm.vue_vue_type_script_setup_true_lang-Bi0wk9c3.js";import{_ as X}from"./ThingModelTSL.vue_vue_type_script_setup_true_lang-CZGiKYEI.js";import{g as ee,I as ae}from"./constants-DGDXM-Iq.js";import{_ as le}from"./DataDefinition.vue_vue_type_script_setup_true_lang-Ej2CCADM.js";import{h as te,aj as oe,x as ie,Q as re,f as ne,a0 as pe,ak as se,_ as de,Z as ue}from"./form-designer-DHHJWkD5.js";import{l as me,r as s,j as fe,i as ce,e as _e,ag as ge,m as S,q as n,I as M,J as l,B as t,u as o,$ as ye,A as d,C as m,G as f,H as he}from"./form-create-_84fGzaM.js";const ke=me({name:"IoTThingModel",__name:"index",setup(ve){const{t:O}=F(),k=J(),y=s(!0),v=s([]),w=s(0),i=fe({pageNo:1,pageSize:10,type:void 0,productId:-1}),z=s(),h=ce(ae.PRODUCT),u=async()=>{var r;y.value=!0;try{i.productId=((r=h==null?void 0:h.value)==null?void 0:r.id)||-1;const e=await P.getThingModelPage(i);v.value=e.list,w.value=e.total}finally{y.value=!1}},D=()=>{i.pageNo=1,u()},T=s(),b=(r,e)=>{T.value.open(r,e)},C=s(),E=()=>{var r;(r=C.value)==null||r.open()};return _e(()=>{u()}),(r,e)=>{const R=re,U=ie,I=oe,q=Z,c=ne,G=te,x=K,H=B,p=de,L=ue,V=$,j=pe,_=ge("hasPermi"),Y=se;return n(),S(M,null,[l(x,null,{default:t(()=>[l(G,{ref_key:"queryFormRef",ref:z,inline:!0,model:o(i),class:"-mb-15px","label-width":"68px"},{default:t(()=>[l(I,{label:"\u529F\u80FD\u7C7B\u578B",prop:"name"},{default:t(()=>[l(U,{modelValue:o(i).type,"onUpdate:modelValue":e[0]||(e[0]=a=>o(i).type=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u529F\u80FD\u7C7B\u578B",onChange:D},{default:t(()=>[(n(!0),S(M,null,ye(o(Q)(o(N).IOT_THING_MODEL_TYPE),a=>(n(),d(R,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(I,null,{default:t(()=>[m((n(),d(c,{plain:"",type:"primary",onClick:e[1]||(e[1]=a=>b("create"))},{default:t(()=>[l(q,{class:"mr-5px",icon:"ep:plus"}),e[4]||(e[4]=f(" \u6DFB\u52A0\u529F\u80FD "))]),_:1})),[[_,["iot:thing-model:create"]]]),m((n(),d(c,{plain:"",type:"success",onClick:E},{default:t(()=>e[5]||(e[5]=[f(" TSL ")])),_:1})),[[_,["iot:thing-model:query"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(x,null,{default:t(()=>[l(j,null,{default:t(()=>[m((n(),d(L,{data:o(v),"show-overflow-tooltip":!0,stripe:!0},{default:t(()=>[l(p,{align:"center",label:"\u529F\u80FD\u7C7B\u578B",prop:"type"},{default:t(a=>[l(H,{type:o(N).IOT_THING_MODEL_TYPE,value:a.row.type},null,8,["type","value"])]),_:1}),l(p,{align:"center",label:"\u529F\u80FD\u540D\u79F0",prop:"name"}),l(p,{align:"center",label:"\u6807\u8BC6\u7B26",prop:"identifier"}),l(p,{align:"center",label:"\u6570\u636E\u7C7B\u578B",prop:"identifier"},{default:t(({row:a})=>{var g;return[f(he(o(ee)((g=a.property)==null?void 0:g.dataType)??"-"),1)]}),_:1}),l(p,{align:"left",label:"\u6570\u636E\u5B9A\u4E49",prop:"identifier"},{default:t(({row:a})=>[l(o(le),{data:a},null,8,["data"])]),_:1}),l(p,{align:"center",label:"\u64CD\u4F5C"},{default:t(a=>[m((n(),d(c,{link:"",type:"primary",onClick:g=>b("update",a.row.id)},{default:t(()=>e[6]||(e[6]=[f(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[_,["iot:thing-model:update"]]]),m((n(),d(c,{link:"",type:"danger",onClick:g=>(async A=>{try{await k.delConfirm(),await P.deleteThingModel(A),k.success(O("common.delSuccess")),await u()}catch{}})(a.row.id)},{default:t(()=>e[7]||(e[7]=[f(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["iot:thing-model:delete"]]])]),_:1})]),_:1},8,["data"])),[[Y,o(y)]]),l(V,{limit:o(i).pageSize,"onUpdate:limit":e[2]||(e[2]=a=>o(i).pageSize=a),page:o(i).pageNo,"onUpdate:page":e[3]||(e[3]=a=>o(i).pageNo=a),total:o(w),onPagination:u},null,8,["limit","page","total"])]),_:1})]),_:1}),l(W,{ref_key:"formRef",ref:T,onSuccess:u},null,512),l(X,{ref_key:"tslRef",ref:C},null,512)],64)}}});export{ke as _};
