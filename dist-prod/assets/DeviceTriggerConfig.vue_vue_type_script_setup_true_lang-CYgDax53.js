import{aE as C,_ as V}from"./index-DmQdxAiK.js";import{_ as T}from"./MainConditionInnerConfig.vue_vue_type_script_setup_true_lang-B7HnlRdk.js";import{_ as U}from"./SubConditionGroupConfig.vue_vue_type_script_setup_true_lang-Dwd7llDG.js";import{a6 as D,f as E}from"./form-designer-DHHJWkD5.js";import{l as $,m as d,q as c,x as e,J as l,B as r,G as i,u as a,H as f,I as q,$ as B,E as F,au as H,n as I}from"./form-create-_84fGzaM.js";const J={class:"flex flex-col gap-16px"},S={class:"space-y-16px"},A={class:"flex flex-col gap-16px"},K={class:"space-y-16px"},L={class:"flex items-center justify-between p-16px bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-8px"},M={class:"flex items-center gap-12px"},N={class:"space-y-16px"},O={class:"flex flex-col gap-16px"},P={class:"flex items-center justify-between p-16px bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-8px"},Q={class:"flex items-center gap-12px"},R={class:"flex items-center gap-8px"},W={key:0,class:"space-y-16px"},X={class:"relative"},Y={class:"border-2 border-orange-200 rounded-8px bg-orange-50 shadow-sm hover:shadow-md transition-shadow"},Z={class:"flex items-center justify-between p-16px bg-gradient-to-r from-orange-50 to-yellow-50 border-b border-orange-200 rounded-t-6px"},ee={class:"flex items-center gap-12px"},te={class:"flex items-center gap-8px text-16px font-600 text-orange-700"},se={class:"w-24px h-24px bg-orange-500 text-white rounded-full flex items-center justify-center text-12px font-bold"},le={key:0,class:"flex items-center justify-center py-12px"},ae={key:1,class:"p-24px border-2 border-dashed border-orange-200 rounded-8px text-center bg-orange-50"},oe={class:"flex flex-col items-center gap-12px"},re=$({name:"DeviceTriggerConfig",__name:"DeviceTriggerConfig",props:{modelValue:{},index:{}},emits:["update:modelValue","trigger-type-change"],setup(h,{emit:w}){const m=w,t=C(h,"modelValue",m),G=o=>{t.value=o},_=o=>{t.value.type=o,m("trigger-type-change",o)},k=async()=>{var o;t.value.conditionGroups||(t.value.conditionGroups=[]),((o=t.value.conditionGroups)==null?void 0:o.length)>=3||(await I(),t.value.conditionGroups&&t.value.conditionGroups.push([]))},z=()=>{t.value.conditionGroups=void 0};return(o,s)=>{var y;const x=D,u=V,v=E;return c(),d("div",J,[e("div",S,[e("div",A,[e("div",K,[e("div",L,[e("div",M,[s[1]||(s[1]=e("div",{class:"flex items-center gap-8px text-16px font-600 text-green-700"},[e("div",{class:"w-24px h-24px bg-green-500 text-white rounded-full flex items-center justify-center text-12px font-bold"}," \u4E3B "),e("span",null,"\u4E3B\u6761\u4EF6")],-1)),l(x,{size:"small",type:"success"},{default:r(()=>s[0]||(s[0]=[i("\u5FC5\u987B\u6EE1\u8DB3")])),_:1})])]),l(T,{"model-value":a(t),"onUpdate:modelValue":G,"trigger-type":a(t).type,onTriggerTypeChange:_},null,8,["model-value","trigger-type"])])])]),e("div",N,[e("div",O,[e("div",P,[e("div",Q,[s[3]||(s[3]=e("div",{class:"flex items-center gap-8px text-16px font-600 text-green-700"},[e("div",{class:"w-24px h-24px bg-green-500 text-white rounded-full flex items-center justify-center text-12px font-bold"}," \u7EC4 "),e("span",null,"\u9644\u52A0\u6761\u4EF6\u7EC4")],-1)),l(x,{size:"small",type:"success"},{default:r(()=>s[2]||(s[2]=[i('\u4E0E"\u4E3B\u6761\u4EF6"\u4E3A\u4E14\u5173\u7CFB')])),_:1}),l(x,{size:"small",type:"info"},{default:r(()=>{var n;return[i(f(((n=a(t).conditionGroups)==null?void 0:n.length)||0)+" \u4E2A\u5B50\u6761\u4EF6\u7EC4 ",1)]}),_:1})]),e("div",R,[l(v,{type:"primary",size:"small",onClick:k,disabled:(((y=a(t).conditionGroups)==null?void 0:y.length)||0)>=3},{default:r(()=>[l(u,{icon:"ep:plus"}),s[4]||(s[4]=i(" \u6DFB\u52A0\u5B50\u6761\u4EF6\u7EC4 "))]),_:1},8,["disabled"]),l(v,{type:"danger",size:"small",text:"",onClick:z},{default:r(()=>[l(u,{icon:"ep:delete"}),s[5]||(s[5]=i(" \u5220\u9664\u6761\u4EF6\u7EC4 "))]),_:1})])]),a(t).conditionGroups&&a(t).conditionGroups.length>0?(c(),d("div",W,[e("div",X,[(c(!0),d(q,null,B(a(t).conditionGroups,(n,p)=>(c(),d("div",{key:`sub-group-${p}`,class:"relative"},[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,f(p+1),1),e("span",null,"\u5B50\u6761\u4EF6\u7EC4 "+f(p+1),1)]),l(x,{size:"small",type:"warning",class:"font-500"},{default:r(()=>s[6]||(s[6]=[i('\u7EC4\u5185\u6761\u4EF6\u4E3A"\u4E14"\u5173\u7CFB')])),_:1}),l(x,{size:"small",type:"info"},{default:r(()=>[i(f((n==null?void 0:n.length)||0)+"\u4E2A\u6761\u4EF6 ",1)]),_:2},1024)]),l(v,{type:"danger",size:"small",text:"",onClick:b=>{return g=p,void(t.value.conditionGroups&&t.value.conditionGroups.splice(g,1));var g},class:"hover:bg-red-50"},{default:r(()=>[l(u,{icon:"ep:delete"}),s[7]||(s[7]=i(" \u5220\u9664\u7EC4 "))]),_:2},1032,["onClick"])]),l(U,{"model-value":n,"onUpdate:modelValue":b=>((g,j)=>{t.value.conditionGroups&&(t.value.conditionGroups[g]=j)})(p,b),"trigger-type":a(t).type,"max-conditions":3},null,8,["model-value","onUpdate:modelValue","trigger-type"])]),p<a(t).conditionGroups.length-1?(c(),d("div",le,s[8]||(s[8]=[H('<div class="flex items-center gap-8px"><div class="w-32px h-1px bg-orange-300"></div><div class="px-16px py-6px bg-orange-100 border-2 border-orange-300 rounded-full"><span class="text-14px font-600 text-orange-600">\u6216</span></div><div class="w-32px h-1px bg-orange-300"></div></div>',1)]))):F("",!0)]))),128))])])):(c(),d("div",ae,[e("div",oe,[l(u,{icon:"ep:plus",class:"text-32px text-orange-400"}),s[9]||(s[9]=e("div",{class:"text-orange-600"},[e("p",{class:"text-14px font-500 mb-4px"},"\u6682\u65E0\u5B50\u6761\u4EF6\u7EC4"),e("p",{class:"text-12px"},'\u70B9\u51FB\u4E0A\u65B9"\u6DFB\u52A0\u5B50\u6761\u4EF6\u7EC4"\u6309\u94AE\u5F00\u59CB\u914D\u7F6E')],-1))])]))])])])}}});export{re as _};
