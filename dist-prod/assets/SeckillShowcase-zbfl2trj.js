import{p as v,Q as q,_ as K,K as b,c as R}from"./index-DzK2S43K.js";import{l as E,c as I,r as h,b as N,m,q as t,x as c,J as s,A as T,E as U,I as V,$ as j,B as _,C as B,K as J,u as g}from"./form-create-_84fGzaM.js";import{e as L}from"./seckillActivity-ei69obC3.js";import{_ as M}from"./SeckillTableSelect.vue_vue_type_script_setup_true_lang-0eN78jyp.js";import{al as Q,o as X}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import"./tree-COGD3qag.js";import"./category-D2wqANM9.js";import"./formatter-DvqlMX1t.js";import"./formatTime-BGPGB_ys.js";const $={class:"flex flex-wrap items-center gap-8px"},z={class:"relative h-full w-full"},D=R(E({name:"SeckillShowcase",__name:"SeckillShowcase",props:{modelValue:q([Number,Array]).isRequired,limit:v.number.def(Number.MAX_VALUE),disabled:v.bool.def(!1)},emits:["update:modelValue","change"],setup(o,{emit:k}){const a=o,x=I(()=>!a.disabled&&(!a.limit||l.value.length<a.limit)),l=h([]);N(()=>a.modelValue,async()=>{const e=b(a.modelValue)?a.modelValue:a.modelValue?[a.modelValue]:[];e.length!==0?(l.value.length===0||l.value.some(d=>!e.includes(d.id)))&&(l.value=await L(e)):l.value=[]},{immediate:!0});const n=h(),w=()=>{n.value.open(l.value)},y=e=>{l.value=b(e)?e:[e],r()},i=k,r=()=>{if(a.limit===1){const e=l.value.length>0?l.value[0]:null;i("update:modelValue",(e==null?void 0:e.id)||0),i("change",e)}else i("update:modelValue",l.value.map(e=>e.id)),i("change",l.value)};return(e,d)=>{const A=Q,p=K,f=X;return t(),m(V,null,[c("div",$,[(t(!0),m(V,null,j(g(l),(u,C)=>(t(),m("div",{key:u.id,class:"select-box spu-pic"},[s(f,{content:u.name},{default:_(()=>[c("div",z,[s(A,{src:u.picUrl,class:"h-full w-full"},null,8,["src"]),B(s(p,{class:"del-icon",icon:"ep:circle-close-filled",onClick:F=>(S=>{l.value.splice(S,1),r()})(C)},null,8,["onClick"]),[[J,!o.disabled]])])]),_:2},1032,["content"])]))),128)),g(x)?(t(),T(f,{key:0,content:"\u9009\u62E9\u6D3B\u52A8"},{default:_(()=>[c("div",{class:"select-box",onClick:w},[s(p,{icon:"ep:plus"})])]),_:1})):U("",!0)]),s(M,{ref_key:"seckillActivityTableSelectRef",ref:n,multiple:o.limit!=1,onChange:y},null,8,["multiple"])],64)}}}),[["__scopeId","data-v-3658626b"]]);export{D as default};
