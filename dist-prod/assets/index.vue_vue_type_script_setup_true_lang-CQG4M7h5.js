import{d as H}from"./index-B2urM1q-.js";import{I as J}from"./index-CZlbnfci.js";import{I as U,e as F,D as K,f as _,b as C}from"./constants-CHvLs4wt.js";import{a7 as L,k as M,f as Q,at as R,al as T}from"./form-designer-DHHJWkD5.js";import{l as W,r as x,m as u,q as n,I as y,x as a,J as t,B as r,G as p,h as X,u as o,$ as I,A as Y,H as v,D,O as Z}from"./form-create-_84fGzaM.js";const ee={class:"prompt"},le={class:"flex flex-col mt-30px"},ae={class:"mt-30px"},te={class:"text-14px color-#3e3e3e font-bold"},re={class:"mt-30px"},oe={class:"text-14px color-#3e3e3e font-bold"},se={class:"w-full mt-30px"},de=["onClick"],ie={class:"text-14px color-#3e3e3e font-bold"},ne={class:"flex justify-center mt-50px"},ue=W({__name:"index",props:{models:{type:Array,default:()=>[]}},emits:["onDrawStart","onDrawComplete"],setup(B,{expose:S,emit:q}){const j=H(),z=B,O=q,c=x(""),w=x(!1),b=x(""),k=x("dall-e-3"),h=x("1024x1024"),f=x("vivid"),E=async s=>{h.value=s.key},G=async()=>{const s=z.models.find(l=>l.model===k.value&&l.platform===C.OPENAI);if(s){await j.confirm("\u786E\u8BA4\u751F\u6210\u5185\u5BB9?");try{w.value=!0,O("onDrawStart",C.OPENAI);const l=_.find(m=>m.key===h.value),d={platform:C.OPENAI,prompt:c.value,modelId:s.id,style:f.value,width:l.width,height:l.height,options:{style:f.value}};await J.drawImage(d)}finally{O("onDrawComplete",C.OPENAI),w.value=!1}}else j.error("\u8BE5\u6A21\u578B\u4E0D\u53EF\u7528\uFF0C\u8BF7\u9009\u62E9\u5176\u5B83\u6A21\u578B")};return S({settingValues:async s=>{var d;c.value=s.prompt,k.value=s.model,f.value=(d=s.options)==null?void 0:d.style;const l=_.find(m=>m.key===`${s.width}x${s.height}`);await E(l)}}),(s,l)=>{const d=L,m=M,N=Q,g=R,P=T;return n(),u(y,null,[a("div",ee,[t(d,{tag:"b"},{default:r(()=>l[1]||(l[1]=[p("\u753B\u9762\u63CF\u8FF0")])),_:1}),t(d,{tag:"p"},{default:r(()=>l[2]||(l[2]=[p('\u5EFA\u8BAE\u4F7F\u7528"\u5F62\u5BB9\u8BCD + \u52A8\u8BCD + \u98CE\u683C"\u7684\u683C\u5F0F\uFF0C\u4F7F\u7528"\uFF0C"\u9694\u5F00')])),_:1}),t(m,{modelValue:o(c),"onUpdate:modelValue":l[0]||(l[0]=e=>X(c)?c.value=e:null),maxlength:"1024",rows:5,class:"w-100% mt-15px","input-style":"border-radius: 7px;",placeholder:"\u4F8B\u5982\uFF1A\u7AE5\u8BDD\u91CC\u7684\u5C0F\u5C4B\u5E94\u8BE5\u662F\u4EC0\u4E48\u6837\u5B50\uFF1F","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),a("div",le,[a("div",null,[t(d,{tag:"b"},{default:r(()=>l[3]||(l[3]=[p("\u968F\u673A\u70ED\u8BCD")])),_:1})]),t(g,{wrap:"",class:"flex flex-row flex-wrap justify-start mt-15px"},{default:r(()=>[(n(!0),u(y,null,I(o(U),e=>(n(),Y(N,{round:"",class:"m-0",type:o(b)===e?"primary":"default",key:e,onClick:A=>(async i=>{b.value!=i?(b.value=i,c.value=i):b.value=""})(e)},{default:r(()=>[p(v(e),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})]),a("div",ae,[a("div",null,[t(d,{tag:"b"},{default:r(()=>l[4]||(l[4]=[p("\u6A21\u578B\u9009\u62E9")])),_:1})]),t(g,{wrap:"",class:"mt-15px"},{default:r(()=>[(n(!0),u(y,null,I(o(F),e=>(n(),u("div",{class:D(o(k)===e.key?"w-110px overflow-hidden flex flex-col items-center border-3 border-solid border-#1293ff rounded-5px cursor-pointer":"w-110px overflow-hidden flex flex-col items-center border-3 border-solid border-transparent cursor-pointer"),key:e.key},[t(P,{src:e.image,fit:"contain",onClick:A=>(async i=>{k.value=i.key,i.key==="dall-e-3"?f.value="vivid":i.key==="dall-e-2"&&(f.value="natural");const V=_.find($=>i.key==="dall-e-3"&&$.key==="1024x1024"||i.key==="dall-e-2"&&$.key==="512x512");V&&(h.value=V.key)})(e)},null,8,["src","onClick"]),a("div",te,v(e.name),1)],2))),128))]),_:1})]),a("div",re,[a("div",null,[t(d,{tag:"b"},{default:r(()=>l[5]||(l[5]=[p("\u98CE\u683C\u9009\u62E9")])),_:1})]),t(g,{wrap:"",class:"mt-15px"},{default:r(()=>[(n(!0),u(y,null,I(o(K),e=>(n(),u("div",{class:D(o(f)===e.key?"w-110px overflow-hidden flex flex-col items-center border-3 border-solid border-#1293ff rounded-5px cursor-pointer":"w-110px overflow-hidden flex flex-col items-center border-3 border-solid border-transparent cursor-pointer"),key:e.key},[t(P,{src:e.image,fit:"contain",onClick:A=>(async i=>{f.value=i.key})(e)},null,8,["src","onClick"]),a("div",oe,v(e.name),1)],2))),128))]),_:1})]),a("div",se,[a("div",null,[t(d,{tag:"b"},{default:r(()=>l[6]||(l[6]=[p("\u753B\u9762\u6BD4\u4F8B")])),_:1})]),t(g,{wrap:"",class:"flex flex-row justify-between w-full mt-20px"},{default:r(()=>[(n(!0),u(y,null,I(o(_),e=>(n(),u("div",{class:"flex flex-col items-center cursor-pointer",key:e.key,onClick:A=>E(e)},[a("div",{class:D(o(h)===e.key?"flex flex-col items-center justify-center rounded-7px p-4px w-50px h-50px bg-white border-1 border-solid border-#1293ff":"flex flex-col items-center justify-center rounded-7px p-4px w-50px h-50px bg-white border-1 border-solid border-white")},[a("div",{style:Z(e.style)},null,4)],2),a("div",ie,v(e.name),1)],8,de))),128))]),_:1})]),a("div",ne,[t(N,{type:"primary",size:"large",round:"",loading:o(w),disabled:o(c).length===0,onClick:G},{default:r(()=>[p(v(o(w)?"\u751F\u6210\u4E2D":"\u751F\u6210\u5185\u5BB9"),1)]),_:1},8,["loading","disabled"])])],64)}}});export{ue as _};
