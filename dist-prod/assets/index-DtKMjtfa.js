import{X as v,d as A,a as B}from"./index-DmQdxAiK.js";import{_ as G}from"./ContentWrap.vue_vue_type_script_setup_true_lang-OPDE9cVe.js";import{_ as I}from"./index-C2x7yuaO.js";import{C as P}from"./CardTitle-BaQRDVCp.js";import{h as R,ad as S,aj as X,s as F,u as T,l as W,f as H,ak as K}from"./form-designer-DHHJWkD5.js";import{l as L,r as c,j as M,e as N,ag as O,m as _,q as i,J as e,B as l,C as g,A as b,u as s,E as Q,G as r,x as Y,I as Z}from"./form-create-_84fGzaM.js";const $={class:"flex items-center justify-between"},aa={key:0},ea=L({name:"CrmContractConfig",__name:"index",setup(ta){const w=A(),{t:h}=B(),o=c(!1),t=c({notifyEnabled:!1,notifyDays:void 0}),C=M({}),u=c(),f=async()=>{try{o.value=!0;const n=await(async()=>await v.get({url:"/crm/contract-config/get"}))();if(n===null)return;t.value=n}finally{o.value=!1}},E=async()=>{if(u&&await u.value.validate()){o.value=!0;try{const n=t.value;await(async a=>await v.put({url:"/crm/contract-config/save",data:a}))(n),w.success(h("common.updateSuccess")),await f(),o.value=!1}finally{o.value=!1}}},x=()=>{t.value.notifyEnabled||(t.value.notifyDays=void 0)};return N(()=>{f()}),(n,a)=>{const m=I,V=H,y=T,k=F,p=X,D=W,U=S,j=R,q=G,z=O("hasPermi"),J=K;return i(),_(Z,null,[e(m,{title:"\u3010\u5408\u540C\u3011\u5408\u540C\u7BA1\u7406\u3001\u5408\u540C\u63D0\u9192",url:"https://doc.iocoder.cn/crm/contract/"}),e(m,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),e(q,null,{default:l(()=>[g((i(),b(j,{ref_key:"formRef",ref:u,model:s(t),rules:s(C),"label-width":"160px"},{default:l(()=>[e(U,{shadow:"never"},{header:l(()=>[Y("div",$,[e(s(P),{title:"\u5408\u540C\u914D\u7F6E\u8BBE\u7F6E"}),g((i(),b(V,{type:"primary",onClick:E},{default:l(()=>a[2]||(a[2]=[r(" \u4FDD\u5B58 ")])),_:1})),[[z,["crm:contract-config:update"]]])])]),default:l(()=>[e(p,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:l(()=>[e(k,{modelValue:s(t).notifyEnabled,"onUpdate:modelValue":a[0]||(a[0]=d=>s(t).notifyEnabled=d),onChange:x,class:"ml-4"},{default:l(()=>[e(y,{value:!1,size:"large"},{default:l(()=>a[3]||(a[3]=[r("\u4E0D\u63D0\u9192")])),_:1}),e(y,{value:!0,size:"large"},{default:l(()=>a[4]||(a[4]=[r("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),s(t).notifyEnabled?(i(),_("div",aa,[e(p,null,{default:l(()=>[a[5]||(a[5]=r(" \u63D0\u524D ")),e(D,{class:"mx-2",modelValue:s(t).notifyDays,"onUpdate:modelValue":a[1]||(a[1]=d=>s(t).notifyDays=d)},null,8,["modelValue"]),a[6]||(a[6]=r(" \u5929\u63D0\u9192 "))]),_:1})])):Q("",!0)]),_:1})]),_:1},8,["model","rules"])),[[J,s(o)]])]),_:1})],64)}}});export{ea as default};
