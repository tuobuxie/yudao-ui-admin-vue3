import{d as Q,_ as W,D as X}from"./index-B2urM1q-.js";import{_ as ee}from"./Dialog.vue_vue_type_style_index_0_lang-bMayE4GC.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-Cj0jlW8o.js";import{_ as ae}from"./DictTag.vue_vue_type_script_lang-wg8pUI-B.js";import{_ as oe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BRGqERh7.js";import{l as te,r as p,j as re,A as s,q as n,B as o,J as l,u as t,Z as N,G as f,C as pe,h as R,m as z}from"./form-create-_84fGzaM.js";import{d as ue}from"./formatTime-BGPGB_ys.js";import{P as ie}from"./index-CHLLHQ4c.js";import{h as ne,aj as de,k as ce,f as se,Z as me,_ as fe,u as ve,al as ye,ak as _e}from"./form-designer-DHHJWkD5.js";const we={key:1},ge={key:1},he=te({name:"IoTProductTableSelect",__name:"ProductTableSelect",props:{multiple:{type:Boolean,default:!1}},emits:["success"],setup(k,{expose:B,emit:D}){const v=k,E=Q(),c=p(!1),I=p("\u4EA7\u54C1\u9009\u62E9\u5668"),j=p(!1),g=p(!0),x=p([]),V=p(0),d=p([]),m=p(),r=re({pageNo:1,pageSize:10,name:void 0,productKey:void 0}),C=p(),h=async()=>{g.value=!0;try{const u=await ie.getProductPage(r);x.value=u.list,V.value=u.total}finally{g.value=!1}},y=()=>{r.pageNo=1,h()},q=()=>{C.value.resetFields(),y()};B({open:async()=>{c.value=!0,d.value=[],m.value=void 0,await h()}});const P=p(),F=u=>{var e;v.multiple?(e=P.value)==null||e.toggleRowSelection(u):(m.value=u.id,d.value=[u])},O=u=>{v.multiple&&(d.value=u)},Z=D,A=async()=>{d.value.length!==0?(Z("success",v.multiple?d.value:d.value[0]),c.value=!1):E.warning(v.multiple?"\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u4EA7\u54C1":"\u8BF7\u9009\u62E9\u4E00\u4E2A\u4EA7\u54C1")};return(u,e)=>{const T=ce,b=de,K=W,_=se,G=ne,U=oe,i=fe,J=ve,Y=ae,S=ye,$=me,H=le,L=ee,M=_e;return n(),s(L,{title:t(I),modelValue:t(c),"onUpdate:modelValue":e[6]||(e[6]=a=>R(c)?c.value=a:null),appendToBody:!0,width:"60%"},{footer:o(()=>[l(_,{onClick:A,type:"primary",disabled:t(j)},{default:o(()=>e[10]||(e[10]=[f("\u786E \u5B9A")])),_:1},8,["disabled"]),l(_,{onClick:e[5]||(e[5]=a=>c.value=!1)},{default:o(()=>e[11]||(e[11]=[f("\u53D6 \u6D88")])),_:1})]),default:o(()=>[l(U,null,{default:o(()=>[l(G,{ref_key:"queryFormRef",ref:C,inline:!0,model:t(r),class:"-mb-15px","label-width":"68px"},{default:o(()=>[l(b,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"name"},{default:o(()=>[l(T,{modelValue:t(r).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(r).name=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0",onKeyup:N(y,["enter"])},null,8,["modelValue"])]),_:1}),l(b,{label:"ProductKey",prop:"productKey"},{default:o(()=>[l(T,{modelValue:t(r).productKey,"onUpdate:modelValue":e[1]||(e[1]=a=>t(r).productKey=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u6807\u8BC6",onKeyup:N(y,["enter"])},null,8,["modelValue"])]),_:1}),l(b,null,{default:o(()=>[l(_,{onClick:y},{default:o(()=>[l(K,{class:"mr-5px",icon:"ep:search"}),e[7]||(e[7]=f(" \u641C\u7D22 "))]),_:1}),l(_,{onClick:q},{default:o(()=>[l(K,{class:"mr-5px",icon:"ep:refresh"}),e[8]||(e[8]=f(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(U,null,{default:o(()=>[pe((n(),s($,{ref_key:"tableRef",ref:P,data:t(x),"show-overflow-tooltip":!0,stripe:!0,onRowClick:F,onSelectionChange:O},{default:o(()=>[k.multiple?(n(),s(i,{key:0,type:"selection",width:"55"})):(n(),s(i,{key:1,width:"55"},{default:o(a=>[l(J,{modelValue:t(m),"onUpdate:modelValue":e[2]||(e[2]=w=>R(m)?m.value=w:null),value:a.row.id,onChange:()=>{return w=a.row,void(d.value=[w]);var w}},{default:o(()=>e[9]||(e[9]=[f(" \xA0 ")])),_:2},1032,["modelValue","value","onChange"])]),_:1})),l(i,{align:"center",label:"\u540D\u79F0",prop:"name"}),l(i,{align:"center",label:"ProductKey",prop:"productKey"}),l(i,{align:"center",label:"\u54C1\u7C7B",prop:"categoryName"}),l(i,{align:"center",label:"\u8BBE\u5907\u7C7B\u578B",prop:"deviceType"},{default:o(a=>[l(Y,{type:t(X).IOT_PRODUCT_DEVICE_TYPE,value:a.row.deviceType},null,8,["type","value"])]),_:1}),l(i,{align:"center",label:"\u4EA7\u54C1\u56FE\u6807",prop:"icon"},{default:o(a=>[a.row.icon?(n(),s(S,{key:0,"preview-src-list":[a.row.icon],src:a.row.icon,class:"w-40px h-40px"},null,8,["preview-src-list","src"])):(n(),z("span",we,"-"))]),_:1}),l(i,{align:"center",label:"\u4EA7\u54C1\u56FE\u7247",prop:"picture"},{default:o(a=>[a.row.picUrl?(n(),s(S,{key:0,"preview-src-list":[a.row.picture],src:a.row.picUrl,class:"w-40px h-40px"},null,8,["preview-src-list","src"])):(n(),z("span",ge,"-"))]),_:1}),l(i,{formatter:t(ue),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"])]),_:1},8,["data"])),[[M,t(g)]]),l(H,{limit:t(r).pageSize,"onUpdate:limit":e[3]||(e[3]=a=>t(r).pageSize=a),page:t(r).pageNo,"onUpdate:page":e[4]||(e[4]=a=>t(r).pageNo=a),total:t(V),onPagination:h},null,8,["limit","page","total"])]),_:1})]),_:1},8,["title","modelValue"])}}});export{he as default};
