import{a as G,d as J,h as k,D as q,b as Y}from"./index-D_TWD7wt.js";import{_ as $}from"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";import{g as z,c as H,b as K}from"./index-Cftm-TQu.js";import{g as P}from"./index-DtNLj0dw.js";import{d as W}from"./tree-COGD3qag.js";import{g as X}from"./index-tmtszvF2.js";import{h as Z,i as ee,j as le,aj as ae,k as de,x as oe,Q as ue,m as te,F as se,ak as re,f as me}from"./form-designer-DHHJWkD5.js";import{l as ne,r as i,j as ie,A as f,q as r,B as a,C as pe,u as d,J as e,m as h,I as w,$ as I,G as S,h as ce}from"./form-create-_84fGzaM.js";const ve=ne({__name:"CustomerForm",emits:["success"],setup(fe,{expose:A,emit:E}){const{t:y}=G(),x=J(),c=i(!1),g=i(""),v=i(!1),_=i(""),C=i([]),R=i([]),u=i({id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0}),M=ie({name:[{required:!0,message:"\u5BA2\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),V=i();A({open:async(m,o)=>{if(c.value=!0,g.value=y("action."+m),_.value=m,O(),o){v.value=!0;try{u.value=await z(o)}finally{v.value=!1}}C.value=await P(),R.value=await X(),_.value==="create"&&(u.value.ownerUserId=Y().getUser.id)}});const N=E,Q=async()=>{if(V&&await V.value.validate()){v.value=!0;try{const m=u.value;_.value==="create"?(await H(m),x.success(y("common.createSuccess"))):(await K(m),x.success(y("common.updateSuccess"))),c.value=!1,N("success")}finally{v.value=!1}}},O=()=>{var m;u.value={id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0},(m=V.value)==null||m.resetFields()};return(m,o)=>{const n=de,t=ae,s=le,b=ue,U=oe,p=ee,j=te,D=se,F=Z,T=me,L=$,B=re;return r(),f(L,{modelValue:d(c),"onUpdate:modelValue":o[15]||(o[15]=l=>ce(c)?c.value=l:null),title:d(g)},{footer:a(()=>[e(T,{disabled:d(v),type:"primary",onClick:Q},{default:a(()=>o[16]||(o[16]=[S("\u786E \u5B9A")])),_:1},8,["disabled"]),e(T,{onClick:o[14]||(o[14]=l=>c.value=!1)},{default:a(()=>o[17]||(o[17]=[S("\u53D6 \u6D88")])),_:1})]),default:a(()=>[pe((r(),f(F,{ref_key:"formRef",ref:V,model:d(u),rules:d(M),"label-width":"100px"},{default:a(()=>[e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u540D\u79F0",prop:"name"},{default:a(()=>[e(n,{modelValue:d(u).name,"onUpdate:modelValue":o[0]||(o[0]=l=>d(u).name=l),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u6765\u6E90",prop:"source"},{default:a(()=>[e(U,{modelValue:d(u).source,"onUpdate:modelValue":o[1]||(o[1]=l=>d(u).source=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6765\u6E90",class:"w-1/1"},{default:a(()=>[(r(!0),h(w,null,I(d(k)(d(q).CRM_CUSTOMER_SOURCE),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u624B\u673A",prop:"mobile"},{default:a(()=>[e(n,{modelValue:d(u).mobile,"onUpdate:modelValue":o[2]||(o[2]=l=>d(u).mobile=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:a(()=>[e(U,{modelValue:d(u).ownerUserId,"onUpdate:modelValue":o[3]||(o[3]=l=>d(u).ownerUserId=l),disabled:d(_)!=="create",class:"w-1/1"},{default:a(()=>[(r(!0),h(w,null,I(d(R),l=>(r(),f(b,{key:l.id,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u7535\u8BDD",prop:"telephone"},{default:a(()=>[e(n,{modelValue:d(u).telephone,"onUpdate:modelValue":o[4]||(o[4]=l=>d(u).telephone=l),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u90AE\u7BB1",prop:"email"},{default:a(()=>[e(n,{modelValue:d(u).email,"onUpdate:modelValue":o[5]||(o[5]=l=>d(u).email=l),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5FAE\u4FE1",prop:"wechat"},{default:a(()=>[e(n,{modelValue:d(u).wechat,"onUpdate:modelValue":o[6]||(o[6]=l=>d(u).wechat=l),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"QQ",prop:"qq"},{default:a(()=>[e(n,{modelValue:d(u).qq,"onUpdate:modelValue":o[7]||(o[7]=l=>d(u).qq=l),placeholder:"\u8BF7\u8F93\u5165 QQ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u884C\u4E1A",prop:"industryId"},{default:a(()=>[e(U,{modelValue:d(u).industryId,"onUpdate:modelValue":o[8]||(o[8]=l=>d(u).industryId=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u884C\u4E1A",class:"w-1/1"},{default:a(()=>[(r(!0),h(w,null,I(d(k)(d(q).CRM_CUSTOMER_INDUSTRY),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5BA2\u6237\u7EA7\u522B",prop:"level"},{default:a(()=>[e(U,{modelValue:d(u).level,"onUpdate:modelValue":o[9]||(o[9]=l=>d(u).level=l),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u7EA7\u522B",class:"w-1/1"},{default:a(()=>[(r(!0),h(w,null,I(d(k)(d(q).CRM_CUSTOMER_LEVEL),l=>(r(),f(b,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u5730\u5740",prop:"areaId"},{default:a(()=>[e(j,{modelValue:d(u).areaId,"onUpdate:modelValue":o[10]||(o[10]=l=>d(u).areaId=l),options:d(C),props:d(W),class:"w-1/1",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u57CE\u5E02"},null,8,["modelValue","options","props"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u8BE6\u7EC6\u5730\u5740",prop:"detailAddress"},{default:a(()=>[e(n,{modelValue:d(u).detailAddress,"onUpdate:modelValue":o[11]||(o[11]=l=>d(u).detailAddress=l),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(s,{span:12},{default:a(()=>[e(t,{label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime"},{default:a(()=>[e(D,{modelValue:d(u).contactNextTime,"onUpdate:modelValue":o[12]||(o[12]=l=>d(u).contactNextTime=l),placeholder:"\u9009\u62E9\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",type:"datetime","value-format":"x",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(s,{span:12},{default:a(()=>[e(t,{label:"\u5907\u6CE8",prop:"remark"},{default:a(()=>[e(n,{type:"textarea",modelValue:d(u).remark,"onUpdate:modelValue":o[13]||(o[13]=l=>d(u).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[B,d(v)]])]),_:1},8,["modelValue","title"])}}});export{ve as _};
