import{_ as B}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{a as G,d as D,W as I}from"./index-DzK2S43K.js";import{z as J,f as L}from"./form-designer-DHHJWkD5.js";import{l as S,r,A as W,q as w,B as o,J as d,u as s,h as _,x as p,G as m}from"./form-create-_84fGzaM.js";const E=S({name:"InfraFileForm",__name:"FileForm",emits:["success"],setup(H,{expose:g,emit:h}){const{t:F}=G(),u=D(),t=r(!1),l=r(!1),i=r([]),f=r({path:""}),n=r(),{uploadUrl:b,httpRequest:x}=I();g({open:async()=>{t.value=!0,C()}});const y=a=>{f.value.path=a.name},q=(a,e)=>{e.percentage=a.percent},k=()=>{var a;i.value.length!=0?(l.value=!0,(a=s(n))==null||a.submit()):u.error("\u8BF7\u4E0A\u4F20\u6587\u4EF6")},U=h,V=()=>{var a;t.value=!1,l.value=!1,(a=s(n))==null||a.clearFiles(),u.success(F("common.createSuccess")),U("success")},j=()=>{u.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01"),l.value=!1},C=()=>{var a;l.value=!1,(a=n.value)==null||a.clearFiles()},R=()=>{u.error("\u6700\u591A\u53EA\u80FD\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6\uFF01")};return(a,e)=>{const z=J,v=L,A=B;return w(),W(A,{modelValue:s(t),"onUpdate:modelValue":e[2]||(e[2]=c=>_(t)?t.value=c:null),title:"\u4E0A\u4F20\u6587\u4EF6"},{footer:o(()=>[d(v,{disabled:s(l),type:"primary",onClick:k},{default:o(()=>e[6]||(e[6]=[m("\u786E \u5B9A")])),_:1},8,["disabled"]),d(v,{onClick:e[1]||(e[1]=c=>t.value=!1)},{default:o(()=>e[7]||(e[7]=[m("\u53D6 \u6D88")])),_:1})]),default:o(()=>[d(z,{ref_key:"uploadRef",ref:n,"file-list":s(i),"onUpdate:fileList":e[0]||(e[0]=c=>_(i)?i.value=c:null),action:s(b),"auto-upload":!1,data:s(f),disabled:s(l),limit:1,"on-change":y,"on-error":j,"on-exceed":R,"on-progress":q,"on-success":V,"http-request":s(x),accept:".jpg, .png, .gif",drag:""},{tip:o(()=>e[3]||(e[3]=[p("div",{class:"el-upload__tip",style:{color:"red"}}," \u63D0\u793A\uFF1A\u4EC5\u5141\u8BB8\u5BFC\u5165 jpg\u3001png\u3001gif \u683C\u5F0F\u6587\u4EF6\uFF01 ",-1)])),default:o(()=>[e[4]||(e[4]=p("i",{class:"el-icon-upload"},null,-1)),e[5]||(e[5]=p("div",{class:"el-upload__text"},[m(" \u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216 "),p("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1))]),_:1},8,["file-list","action","data","disabled","http-request"])]),_:1},8,["modelValue"])}}});export{E as _};
