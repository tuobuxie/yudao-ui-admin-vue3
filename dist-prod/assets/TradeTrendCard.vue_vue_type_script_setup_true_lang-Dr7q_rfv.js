import{H as f}from"./index-D_TWD7wt.js";import{_ as T}from"./Echart.vue_vue_type_script_setup_true_lang-kflkoiMg.js";import{s as M,t as D,ad as I,ax as r}from"./form-designer-DHHJWkD5.js";import{a as j}from"./trade-BjBChz2M.js";import{f as u}from"./formatTime-BGPGB_ys.js";import{C as V}from"./CardTitle-DicEWDzJ.js";import{l as G,r as k,j as H,e as L,A as C,q as c,B as p,J as v,u as h,x as _,h as q,m as B,I as J,$ as U,G as X,H as Z}from"./form-create-_84fGzaM.js";const $={class:"flex flex-row items-center justify-between"},z={class:"flex flex-row items-center gap-2"},E=G({name:"TradeTrendCard",__name:"TradeTrendCard",setup(F){const o=k(1),x=k(!0),b=new Map().set(1,{name:"30\u5929",series:[{name:"\u8BA2\u5355\u91D1\u989D",type:"bar",smooth:!0,data:[]},{name:"\u8BA2\u5355\u6570\u91CF",type:"line",smooth:!0,data:[]}]}).set(7,{name:"\u5468",series:[{name:"\u4E0A\u5468\u91D1\u989D",type:"bar",smooth:!0,data:[]},{name:"\u672C\u5468\u91D1\u989D",type:"bar",smooth:!0,data:[]},{name:"\u4E0A\u5468\u6570\u91CF",type:"line",smooth:!0,data:[]},{name:"\u672C\u5468\u6570\u91CF",type:"line",smooth:!0,data:[]}]}).set(30,{name:"\u6708",series:[{name:"\u4E0A\u6708\u91D1\u989D",type:"bar",smooth:!0,data:[]},{name:"\u672C\u6708\u91D1\u989D",type:"bar",smooth:!0,data:[]},{name:"\u4E0A\u6708\u6570\u91CF",type:"line",smooth:!0,data:[]},{name:"\u672C\u6708\u6570\u91CF",type:"line",smooth:!0,data:[]}]}).set(365,{name:"\u5E74",series:[{name:"\u53BB\u5E74\u91D1\u989D",type:"bar",smooth:!0,data:[]},{name:"\u4ECA\u5E74\u91D1\u989D",type:"bar",smooth:!0,data:[]},{name:"\u53BB\u5E74\u6570\u91CF",type:"line",smooth:!0,data:[]},{name:"\u4ECA\u5E74\u6570\u91CF",type:"line",smooth:!0,data:[]}]}),d=H({grid:{left:20,right:20,bottom:20,top:80,containLabel:!0},legend:{top:50,data:[]},series:[],toolbox:{feature:{dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u8BA2\u5355\u91CF\u8D8B\u52BF"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},xAxis:{type:"category",inverse:!0,boundaryGap:!1,axisTick:{show:!1},data:[],axisLabel:{formatter:e=>{switch(o.value){case 1:return u(e,"MM-DD");case 7:let t=u(e,"ddd");return t=="0"&&(t="\u65E5"),"\u5468"+t;case 30:return u(e,"D");case 365:return u(e,"M")+"\u6708";default:return e}}}},yAxis:{axisTick:{show:!1}}}),g=async()=>{let e,t;switch(o.value){case 7:e=r().startOf("week"),t=r().endOf("week");break;case 30:e=r().startOf("month"),t=r().endOf("month");break;case 365:e=r().startOf("year"),t=r().endOf("year");break;default:e=r().subtract(30,"day").startOf("d"),t=r().endOf("d")}await A(e,t)},A=async(e,t)=>{var i,n,l,w,P,O;x.value=!0;const y=await j(o.value,e,t),m=[],s=[...b.get(o.value).series];for(let a of y)m.push(a.value.date),s.length===2?(s[0].data.push(f(((i=a==null?void 0:a.value)==null?void 0:i.orderPayPrice)||0)),s[1].data.push(((n=a==null?void 0:a.value)==null?void 0:n.orderPayCount)||0)):(s[0].data.push(f(((l=a==null?void 0:a.reference)==null?void 0:l.orderPayPrice)||0)),s[1].data.push(f(((w=a==null?void 0:a.value)==null?void 0:w.orderPayPrice)||0)),s[2].data.push(((P=a==null?void 0:a.reference)==null?void 0:P.orderPayCount)||0),s[3].data.push(((O=a==null?void 0:a.value)==null?void 0:O.orderPayCount)||0));d.xAxis.data=m,d.series=s,d.legend.data=s.map(a=>a.name),x.value=!1};return L(()=>{g()}),(e,t)=>{const y=D,m=M,s=T,i=I;return c(),C(i,{shadow:"never"},{header:p(()=>[_("div",$,[v(h(V),{title:"\u4EA4\u6613\u91CF\u8D8B\u52BF"}),_("div",z,[v(m,{modelValue:h(o),"onUpdate:modelValue":t[0]||(t[0]=n=>q(o)?o.value=n:null),onChange:g},{default:p(()=>[(c(!0),B(J,null,U(h(b).entries(),([n,l])=>(c(),C(y,{key:n,value:n},{default:p(()=>[X(Z(l.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),default:p(()=>[v(s,{height:300,options:h(d)},null,8,["options"])]),_:1})}}});export{E as _};
