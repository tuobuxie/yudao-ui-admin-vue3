import{a as M,d as Q,h as P,D as _,aw as W,$ as D,aD as z}from"./index-DzK2S43K.js";import{_ as X}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{C as A,D as N,P as k}from"./index-xDnKc7mk.js";import{P as Z}from"./index-C7F2yhqp.js";import{h as ee,aj as le,k as ae,f as de,x as oe,Q as ue,s as te,u as re,ab as ie,ac as pe,ak as ce}from"./form-designer-DHHJWkD5.js";import{l as se,r as n,j as ne,A as c,q as t,B as d,C as me,u as e,J as u,E as ye,G as y,m as v,I as b,$ as f,H as E,h as ve}from"./form-create-_84fGzaM.js";const be=se({name:"IoTProductForm",__name:"ProductForm",emits:["success"],setup(fe,{expose:Y,emit:F}){const{t:T}=M(),K=Q(),s=n(!1),C=n(""),m=n(!1),p=n(""),o=n({id:void 0,name:void 0,productKey:"",categoryId:void 0,icon:void 0,picUrl:void 0,description:void 0,deviceType:void 0,locationType:void 0,netType:void 0,codecType:A.ALINK}),L=ne({productKey:[{required:!0,message:"ProductKey \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],categoryId:[{required:!0,message:"\u4EA7\u54C1\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],deviceType:[{required:!0,message:"\u8BBE\u5907\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],locationType:[{required:!0,message:"\u5B9A\u4F4D\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],netType:[{required:!0,message:"\u8054\u7F51\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],codecType:[{required:!0,message:"\u6570\u636E\u683C\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),g=n(),w=n([]);Y({open:async(i,a)=>{if(s.value=!0,C.value=T("action."+i),p.value=i,j(),a){m.value=!0;try{o.value=await k.getProduct(a)}finally{m.value=!1}}else x();w.value=await Z.getSimpleProductCategoryList()},close:()=>s.value=!1});const G=F,S=async()=>{await g.value.validate(),m.value=!0;try{const i=o.value;p.value==="create"?(await k.createProduct(i),K.success(T("common.createSuccess"))):(await k.updateProduct(i),K.success(T("common.updateSuccess"))),s.value=!1,G("success")}finally{m.value=!1}},j=()=>{var i;o.value={id:void 0,name:void 0,productKey:"",categoryId:void 0,icon:void 0,picUrl:void 0,description:void 0,deviceType:void 0,locationType:void 0,netType:void 0,codecType:A.ALINK},(i=g.value)==null||i.resetFields()},x=()=>{o.value.productKey=z(16)};return(i,a)=>{const V=de,h=ae,r=le,q=ue,O=oe,I=re,U=te,R=pe,$=ie,B=ee,H=X,J=ce;return t(),c(H,{title:e(C),modelValue:e(s),"onUpdate:modelValue":a[11]||(a[11]=l=>ve(s)?s.value=l:null)},{footer:d(()=>[u(V,{onClick:S,type:"primary",disabled:e(m)},{default:d(()=>a[13]||(a[13]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),u(V,{onClick:a[10]||(a[10]=l=>s.value=!1)},{default:d(()=>a[14]||(a[14]=[y("\u53D6 \u6D88")])),_:1})]),default:d(()=>[me((t(),c(B,{ref_key:"formRef",ref:g,model:e(o),rules:e(L),"label-width":"110px"},{default:d(()=>[u(r,{label:"ProductKey",prop:"productKey"},{default:d(()=>[u(h,{modelValue:e(o).productKey,"onUpdate:modelValue":a[0]||(a[0]=l=>e(o).productKey=l),placeholder:"\u8BF7\u8F93\u5165 ProductKey",readonly:e(p)==="update"},{append:d(()=>[u(V,{onClick:x,disabled:e(p)==="update"},{default:d(()=>a[12]||(a[12]=[y(" \u91CD\u65B0\u751F\u6210 ")])),_:1},8,["disabled"])]),_:1},8,["modelValue","readonly"])]),_:1}),u(r,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"name"},{default:d(()=>[u(h,{modelValue:e(o).name,"onUpdate:modelValue":a[1]||(a[1]=l=>e(o).name=l),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u4EA7\u54C1\u5206\u7C7B",prop:"categoryId"},{default:d(()=>[u(O,{modelValue:e(o).categoryId,"onUpdate:modelValue":a[2]||(a[2]=l=>e(o).categoryId=l),placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u5206\u7C7B",clearable:""},{default:d(()=>[(t(!0),v(b,null,f(e(w),l=>(t(),c(q,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u8BBE\u5907\u7C7B\u578B",prop:"deviceType"},{default:d(()=>[u(U,{modelValue:e(o).deviceType,"onUpdate:modelValue":a[3]||(a[3]=l=>e(o).deviceType=l),disabled:e(p)==="update"},{default:d(()=>[(t(!0),v(b,null,f(e(P)(e(_).IOT_PRODUCT_DEVICE_TYPE),l=>(t(),c(I,{key:l.value,label:l.value},{default:d(()=>[y(E(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),[e(N).DEVICE,e(N).GATEWAY].includes(e(o).deviceType)?(t(),c(r,{key:0,label:"\u8054\u7F51\u65B9\u5F0F",prop:"netType"},{default:d(()=>[u(O,{modelValue:e(o).netType,"onUpdate:modelValue":a[4]||(a[4]=l=>e(o).netType=l),placeholder:"\u8BF7\u9009\u62E9\u8054\u7F51\u65B9\u5F0F",disabled:e(p)==="update"},{default:d(()=>[(t(!0),v(b,null,f(e(P)(e(_).IOT_NET_TYPE),l=>(t(),c(q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})):ye("",!0),u(r,{label:"\u5B9A\u4F4D\u7C7B\u578B",prop:"locationType"},{default:d(()=>[u(U,{modelValue:e(o).locationType,"onUpdate:modelValue":a[5]||(a[5]=l=>e(o).locationType=l),disabled:e(p)==="update"},{default:d(()=>[(t(!0),v(b,null,f(e(P)(e(_).IOT_LOCATION_TYPE),l=>(t(),c(I,{key:l.value,label:l.value},{default:d(()=>[y(E(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),u(r,{label:"\u6570\u636E\u683C\u5F0F",prop:"codecType"},{default:d(()=>[u(U,{modelValue:e(o).codecType,"onUpdate:modelValue":a[6]||(a[6]=l=>e(o).codecType=l),disabled:e(p)==="update"},{default:d(()=>[(t(!0),v(b,null,f(e(W)(e(_).IOT_CODEC_TYPE),l=>(t(),c(I,{key:l.value,label:l.value},{default:d(()=>[y(E(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),u($,null,{default:d(()=>[u(R,{title:"\u66F4\u591A\u914D\u7F6E"},{default:d(()=>[u(r,{label:"\u4EA7\u54C1\u56FE\u6807",prop:"icon"},{default:d(()=>[u(e(D),{modelValue:e(o).icon,"onUpdate:modelValue":a[7]||(a[7]=l=>e(o).icon=l),height:"80px",width:"80px"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u4EA7\u54C1\u56FE\u7247",prop:"picUrl"},{default:d(()=>[u(e(D),{modelValue:e(o).picUrl,"onUpdate:modelValue":a[8]||(a[8]=l=>e(o).picUrl=l),height:"120px",width:"120px"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u4EA7\u54C1\u63CF\u8FF0",prop:"description"},{default:d(()=>[u(h,{type:"textarea",modelValue:e(o).description,"onUpdate:modelValue":a[9]||(a[9]=l=>e(o).description=l),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[J,e(m)]])]),_:1},8,["title","modelValue"])}}});export{be as _};
