import{_ as E}from"./index-DmQdxAiK.js";import{n as C}from"./form-designer-DHHJWkD5.js";import{l as M,r as m,c as q,m as n,q as a,I as u,E as A,J as g,x as t,G as v,$ as b,u as d,H as o,B as h,h as B}from"./form-create-_84fGzaM.js";const j={key:0,class:"mt-10px p-10px rounded-8px bg-[#f5f5f5]"},G={class:"text-14px text-[#666] mb-8px flex items-center"},H={class:"flex flex-wrap gap-8px"},J=["onClick"],K={class:"text-14px text-[#333] mb-4px"},N={class:"text-12px text-[#999] ml-4px"},R={class:"text-16px font-bold mb-12px"},U={class:"max-h-[60vh] overflow-y-auto"},$={class:"block mb-8px px-8px py-2px bg-[#f5f5f5] rounded-4px text-12px text-[#666] w-fit"},z={class:"text-14px leading-[1.6] text-[#333] mt-[10px]"},D=M({__name:"MessageKnowledge",props:{segments:{}},setup(k){const f=k,x=m(null),p=m(!1),w=m(),y=q(()=>{if(!f.segments)return[];const l=new Map;return f.segments.forEach(e=>{l.has(e.documentId)||l.set(e.documentId,{id:e.documentId,title:e.documentName,segments:[]}),l.get(e.documentId).segments.push({id:e.id,content:e.content})}),Array.from(l.values())});return(l,e)=>{const _=E,I=C;return a(),n(u,null,[l.segments&&l.segments.length>0?(a(),n("div",j,[t("div",G,[g(_,{icon:"ep:document",class:"mr-5px"}),e[1]||(e[1]=v(" \u77E5\u8BC6\u5F15\u7528 "))]),t("div",H,[(a(!0),n(u,null,b(d(y),(s,r)=>(a(),n("div",{key:r,class:"p-8px px-12px bg-white rounded-6px cursor-pointer transition-all hover:bg-[#e6f4ff]",onClick:i=>(c=>{x.value=c,p.value=!0})(s)},[t("div",K,[v(o(s.title)+" ",1),t("span",N,"\uFF08"+o(s.segments.length)+" \u6761\uFF09",1)])],8,J))),128))])])):A("",!0),g(I,{visible:d(p),"onUpdate:visible":e[0]||(e[0]=s=>B(p)?p.value=s:null),width:600,trigger:"click",placement:"top-start",offset:55,"popper-class":"knowledge-popover"},{reference:h(()=>[t("div",{ref_key:"documentRef",ref:w},null,512)]),default:h(()=>{var s,r;return[t("div",R,o((s=d(x))==null?void 0:s.title),1),t("div",U,[(a(!0),n(u,null,b((r=d(x))==null?void 0:r.segments,(i,c)=>(a(),n("div",{key:c,class:"p-12px border-b-solid border-b-[#eee] last:border-b-0"},[t("div",$," \u5206\u6BB5 "+o(i.id),1),t("div",z,o(i.content),1)]))),128))])]}),_:1},8,["visible"])],64)}}});export{D as _};
