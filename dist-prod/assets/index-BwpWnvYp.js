import{u as h,e as D,d as P}from"./index-DzK2S43K.js";import{P as R}from"./index-xDnKc7mk.js";import{D as V}from"./index-BrWsOwLz.js";import{_ as b}from"./ProductDetailsHeader.vue_vue_type_script_setup_true_lang-Bnni3XxN.js";import{_ as C}from"./ProductDetailsInfo.vue_vue_type_script_setup_true_lang-04wOmh4P.js";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-Bn0OxtQL.js";import{u as M}from"./tagsView-CKM4YfGJ.js";import{I as x}from"./constants-DGDXM-Iq.js";import{a0 as T,$ as j,j as q}from"./form-designer-DHHJWkD5.js";import{l as E,r as p,e as J,u as o,m as U,q as f,J as r,B as m,h as k,A as z,E as A,I as B,p as O}from"./form-create-_84fGzaM.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import"./ProductForm.vue_vue_type_script_setup_true_lang-iCrVgm3K.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./index-C7F2yhqp.js";import"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import"./formatTime-BGPGB_ys.js";import"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import"./index-CeJe158m.js";import"./ThingModelForm.vue_vue_type_script_setup_true_lang-Bi0wk9c3.js";import"./ThingModelProperty-BL86FARN.js";import"./ThingModelEnumDataSpecs-D6rLtDpz.js";import"./ThingModelNumberDataSpecs-CFOHDcmO.js";import"./ThingModelService-DD422d86.js";import"./ThingModelInputOutputParam-COWd0GyT.js";import"./ThingModelEvent-CP2hSK2q.js";import"./ThingModelTSL.vue_vue_type_script_setup_true_lang-CZGiKYEI.js";import"./JsonEditor-C_28o7Cb.js";import"./index-DWAKVBMX.js";import"./json-D1vBrYzr.js";import"./DataDefinition.vue_vue_type_script_setup_true_lang-Ej2CCADM.js";const S=E({name:"IoTProductDetail",__name:"index",setup($){const{delView:c}=M(),{currentRoute:v}=h(),s=D(),y=P(),l=s.params.id,u=p(!0),a=p({}),e=p("info");O(x.PRODUCT,a);const d=async i=>{u.value=!0;try{a.value=await R.getProduct(i)}finally{u.value=!1}};return J(async()=>{if(!l)return y.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u4EA7\u54C1\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void c(o(v));await d(l);const{tab:i}=s.query;i&&(e.value=i),a.value.id&&(a.value.deviceCount=await(async t=>{try{return await V.getDeviceCount(t)}catch{return 0}})(a.value.id))}),(i,t)=>{const n=j,_=T,g=q;return f(),U(B,null,[r(b,{loading:o(u),product:o(a),onRefresh:t[0]||(t[0]=()=>d(o(l)))},null,8,["loading","product"]),r(g,null,{default:m(()=>[r(_,{modelValue:o(e),"onUpdate:modelValue":t[1]||(t[1]=w=>k(e)?e.value=w:null)},{default:m(()=>[r(n,{label:"\u4EA7\u54C1\u4FE1\u606F",name:"info"},{default:m(()=>[o(e)==="info"?(f(),z(C,{key:0,product:o(a)},null,8,["product"])):A("",!0)]),_:1}),r(n,{label:"\u7269\u6A21\u578B\uFF08\u529F\u80FD\u5B9A\u4E49\uFF09",lazy:"",name:"thingModel"},{default:m(()=>[r(I,{ref:"thingModelRef"},null,512)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}});export{S as default};
