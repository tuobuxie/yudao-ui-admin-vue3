import G from"./Left-Du9SInHE.js";import h from"./Right-C3jFCqBU.js";import{A as w}from"./index-DNyw9UFT.js";import{j as x}from"./constants-CHvLs4wt.js";import{d as S}from"./index-D_TWD7wt.js";import{l as _,r as t,e as y,m as A,q as E,J as d,u as n,n as j}from"./form-create-_84fGzaM.js";import"./form-designer-DHHJWkD5.js";import"./index-CY7R6inO.js";import"./download-oWiM5xVU.js";import"./fetch-D5K_4anA.js";const k={class:"absolute top-0 left-0 right-0 bottom-0 flex"},J=_({name:"AiMindMap",__name:"index",setup(R){const s=t(),l=t(!1),i=t(!1),o=t(!0),p=S(),e=t(""),m=t(),v=t(),g=a=>{o.value=!1,e.value=a,o.value=!0},u=()=>{var a;l.value=!1,i.value=!1,(a=s.value)==null||a.abort()},c=a=>{l.value=!0,i.value=!0,o.value=!1,s.value=new AbortController,e.value="",w.generateMindMap({data:a,onMessage:async r=>{var f;const{code:b,data:C,msg:M}=JSON.parse(r.data);if(b!==0)return p.alert(`\u751F\u6210\u601D\u7EF4\u5BFC\u56FE\u5F02\u5E38! ${M}`),void u();e.value=e.value+C,await j(),(f=v.value)==null||f.scrollBottom()},onClose(){var r;o.value=!0,(r=m.value)==null||r.setGeneratedContent(e.value),u()},onError(r){throw u(),error},ctrl:s.value})};return y(()=>{e.value=x}),(a,r)=>(E(),A("div",k,[d(G,{ref_key:"leftRef",ref:m,"is-generating":n(l),onSubmit:c,onDirectGenerate:g},null,8,["is-generating"]),d(h,{ref_key:"rightRef",ref:v,generatedContent:n(e),isEnd:n(o),isGenerating:n(l),isStart:n(i)},null,8,["generatedContent","isEnd","isGenerating","isStart"])]))}});export{J as default};
