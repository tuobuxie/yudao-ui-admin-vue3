import{a as j,d as D,_ as B}from"./index-DzK2S43K.js";import{_ as G}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{g as J,c as L,u as M}from"./index-CscvvQ0V.js";import{h as R,aj as z,k as E,o as H,ak as N,f as O}from"./form-designer-DHHJWkD5.js";import{l as P,r as m,j as Q,A as q,q as I,B as o,C as T,u as a,J as l,x as _,G as c,h as W}from"./form-create-_84fGzaM.js";const X=P({name:"MpAccountForm",__name:"AccountForm",emits:["success"],setup(Y,{expose:S,emit:h}){const{t:f}=j(),g=D(),n=m(!1),k=m(""),s=m(!1),b=m(""),t=m({id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""}),x=Q({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],account:[{required:!0,message:"\u516C\u4F17\u53F7\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appId:[{required:!0,message:"\u516C\u4F17\u53F7 appId \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appSecret:[{required:!0,message:"\u516C\u4F17\u53F7\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],token:[{required:!0,message:"\u516C\u4F17\u53F7 token \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),i=m();S({open:async(u,e)=>{if(n.value=!0,k.value=f("action."+u),b.value=u,A(),e){s.value=!0;try{t.value=await J(e)}finally{s.value=!1}}}});const w=h,U=async()=>{if(i&&await i.value.validate()){s.value=!0;try{const u=t.value;b.value==="create"?(await L(u),g.success(f("common.createSuccess"))):(await M(u),g.success(f("common.updateSuccess"))),n.value=!1,w("success")}finally{s.value=!1}}},A=()=>{var u;t.value={id:void 0,name:"",account:"",appId:"",appSecret:"",token:"",aesKey:"",remark:""},(u=i.value)==null||u.resetFields()};return(u,e)=>{const r=E,d=z,V=B,v=H,K=R,y=O,C=G,F=N;return I(),q(C,{modelValue:a(n),"onUpdate:modelValue":e[8]||(e[8]=p=>W(n)?n.value=p:null),title:a(k)},{footer:o(()=>[l(y,{disabled:a(s),type:"primary",onClick:U},{default:o(()=>e[12]||(e[12]=[c("\u786E \u5B9A")])),_:1},8,["disabled"]),l(y,{onClick:e[7]||(e[7]=p=>n.value=!1)},{default:o(()=>e[13]||(e[13]=[c("\u53D6 \u6D88")])),_:1})]),default:o(()=>[T((I(),q(K,{ref_key:"formRef",ref:i,model:a(t),rules:a(x),"label-width":"120px"},{default:o(()=>[l(d,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[l(r,{modelValue:a(t).name,"onUpdate:modelValue":e[0]||(e[0]=p=>a(t).name=p),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5FAE\u4FE1\u53F7",prop:"account"},{label:o(()=>[_("span",null,[l(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u8D26\u53F7\u8BE6\u60C5] \u4E2D\u80FD\u627E\u5230\u300C\u5FAE\u4FE1\u53F7\u300D",placement:"top"},{default:o(()=>[l(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[9]||(e[9]=c(" \u5FAE\u4FE1\u53F7 "))])]),default:o(()=>[l(r,{modelValue:a(t).account,"onUpdate:modelValue":e[1]||(e[1]=p=>a(t).account=p),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u53F7"},null,8,["modelValue"])]),_:1}),l(d,{label:"appId",prop:"appId"},{label:o(()=>[_("span",null,[l(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005ID(AppID)\u300D",placement:"top"},{default:o(()=>[l(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[10]||(e[10]=c(" appId "))])]),default:o(()=>[l(r,{modelValue:a(t).appId,"onUpdate:modelValue":e[2]||(e[2]=p=>a(t).appId=p),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7 appId"},null,8,["modelValue"])]),_:1}),l(d,{label:"appSecret",prop:"appSecret"},{label:o(()=>[_("span",null,[l(v,{content:"\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\uFF08mp.weixin.qq.com\uFF09\u7684\u83DC\u5355 [\u8BBE\u7F6E\u4E0E\u5F00\u53D1 - \u516C\u4F17\u53F7\u8BBE\u7F6E - \u57FA\u672C\u8BBE\u7F6E] \u4E2D\u80FD\u627E\u5230\u300C\u5F00\u53D1\u8005\u5BC6\u7801(AppSecret)\u300D",placement:"top"},{default:o(()=>[l(V,{icon:"ep:question-filled",style:{"vertical-align":"middle"}})]),_:1}),e[11]||(e[11]=c(" appSecret "))])]),default:o(()=>[l(r,{modelValue:a(t).appSecret,"onUpdate:modelValue":e[3]||(e[3]=p=>a(t).appSecret=p),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7 appSecret"},null,8,["modelValue"])]),_:1}),l(d,{label:"token",prop:"token"},{default:o(()=>[l(r,{modelValue:a(t).token,"onUpdate:modelValue":e[4]||(e[4]=p=>a(t).token=p),placeholder:"\u8BF7\u8F93\u5165\u516C\u4F17\u53F7token"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u6D88\u606F\u52A0\u89E3\u5BC6\u5BC6\u94A5",prop:"aesKey"},{default:o(()=>[l(r,{modelValue:a(t).aesKey,"onUpdate:modelValue":e[5]||(e[5]=p=>a(t).aesKey=p),placeholder:"\u8BF7\u8F93\u5165\u6D88\u606F\u52A0\u89E3\u5BC6\u5BC6\u94A5"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[l(r,{modelValue:a(t).remark,"onUpdate:modelValue":e[6]||(e[6]=p=>a(t).remark=p),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[F,a(s)]])]),_:1},8,["modelValue","title"])}}});export{X as _};
