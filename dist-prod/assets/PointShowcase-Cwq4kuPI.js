import{p as v,Q as I,_ as S,K as h,c as K}from"./index-DmQdxAiK.js";import{l as q,c as B,r as b,b as E,m as n,q as t,x as m,J as s,A as L,E as N,I as g,$ as R,B as V,C as T,K as U,u as _}from"./form-create-_84fGzaM.js";import{_ as j}from"./PointTableSelect.vue_vue_type_script_setup_true_lang-Cso6-Et6.js";import{P as J}from"./index-BSu1aFKy.js";import{al as M,o as Q}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-OPDE9cVe.js";import"./index.vue_vue_type_script_setup_true_lang-OyXbUoED.js";import"./DictTag.vue_vue_type_script_lang-DiMRMEpR.js";import"./formatter-npOVkfGw.js";import"./formatTime-BGPGB_ys.js";const X={class:"flex flex-wrap items-center gap-8px"},$={class:"relative h-full w-full"},z=K(q({name:"PointShowcase",__name:"PointShowcase",props:{modelValue:I([Number,Array]).isRequired,limit:v.number.def(Number.MAX_VALUE),disabled:v.bool.def(!1)},emits:["update:modelValue","change"],setup(o,{emit:y}){const a=o,x=B(()=>!a.disabled&&(!a.limit||l.value.length<a.limit)),l=b([]);E(()=>a.modelValue,async()=>{const e=h(a.modelValue)?a.modelValue:a.modelValue?[a.modelValue]:[];e.length!==0?(l.value.length===0||l.value.some(r=>!e.includes(r.id)))&&(l.value=await J.getPointActivityListByIds(e)):l.value=[]},{immediate:!0});const c=b(),k=()=>{c.value.open(l.value)},w=e=>{l.value=h(e)?e:[e],d()},i=y,d=()=>{if(a.limit===1){const e=l.value.length>0?l.value[0]:null;i("update:modelValue",(e==null?void 0:e.id)||0),i("change",e)}else i("update:modelValue",l.value.map(e=>e.id)),i("change",l.value)};return(e,r)=>{const A=M,p=S,f=Q;return t(),n(g,null,[m("div",X,[(t(!0),n(g,null,R(_(l),(u,C)=>(t(),n("div",{key:u.id,class:"select-box spu-pic"},[s(f,{content:u.name},{default:V(()=>[m("div",$,[s(A,{src:u.picUrl,class:"h-full w-full"},null,8,["src"]),T(s(p,{class:"del-icon",icon:"ep:circle-close-filled",onClick:D=>(P=>{l.value.splice(P,1),d()})(C)},null,8,["onClick"]),[[U,!o.disabled]])])]),_:2},1032,["content"])]))),128)),_(x)?(t(),L(f,{key:0,content:"\u9009\u62E9\u6D3B\u52A8"},{default:V(()=>[m("div",{class:"select-box",onClick:k},[s(p,{icon:"ep:plus"})])]),_:1})):N("",!0)]),s(j,{ref_key:"pointActivityTableSelectRef",ref:c,multiple:o.limit!=1,onChange:w},null,8,["multiple"])],64)}}}),[["__scopeId","data-v-3580af69"]]);export{z as default};
