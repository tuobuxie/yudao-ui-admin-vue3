import{d as V,u as j,e as x}from"./index-D_TWD7wt.js";import{_ as M,g as N}from"./index-Bjdg_kCb.js";import{u as T}from"./tagsView-CwT_HwtR.js";import{b as D}from"./index-CTGasmWI.js";import{_ as G}from"./ReceivablePlanDetailsHeader.vue_vue_type_script_setup_true_lang-pSqga1u_.js";import{_ as J}from"./ReceivablePlanDetailsInfo.vue_vue_type_script_setup_true_lang-BALaa5A0.js";import{_ as Q}from"./PermissionList.vue_vue_type_script_setup_true_lang-TMOVSfdL.js";import{B as w}from"./index-VdMMiVod.js";import{_ as h}from"./ReceivablePlanForm.vue_vue_type_script_setup_true_lang-Ce5536dm.js";import{ak as q,f as F,a0 as K,$ as S,j as W}from"./form-designer-DHHJWkD5.js";import{l as $,r as o,e as H,m as O,q as u,C as U,J as e,u as a,A as C,B as r,E as X,G as Y,I as Z}from"./form-create-_84fGzaM.js";import"./formatTime-BGPGB_ys.js";import"./ContentWrap.vue_vue_type_script_setup_true_lang-4_WNC8um.js";import"./DictTag.vue_vue_type_script_lang-BD_Qe0UA.js";import"./PermissionForm.vue_vue_type_script_setup_true_lang-CNiXc62E.js";import"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";import"./index-tmtszvF2.js";import"./index-Cftm-TQu.js";import"./index-DWOJJ8tv.js";const aa=$({name:"CrmReceivablePlanDetail",__name:"index",setup(ea){const E=V(),p=o(0),s=o(!0),t=o({}),f=o(),d=async l=>{s.value=!0;try{t.value=await D(l),await z(l)}finally{s.value=!1}},_=o(),b=o([]),z=async l=>{if(!l)return;const i=await N({bizType:w.CRM_RECEIVABLE_PLAN,bizId:l});b.value=i.list},{delView:A}=T(),{currentRoute:k}=j(),c=()=>{A(a(k))},{params:v}=x();return H(async()=>{if(!v.id)return E.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u8BA1\u5212\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void c();p.value=v.id,await d(p.value)}),(l,i)=>{const L=F,m=S,g=M,B=K,I=W,P=q;return u(),O(Z,null,[U((u(),C(G,{"receivable-plan":a(t)},{default:r(()=>{var n;return[(n=a(f))!=null&&n.validateWrite?(u(),C(L,{key:0,onClick:i[0]||(i[0]=ia=>{return y="update",R=a(t).id,void _.value.open(y,R);var y,R})},{default:r(()=>i[2]||(i[2]=[Y(" \u7F16\u8F91 ")])),_:1})):X("",!0)]}),_:1},8,["receivable-plan"])),[[P,a(s)]]),e(I,null,{default:r(()=>[e(B,null,{default:r(()=>[e(m,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:r(()=>[e(J,{"receivable-plan":a(t)},null,8,["receivable-plan"])]),_:1}),e(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:r(()=>[e(g,{"log-list":a(b)},null,8,["log-list"])]),_:1}),e(m,{label:"\u56E2\u961F\u6210\u5458"},{default:r(()=>[e(Q,{ref_key:"permissionListRef",ref:f,"biz-id":a(t).id,"biz-type":a(w).CRM_RECEIVABLE_PLAN,"show-action":!0,onQuitTeam:c},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),e(h,{ref_key:"formRef",ref:_,onSuccess:i[1]||(i[1]=n=>d(a(t).id))},null,512)],64)}}});export{aa as default};
