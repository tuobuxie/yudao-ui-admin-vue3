import{X as g,d as S,a as A}from"./index-DzK2S43K.js";import{_ as B}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as G}from"./index-RnHrue4c.js";import{C as I}from"./CardTitle-DbupmRpB.js";import{h as X,ad as F,aj as H,s as K,u as T,l as W,f as L,ak as M}from"./form-designer-DHHJWkD5.js";import{l as N,r as y,j as O,e as Q,ag as Y,m as p,q as r,J as l,B as t,C as E,A as x,u as o,E as V,G as u,x as Z,I as $}from"./form-create-_84fGzaM.js";const ee={class:"flex items-center justify-between"},ae={key:0},le={key:0},oe=N({name:"CrmCustomerPoolConfig",__name:"index",setup(te){const D=S(),{t:h}=A(),d=y(!1),a=y({enabled:!1,contactExpireDays:void 0,dealExpireDays:void 0,notifyEnabled:!1,notifyDays:void 0}),w=O({enabled:[{required:!0,message:"\u662F\u5426\u542F\u7528\u5BA2\u6237\u516C\u6D77\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=y(),v=async()=>{try{d.value=!0;const n=await(async()=>await g.get({url:"/crm/customer-pool-config/get"}))();if(n===null)return;a.value=n}finally{d.value=!1}},C=async()=>{if(c&&await c.value.validate()){d.value=!0;try{const n=a.value;await(async e=>await g.put({url:"/crm/customer-pool-config/save",data:e}))(n),D.success(h("common.updateSuccess")),await v(),d.value=!1}finally{d.value=!1}}},k=()=>{a.value.enabled||(a.value.contactExpireDays=void 0,a.value.dealExpireDays=void 0,a.value.notifyEnabled=!1,a.value.notifyDays=void 0)},U=()=>{a.value.notifyEnabled||(a.value.notifyDays=void 0)};return Q(()=>{v()}),(n,e)=>{const _=G,z=L,i=T,b=K,m=H,f=W,j=F,R=X,q=B,J=Y("hasPermi"),P=M;return r(),p($,null,[l(_,{title:"\u3010\u5BA2\u6237\u3011\u5BA2\u6237\u7BA1\u7406\u3001\u516C\u6D77\u5BA2\u6237",url:"https://doc.iocoder.cn/crm/customer/"}),l(_,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),l(q,null,{default:t(()=>[E((r(),x(R,{ref_key:"formRef",ref:c,model:o(a),rules:o(w),"label-width":"160px"},{default:t(()=>[l(j,{shadow:"never"},{header:t(()=>[Z("div",ee,[l(o(I),{title:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E"}),E((r(),x(z,{type:"primary",onClick:C},{default:t(()=>e[5]||(e[5]=[u(" \u4FDD\u5B58 ")])),_:1})),[[J,["crm:customer-pool-config:update"]]])])]),default:t(()=>[l(m,{label:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E",prop:"enabled"},{default:t(()=>[l(b,{modelValue:o(a).enabled,"onUpdate:modelValue":e[0]||(e[0]=s=>o(a).enabled=s),onChange:k,class:"ml-4"},{default:t(()=>[l(i,{value:!1,size:"large"},{default:t(()=>e[6]||(e[6]=[u("\u4E0D\u542F\u7528")])),_:1}),l(i,{value:!0,size:"large"},{default:t(()=>e[7]||(e[7]=[u("\u542F\u7528")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a).enabled?(r(),p("div",ae,[l(m,null,{default:t(()=>[l(f,{class:"mr-2",modelValue:o(a).contactExpireDays,"onUpdate:modelValue":e[1]||(e[1]=s=>o(a).contactExpireDays=s)},null,8,["modelValue"]),e[8]||(e[8]=u(" \u5929\u4E0D\u8DDF\u8FDB\u6216 ")),l(f,{class:"mx-2",modelValue:o(a).dealExpireDays,"onUpdate:modelValue":e[2]||(e[2]=s=>o(a).dealExpireDays=s)},null,8,["modelValue"]),e[9]||(e[9]=u(" \u5929\u672A\u6210\u4EA4 "))]),_:1}),l(m,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:t(()=>[l(b,{modelValue:o(a).notifyEnabled,"onUpdate:modelValue":e[3]||(e[3]=s=>o(a).notifyEnabled=s),onChange:U,class:"ml-4"},{default:t(()=>[l(i,{value:!1,size:"large"},{default:t(()=>e[10]||(e[10]=[u("\u4E0D\u63D0\u9192")])),_:1}),l(i,{value:!0,size:"large"},{default:t(()=>e[11]||(e[11]=[u("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(a).notifyEnabled?(r(),p("div",le,[l(m,null,{default:t(()=>[e[12]||(e[12]=u(" \u63D0\u524D ")),l(f,{class:"mx-2",modelValue:o(a).notifyDays,"onUpdate:modelValue":e[4]||(e[4]=s=>o(a).notifyDays=s)},null,8,["modelValue"]),e[13]||(e[13]=u(" \u5929\u63D0\u9192 "))]),_:1})])):V("",!0)])):V("",!0)]),_:1})]),_:1},8,["model","rules"])),[[P,o(d)]])]),_:1})],64)}}});export{oe as default};
