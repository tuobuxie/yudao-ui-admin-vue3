import{_ as Mo}from"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import{d as Oo,a as No,u as Ke,C as Po,m as Ao,U as Ze,_ as Ro,aK as Yo,D as Xo,c as Bo}from"./index-DzK2S43K.js";import"./el-collapse-transition-l0sNRNKZ.js";import{_ as Lo}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{l as Fo,c as Ot,r as Et,w as jo,aa as Ho,m as Nt,q as I,I as Se,at as Uo,J as D,B as m,C as $e,K as Je,u as k,x as tt,A,E as dt,G as M,H as Z,D as Ee,h as Qe,N as ie}from"./form-create-_84fGzaM.js";import{C as Ce}from"./index-BFfD6gRt.js";import{f as Wo}from"./formatTime-BGPGB_ys.js";import{b as zo,e as Vo,f as qo,d as Go,h as Ko}from"./index-BFSrG73u.js";import{g as Zo}from"./index-CYWtznVz.js";import{b as $o}from"./formCreate-BIGK0pmc.js";import{B as xe}from"./constants-C3gLHYOK.js";import{c as Xt}from"./permission-D_ezgiAo.js";import{aS as Jo,_ as Qo,o as tn,al as en,a7 as on,f as nn,a6 as an,a2 as rn,a3 as ln,a4 as sn,Z as cn,k as dn,b0 as un,K as ke}from"./form-designer-DHHJWkD5.js";/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function to(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),o.push.apply(o,n)}return o}function yt(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?to(Object(o),!0).forEach(function(n){pn(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):to(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function Te(t){return Te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(t)}function pn(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function Ct(){return Ct=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Ct.apply(this,arguments)}function fn(t,e){if(t==null)return{};var o,n,a=function(r,l){if(r==null)return{};var s,u,p={},g=Object.keys(r);for(u=0;u<g.length;u++)s=g[u],l.indexOf(s)>=0||(p[s]=r[s]);return p}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(a[o]=t[o])}return a}function xt(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var kt=xt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Kt=xt(/Edge/i),eo=xt(/firefox/i),Zt=xt(/safari/i)&&!xt(/chrome/i)&&!xt(/android/i),Ie=xt(/iP(ad|od|hone)/i),oo=xt(/chrome/i)&&xt(/android/i),no={capture:!1,passive:!1};function S(t,e,o){t.addEventListener(e,o,!kt&&no)}function _(t,e,o){t.removeEventListener(e,o,!kt&&no)}function le(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ao(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function mt(t,e,o,n){if(t){o=o||document;do{if(e!=null&&(e[0]===">"?t.parentNode===o&&le(t,e):le(t,e))||n&&t===o)return t;if(t===o)break}while(t=ao(t))}return null}var $t,ro=/\s+/g;function rt(t,e,o){if(t&&e)if(t.classList)t.classList[o?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(ro," ").replace(" "+e+" "," ");t.className=(n+(o?" "+e:"")).replace(ro," ")}}function b(t,e,o){var n=t&&t.style;if(n){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),e===void 0?o:o[e];e in n||e.indexOf("webkit")!==-1||(e="-webkit-"+e),n[e]=o+(typeof o=="string"?"":"px")}}function Ht(t,e){var o="";if(typeof t=="string")o=t;else do{var n=b(t,"transform");n&&n!=="none"&&(o=n+" "+o)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(o)}function io(t,e,o){if(t){var n=t.getElementsByTagName(e),a=0,i=n.length;if(o)for(;a<i;a++)o(n[a],a);return n}return[]}function wt(){var t=document.scrollingElement;return t||document.documentElement}function F(t,e,o,n,a){if(t.getBoundingClientRect||t===window){var i,r,l,s,u,p,g;if(t!==window&&t.parentNode&&t!==wt()?(r=(i=t.getBoundingClientRect()).top,l=i.left,s=i.bottom,u=i.right,p=i.height,g=i.width):(r=0,l=0,s=window.innerHeight,u=window.innerWidth,p=window.innerHeight,g=window.innerWidth),(e||o)&&t!==window&&(a=a||t.parentNode,!kt))do if(a&&a.getBoundingClientRect&&(b(a,"transform")!=="none"||o&&b(a,"position")!=="static")){var E=a.getBoundingClientRect();r-=E.top+parseInt(b(a,"border-top-width")),l-=E.left+parseInt(b(a,"border-left-width")),s=r+i.height,u=l+i.width;break}while(a=a.parentNode);if(n&&t!==window){var v=Ht(a||t),P=v&&v.a,X=v&&v.d;v&&(s=(r/=X)+(p/=X),u=(l/=P)+(g/=P))}return{top:r,left:l,bottom:s,right:u,width:g,height:p}}}function lo(t,e,o){for(var n=Pt(t,!0),a=F(t)[e];n;){if(!(a>=F(n)[o]))return n;if(n===wt())break;n=Pt(n,!1)}return!1}function Ut(t,e,o,n){for(var a=0,i=0,r=t.children;i<r.length;){if(r[i].style.display!=="none"&&r[i]!==y.ghost&&(n||r[i]!==y.dragged)&&mt(r[i],o.draggable,t,!1)){if(a===e)return r[i];a++}i++}return null}function Me(t,e){for(var o=t.lastElementChild;o&&(o===y.ghost||b(o,"display")==="none"||e&&!le(o,e));)o=o.previousElementSibling;return o||null}function ut(t,e){var o=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()==="TEMPLATE"||t===y.clone||e&&!le(t,e)||o++;return o}function so(t){var e=0,o=0,n=wt();if(t)do{var a=Ht(t),i=a.a,r=a.d;e+=t.scrollLeft*i,o+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,o]}function Pt(t,e){if(!t||!t.getBoundingClientRect)return wt();var o=t,n=!1;do if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var a=b(o);if(o.clientWidth<o.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||o.clientHeight<o.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!o.getBoundingClientRect||o===document.body)return wt();if(n||e)return o;n=!0}}while(o=o.parentNode);return wt()}function Oe(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function co(t,e){return function(){if(!$t){var o=arguments;o.length===1?t.call(this,o[0]):t.apply(this,o),$t=setTimeout(function(){$t=void 0},e)}}}function uo(t,e,o){t.scrollLeft+=e,t.scrollTop+=o}function po(t){var e=window.Polymer,o=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):o?o(t).clone(!0)[0]:t.cloneNode(!0)}function fo(t,e,o){var n={};return Array.from(t.children).forEach(function(a){var i,r,l,s;if(mt(a,e.draggable,t,!1)&&!a.animated&&a!==o){var u=F(a);n.left=Math.min((i=n.left)!==null&&i!==void 0?i:1/0,u.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,u.top),n.right=Math.max((l=n.right)!==null&&l!==void 0?l:-1/0,u.right),n.bottom=Math.max((s=n.bottom)!==null&&s!==void 0?s:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var et="Sortable"+new Date().getTime();function hn(){var t,e=[];return{captureAnimationState:function(){e=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(o){if(b(o,"display")!=="none"&&o!==y.ghost){e.push({target:o,rect:F(o)});var n=yt({},e[e.length-1].rect);if(o.thisAnimationDuration){var a=Ht(o,!0);a&&(n.top-=a.f,n.left-=a.e)}o.fromRect=n}})},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(function(n,a){for(var i in n)if(n.hasOwnProperty(i)){for(var r in a)if(a.hasOwnProperty(r)&&a[r]===n[i][r])return Number(i)}return-1}(e,{target:o}),1)},animateAll:function(o){var n=this;if(!this.options.animation)return clearTimeout(t),void(typeof o=="function"&&o());var a=!1,i=0;e.forEach(function(r){var l=0,s=r.target,u=s.fromRect,p=F(s),g=s.prevFromRect,E=s.prevToRect,v=r.rect,P=Ht(s,!0);P&&(p.top-=P.f,p.left-=P.e),s.toRect=p,s.thisAnimationDuration&&Oe(g,p)&&!Oe(u,p)&&(v.top-p.top)/(v.left-p.left)===(u.top-p.top)/(u.left-p.left)&&(l=function(X,T,W,lt){return Math.sqrt(Math.pow(T.top-X.top,2)+Math.pow(T.left-X.left,2))/Math.sqrt(Math.pow(T.top-W.top,2)+Math.pow(T.left-W.left,2))*lt.animation}(v,g,E,n.options)),Oe(p,u)||(s.prevFromRect=u,s.prevToRect=p,l||(l=n.options.animation),n.animate(s,v,p,l)),l&&(a=!0,i=Math.max(i,l),clearTimeout(s.animationResetTimer),s.animationResetTimer=setTimeout(function(){s.animationTime=0,s.prevFromRect=null,s.fromRect=null,s.prevToRect=null,s.thisAnimationDuration=null},l),s.thisAnimationDuration=l)}),clearTimeout(t),a?t=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),e=[]},animate:function(o,n,a,i){if(i){b(o,"transition",""),b(o,"transform","");var r=Ht(this.el),l=r&&r.a,s=r&&r.d,u=(n.left-a.left)/(l||1),p=(n.top-a.top)/(s||1);o.animatingX=!!u,o.animatingY=!!p,b(o,"transform","translate3d("+u+"px,"+p+"px,0)"),this.forRepaintDummy=function(g){return g.offsetWidth}(o),b(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),b(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){b(o,"transition",""),b(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}var Wt=[],Ne={initializeByDefault:!0},Jt={mount:function(t){for(var e in Ne)Ne.hasOwnProperty(e)&&!(e in t)&&(t[e]=Ne[e]);Wt.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Wt.push(t)},pluginEvent:function(t,e,o){var n=this;this.eventCanceled=!1,o.cancel=function(){n.eventCanceled=!0};var a=t+"Global";Wt.forEach(function(i){e[i.pluginName]&&(e[i.pluginName][a]&&e[i.pluginName][a](yt({sortable:e},o)),e.options[i.pluginName]&&e[i.pluginName][t]&&e[i.pluginName][t](yt({sortable:e},o)))})},initializePlugins:function(t,e,o,n){for(var a in Wt.forEach(function(r){var l=r.pluginName;if(t.options[l]||r.initializeByDefault){var s=new r(t,e,t.options);s.sortable=t,s.options=t.options,t[l]=s,Ct(o,s.defaults)}}),t.options)if(t.options.hasOwnProperty(a)){var i=this.modifyOption(t,a,t.options[a]);i!==void 0&&(t.options[a]=i)}},getEventProperties:function(t,e){var o={};return Wt.forEach(function(n){typeof n.eventProperties=="function"&&Ct(o,n.eventProperties.call(e[n.pluginName],t))}),o},modifyOption:function(t,e,o){var n;return Wt.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[e]=="function"&&(n=a.optionListeners[e].call(t[a.pluginName],o))}),n}},mn=["evt"],ot=function(t,e){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=o.evt,a=fn(o,mn);Jt.pluginEvent.bind(y)(t,e,yt({dragEl:d,parentEl:R,ghostEl:w,rootEl:N,nextEl:Bt,lastDownEl:se,cloneEl:Y,cloneHidden:At,dragStarted:te,putSortable:U,activeSortable:y.active,originalEvent:n,oldIndex:zt,oldDraggableIndex:Qt,newIndex:it,newDraggableIndex:Rt,hideGhostForTarget:wo,unhideGhostForTarget:_o,cloneNowHidden:function(){At=!0},cloneNowShown:function(){At=!1},dispatchSortableEvent:function(i){$({sortable:e,name:i,originalEvent:n})}},a))};function $(t){(function(e){var o=e.sortable,n=e.rootEl,a=e.name,i=e.targetEl,r=e.cloneEl,l=e.toEl,s=e.fromEl,u=e.oldIndex,p=e.newIndex,g=e.oldDraggableIndex,E=e.newDraggableIndex,v=e.originalEvent,P=e.putSortable,X=e.extraEventProperties;if(o=o||n&&n[et]){var T,W=o.options,lt="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||kt||Kt?(T=document.createEvent("Event")).initEvent(a,!0,!0):T=new CustomEvent(a,{bubbles:!0,cancelable:!0}),T.to=l||n,T.from=s||n,T.item=i||n,T.clone=r,T.oldIndex=u,T.newIndex=p,T.oldDraggableIndex=g,T.newDraggableIndex=E,T.originalEvent=v,T.pullMode=P?P.lastPutMode:void 0;var J=yt(yt({},X),Jt.getEventProperties(a,o));for(var vt in J)T[vt]=J[vt];n&&n.dispatchEvent(T),W[lt]&&W[lt].call(o,T)}})(yt({putSortable:U,cloneEl:Y,targetEl:d,rootEl:N,oldIndex:zt,oldDraggableIndex:Qt,newIndex:it,newDraggableIndex:Rt},t))}var d,R,w,N,Bt,se,Y,At,zt,it,Qt,Rt,ce,U,Lt,gt,Pe,Ae,ho,mo,te,Vt,ee,de,K,qt=!1,ue=!1,pe=[],oe=!1,fe=!1,Re=[],Ye=!1,he=[],me=typeof document<"u",ge=Ie,go=Kt||kt?"cssFloat":"float",gn=me&&!oo&&!Ie&&"draggable"in document.createElement("div"),vo=function(){if(me){if(kt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),bo=function(t,e){var o=b(t),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=Ut(t,0,e),i=Ut(t,1,e),r=a&&b(a),l=i&&b(i),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+F(a).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+F(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var p=r.float==="left"?"left":"right";return!i||l.clear!=="both"&&l.clear!==p?"horizontal":"vertical"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||s>=n&&o[go]==="none"||i&&o[go]==="none"&&s+u>n)?"vertical":"horizontal"},yo=function(t){function e(a,i){return function(r,l,s,u){var p=r.options.group.name&&l.options.group.name&&r.options.group.name===l.options.group.name;if(a==null&&(i||p))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return e(a(r,l,s,u),i)(r,l,s,u);var g=(i?r:l).options.group.name;return a===!0||typeof a=="string"&&a===g||a.join&&a.indexOf(g)>-1}}var o={},n=t.group;n&&Te(n)=="object"||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),o.revertClone=n.revertClone,t.group=o},wo=function(){!vo&&w&&b(w,"display","none")},_o=function(){!vo&&w&&b(w,"display","")};me&&!oo&&document.addEventListener("click",function(t){if(ue)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ue=!1,!1},!0);var Ft=function(t){if(d){t=t.touches?t.touches[0]:t;var e=(a=t.clientX,i=t.clientY,pe.some(function(l){var s=l[et].options.emptyInsertThreshold;if(s&&!Me(l)){var u=F(l),p=a>=u.left-s&&a<=u.right+s,g=i>=u.top-s&&i<=u.bottom+s;return p&&g?r=l:void 0}}),r);if(e){var o={};for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);o.target=o.rootEl=e,o.preventDefault=void 0,o.stopPropagation=void 0,e[et]._onDragOver(o)}}var a,i,r},vn=function(t){d&&d.parentNode[et]._isOutsideThisEl(t.target)};function y(t,e){if(!t||!t.nodeType||t.nodeType!==1)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ct({},e),t[et]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return bo(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,r){i.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:y.supportPointer!==!1&&"PointerEvent"in window&&(!Zt||Ie),emptyInsertThreshold:5};for(var n in Jt.initializePlugins(this,t,o),o)!(n in e)&&(e[n]=o[n]);for(var a in yo(e),this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&gn,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?S(t,"pointerdown",this._onTapStart):(S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),pe.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ct(this,hn())}function ve(t,e,o,n,a,i,r,l){var s,u,p=t[et],g=p.options.onMove;return!window.CustomEvent||kt||Kt?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=o,s.draggedRect=n,s.related=a||e,s.relatedRect=i||F(e),s.willInsertAfter=l,s.originalEvent=r,t.dispatchEvent(s),g&&(u=g.call(p,s,r)),u}function Xe(t){t.draggable=!1}function bn(){Ye=!1}function yn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,n=0;o--;)n+=e.charCodeAt(o);return n.toString(36)}function be(t){return setTimeout(t,0)}function Be(t){return clearTimeout(t)}y.prototype={constructor:y,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Vt=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,o=this.el,n=this.options,a=n.preventOnFilter,i=t.type,r=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(r||t).target,s=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=n.filter;if(function(p){he.length=0;for(var g=p.getElementsByTagName("input"),E=g.length;E--;){var v=g[E];v.checked&&he.push(v)}}(o),!d&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||n.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Zt||!l||l.tagName.toUpperCase()!=="SELECT")&&!((l=mt(l,n.draggable,o,!1))&&l.animated||se===l)){if(zt=ut(l),Qt=ut(l,n.draggable),typeof u=="function"){if(u.call(this,t,l,this))return $({sortable:e,rootEl:s,name:"filter",targetEl:l,toEl:o,fromEl:o}),ot("filter",e,{evt:t}),void(a&&t.preventDefault())}else if(u&&(u=u.split(",").some(function(p){if(p=mt(s,p.trim(),o,!1))return $({sortable:e,rootEl:p,name:"filter",targetEl:l,fromEl:o,toEl:o}),ot("filter",e,{evt:t}),!0})))return void(a&&t.preventDefault());n.handle&&!mt(s,n.handle,o,!1)||this._prepareDragStart(t,r,l)}}},_prepareDragStart:function(t,e,o){var n,a=this,i=a.el,r=a.options,l=i.ownerDocument;if(o&&!d&&o.parentNode===i){var s=F(o);if(N=i,R=(d=o).parentNode,Bt=d.nextSibling,se=o,ce=r.group,y.dragged=d,Lt={target:d,clientX:(e||t).clientX,clientY:(e||t).clientY},ho=Lt.clientX-s.left,mo=Lt.clientY-s.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,d.style["will-change"]="all",n=function(){ot("delayEnded",a,{evt:t}),y.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!eo&&a.nativeDraggable&&(d.draggable=!0),a._triggerDragStart(t,e),$({sortable:a,name:"choose",originalEvent:t}),rt(d,r.chosenClass,!0))},r.ignore.split(",").forEach(function(u){io(d,u.trim(),Xe)}),S(l,"dragover",Ft),S(l,"mousemove",Ft),S(l,"touchmove",Ft),r.supportPointer?(S(l,"pointerup",a._onDrop),!this.nativeDraggable&&S(l,"pointercancel",a._onDrop)):(S(l,"mouseup",a._onDrop),S(l,"touchend",a._onDrop),S(l,"touchcancel",a._onDrop)),eo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),ot("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(Kt||kt))n();else{if(y.eventCanceled)return void this._onDrop();r.supportPointer?(S(l,"pointerup",a._disableDelayedDrag),S(l,"pointercancel",a._disableDelayedDrag)):(S(l,"mouseup",a._disableDelayedDrag),S(l,"touchend",a._disableDelayedDrag),S(l,"touchcancel",a._disableDelayedDrag)),S(l,"mousemove",a._delayedDragTouchMoveHandler),S(l,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&S(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(n,r.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&Xe(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;_(t,"mouseup",this._disableDelayedDrag),_(t,"touchend",this._disableDelayedDrag),_(t,"touchcancel",this._disableDelayedDrag),_(t,"pointerup",this._disableDelayedDrag),_(t,"pointercancel",this._disableDelayedDrag),_(t,"mousemove",this._delayedDragTouchMoveHandler),_(t,"touchmove",this._delayedDragTouchMoveHandler),_(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?S(document,"pointermove",this._onTouchMove):S(document,e?"touchmove":"mousemove",this._onTouchMove):(S(d,"dragend",this),S(N,"dragstart",this._onDragStart));try{document.selection?be(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(qt=!1,N&&d){ot("dragStarted",this,{evt:e}),this.nativeDraggable&&S(document,"dragover",vn);var o=this.options;!t&&rt(d,o.dragClass,!1),rt(d,o.ghostClass,!0),y.active=this,t&&this._appendGhost(),$({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(gt){this._lastX=gt.clientX,this._lastY=gt.clientY,wo();for(var t=document.elementFromPoint(gt.clientX,gt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(gt.clientX,gt.clientY))!==e;)e=t;if(d.parentNode[et]._isOutsideThisEl(t),e)do{if(e[et]&&e[et]._onDragOver({clientX:gt.clientX,clientY:gt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=ao(e));_o()}},_onTouchMove:function(t){if(Lt){var e=this.options,o=e.fallbackTolerance,n=e.fallbackOffset,a=t.touches?t.touches[0]:t,i=w&&Ht(w,!0),r=w&&i&&i.a,l=w&&i&&i.d,s=ge&&K&&so(K),u=(a.clientX-Lt.clientX+n.x)/(r||1)+(s?s[0]-Re[0]:0)/(r||1),p=(a.clientY-Lt.clientY+n.y)/(l||1)+(s?s[1]-Re[1]:0)/(l||1);if(!y.active&&!qt){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(w){i?(i.e+=u-(Pe||0),i.f+=p-(Ae||0)):i={a:1,b:0,c:0,d:1,e:u,f:p};var g="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");b(w,"webkitTransform",g),b(w,"mozTransform",g),b(w,"msTransform",g),b(w,"transform",g),Pe=u,Ae=p,gt=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!w){var t=this.options.fallbackOnBody?document.body:N,e=F(d,!0,ge,!0,t),o=this.options;if(ge){for(K=t;b(K,"position")==="static"&&b(K,"transform")==="none"&&K!==document;)K=K.parentNode;K!==document.body&&K!==document.documentElement?(K===document&&(K=wt()),e.top+=K.scrollTop,e.left+=K.scrollLeft):K=wt(),Re=so(K)}rt(w=d.cloneNode(!0),o.ghostClass,!1),rt(w,o.fallbackClass,!0),rt(w,o.dragClass,!0),b(w,"transition",""),b(w,"transform",""),b(w,"box-sizing","border-box"),b(w,"margin",0),b(w,"top",e.top),b(w,"left",e.left),b(w,"width",e.width),b(w,"height",e.height),b(w,"opacity","0.8"),b(w,"position",ge?"absolute":"fixed"),b(w,"zIndex","100000"),b(w,"pointerEvents","none"),y.ghost=w,t.appendChild(w),b(w,"transform-origin",ho/parseInt(w.style.width)*100+"% "+mo/parseInt(w.style.height)*100+"%")}},_onDragStart:function(t,e){var o=this,n=t.dataTransfer,a=o.options;ot("dragStart",this,{evt:t}),y.eventCanceled?this._onDrop():(ot("setupClone",this),y.eventCanceled||((Y=po(d)).removeAttribute("id"),Y.draggable=!1,Y.style["will-change"]="",this._hideClone(),rt(Y,this.options.chosenClass,!1),y.clone=Y),o.cloneId=be(function(){ot("clone",o),y.eventCanceled||(o.options.removeCloneOnHide||N.insertBefore(Y,d),o._hideClone(),$({sortable:o,name:"clone"}))}),!e&&rt(d,a.dragClass,!0),e?(ue=!0,o._loopId=setInterval(o._emulateDragOver,50)):(_(document,"mouseup",o._onDrop),_(document,"touchend",o._onDrop),_(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",a.setData&&a.setData.call(o,n,d)),S(document,"drop",o),b(d,"transform","translateZ(0)")),qt=!0,o._dragStartId=be(o._dragStarted.bind(o,e,t)),S(document,"selectstart",o),te=!0,window.getSelection().removeAllRanges(),Zt&&b(document.body,"user-select","none"))},_onDragOver:function(t){var e,o,n,a,i=this.el,r=t.target,l=this.options,s=l.group,u=y.active,p=ce===s,g=l.sort,E=U||u,v=this,P=!1;if(!Ye){if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=mt(r,l.draggable,i,!0),st("dragOver"),y.eventCanceled)return P;if(d.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||v._ignoreWhileAnimating===r)return V(!1);if(ue=!1,u&&!l.disabled&&(p?g||(n=R!==N):U===this||(this.lastPutMode=ce.checkPull(this,u,d,t))&&s.checkPut(this,u,d,t))){if(a=this._getDirection(t,r)==="vertical",e=F(d),st("dragOverValid"),y.eventCanceled)return P;if(n)return R=N,ft(),this._hideClone(),st("revert"),y.eventCanceled||(Bt?N.insertBefore(d,Bt):N.appendChild(d)),V(!0);var X=Me(i,l.draggable);if(!X||function(x,q,C){var O=F(Me(C.el,C.options.draggable)),nt=fo(C.el,C.options,w),Q=10;return q?x.clientX>nt.right+Q||x.clientY>O.bottom&&x.clientX>O.left:x.clientY>nt.bottom+Q||x.clientX>O.right&&x.clientY>O.top}(t,a,this)&&!X.animated){if(X===d)return V(!1);if(X&&i===t.target&&(r=X),r&&(o=F(r)),ve(N,i,d,e,r,o,t,!!r)!==!1)return ft(),X&&X.nextSibling?i.insertBefore(d,X.nextSibling):i.appendChild(d),R=i,Dt(),V(!0)}else if(X&&function(x,q,C){var O=F(Ut(C.el,0,C.options,!0)),nt=fo(C.el,C.options,w),Q=10;return q?x.clientX<nt.left-Q||x.clientY<O.top&&x.clientX<O.right:x.clientY<nt.top-Q||x.clientY<O.bottom&&x.clientX<O.left}(t,a,this)){var T=Ut(i,0,l,!0);if(T===d)return V(!1);if(o=F(r=T),ve(N,i,d,e,r,o,t,!1)!==!1)return ft(),i.insertBefore(d,T),R=i,Dt(),V(!0)}else if(r.parentNode===i){o=F(r);var W,lt,J,vt=d.parentNode!==i,Tt=!function(x,q,C){var O=C?x.left:x.top,nt=C?x.right:x.bottom,Q=C?x.width:x.height,St=C?q.left:q.top,h=C?q.right:q.bottom,c=C?q.width:q.height;return O===St||nt===h||O+Q/2===St+c/2}(d.animated&&d.toRect||e,r.animated&&r.toRect||o,a),It=a?"top":"left",pt=lo(r,"top","top")||lo(d,"top","top"),Yt=pt?pt.scrollTop:void 0;if(Vt!==r&&(lt=o[It],oe=!1,fe=!Tt&&l.invertSwap||vt),W=function(x,q,C,O,nt,Q,St,h){var c=O?x.clientY:x.clientX,L=O?C.height:C.width,ct=O?C.top:C.left,B=O?C.bottom:C.right,at=!1;if(!St){if(h&&de<L*nt){if(!oe&&(ee===1?c>ct+L*Q/2:c<B-L*Q/2)&&(oe=!0),oe)at=!0;else if(ee===1?c<ct+de:c>B-de)return-ee}else if(c>ct+L*(1-nt)/2&&c<B-L*(1-nt)/2)return function(re){return ut(d)<ut(re)?1:-1}(q)}return(at=at||St)&&(c<ct+L*Q/2||c>B-L*Q/2)?c>ct+L/2?1:-1:0}(t,r,o,a,Tt?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,fe,Vt===r),W!==0){var H=ut(d);do H-=W,J=R.children[H];while(J&&(b(J,"display")==="none"||J===w))}if(W===0||J===r)return V(!1);Vt=r,ee=W;var _t=r.nextElementSibling,bt=!1,z=ve(N,i,d,e,r,o,t,bt=W===1);if(z!==!1)return z!==1&&z!==-1||(bt=z===1),Ye=!0,setTimeout(bn,30),ft(),bt&&!_t?i.appendChild(d):r.parentNode.insertBefore(d,bt?_t:r),pt&&uo(pt,0,Yt-pt.scrollTop),R=d.parentNode,lt===void 0||fe||(de=Math.abs(lt-F(r)[It])),Dt(),V(!0)}if(i.contains(d))return V(!1)}return!1}function st(x,q){ot(x,v,yt({evt:t,isOwner:p,axis:a?"vertical":"horizontal",revert:n,dragRect:e,targetRect:o,canSort:g,fromSortable:E,target:r,completed:V,onMove:function(C,O){return ve(N,i,d,e,C,F(C),t,O)},changed:Dt},q))}function ft(){st("dragOverAnimationCapture"),v.captureAnimationState(),v!==E&&E.captureAnimationState()}function V(x){return st("dragOverCompleted",{insertion:x}),x&&(p?u._hideClone():u._showClone(v),v!==E&&(rt(d,U?U.options.ghostClass:u.options.ghostClass,!1),rt(d,l.ghostClass,!0)),U!==v&&v!==y.active?U=v:v===y.active&&U&&(U=null),E===v&&(v._ignoreWhileAnimating=r),v.animateAll(function(){st("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(r===d&&!d.animated||r===i&&!r.animated)&&(Vt=null),l.dragoverBubble||t.rootEl||r===document||(d.parentNode[et]._isOutsideThisEl(t.target),!x&&Ft(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),P=!0}function Dt(){it=ut(d),Rt=ut(d,l.draggable),$({sortable:v,name:"change",toEl:i,newIndex:it,newDraggableIndex:Rt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",Ft),_(document,"mousemove",Ft),_(document,"touchmove",Ft)},_offUpEvents:function(){var t=this.el.ownerDocument;_(t,"mouseup",this._onDrop),_(t,"touchend",this._onDrop),_(t,"pointerup",this._onDrop),_(t,"pointercancel",this._onDrop),_(t,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(t){var e=this.el,o=this.options;it=ut(d),Rt=ut(d,o.draggable),ot("drop",this,{evt:t}),R=d&&d.parentNode,it=ut(d),Rt=ut(d,o.draggable),y.eventCanceled||(qt=!1,fe=!1,oe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Be(this.cloneId),Be(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Zt&&b(document.body,"user-select",""),b(d,"transform",""),t&&(te&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(N===R||U&&U.lastPutMode!=="clone")&&Y&&Y.parentNode&&Y.parentNode.removeChild(Y),d&&(this.nativeDraggable&&_(d,"dragend",this),Xe(d),d.style["will-change"]="",te&&!qt&&rt(d,U?U.options.ghostClass:this.options.ghostClass,!1),rt(d,this.options.chosenClass,!1),$({sortable:this,name:"unchoose",toEl:R,newIndex:null,newDraggableIndex:null,originalEvent:t}),N!==R?(it>=0&&($({rootEl:R,name:"add",toEl:R,fromEl:N,originalEvent:t}),$({sortable:this,name:"remove",toEl:R,originalEvent:t}),$({rootEl:R,name:"sort",toEl:R,fromEl:N,originalEvent:t}),$({sortable:this,name:"sort",toEl:R,originalEvent:t})),U&&U.save()):it!==zt&&it>=0&&($({sortable:this,name:"update",toEl:R,originalEvent:t}),$({sortable:this,name:"sort",toEl:R,originalEvent:t})),y.active&&(it!=null&&it!==-1||(it=zt,Rt=Qt),$({sortable:this,name:"end",toEl:R,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){ot("nulling",this),N=d=R=w=Bt=Y=se=At=Lt=gt=te=it=Rt=zt=Qt=Vt=ee=U=ce=y.dragged=y.ghost=y.clone=y.active=null,he.forEach(function(t){t.checked=!0}),he.length=Pe=Ae=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],o=this.el.children,n=0,a=o.length,i=this.options;n<a;n++)mt(t=o[n],i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||yn(t));return e},sort:function(t,e){var o={},n=this.el;this.toArray().forEach(function(a,i){var r=n.children[i];mt(r,this.options.draggable,n,!1)&&(o[a]=r)},this),e&&this.captureAnimationState(),t.forEach(function(a){o[a]&&(n.removeChild(o[a]),n.appendChild(o[a]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return mt(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var o=this.options;if(e===void 0)return o[t];var n=Jt.modifyOption(this,t,e);o[t]=n!==void 0?n:e,t==="group"&&yo(o)},destroy:function(){ot("destroy",this);var t=this.el;t[et]=null,_(t,"mousedown",this._onTapStart),_(t,"touchstart",this._onTapStart),_(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(t,"dragover",this),_(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),pe.splice(pe.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!At){if(ot("hideClone",this),y.eventCanceled)return;b(Y,"display","none"),this.options.removeCloneOnHide&&Y.parentNode&&Y.parentNode.removeChild(Y),At=!0}},_showClone:function(t){if(t.lastPutMode==="clone"){if(At){if(ot("showClone",this),y.eventCanceled)return;d.parentNode!=N||this.options.group.revertClone?Bt?N.insertBefore(Y,Bt):N.appendChild(Y):N.insertBefore(Y,d),this.options.group.revertClone&&this.animate(d,Y),b(Y,"display",""),At=!1}}else this._hideClone()}},me&&S(document,"touchmove",function(t){(y.active||qt)&&t.cancelable&&t.preventDefault()}),y.utils={on:S,off:_,css:b,find:io,is:function(t,e){return!!mt(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},throttle:co,closest:mt,toggleClass:rt,clone:po,index:ut,nextTick:be,cancelNextTick:Be,detectDirection:bo,getChild:Ut,expando:et},y.get=function(t){return t[et]},y.mount=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(y.utils=yt(yt({},y.utils),n.utils)),Jt.mount(n)})},y.create=function(t,e){return new y(t,e)},y.version="1.15.6";var ne,Le,Fe,je,ye,ae,j=[],He=!1;function we(){j.forEach(function(t){clearInterval(t.pid)}),j=[]}function Do(){clearInterval(ae)}var Ue=co(function(t,e,o,n){if(e.scroll){var a,i=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,s=e.scrollSpeed,u=wt(),p=!1;Le!==o&&(Le=o,we(),ne=e.scroll,a=e.scrollFn,ne===!0&&(ne=Pt(o,!0)));var g=0,E=ne;do{var v=E,P=F(v),X=P.top,T=P.bottom,W=P.left,lt=P.right,J=P.width,vt=P.height,Tt=void 0,It=void 0,pt=v.scrollWidth,Yt=v.scrollHeight,H=b(v),_t=v.scrollLeft,bt=v.scrollTop;v===u?(Tt=J<pt&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),It=vt<Yt&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(Tt=J<pt&&(H.overflowX==="auto"||H.overflowX==="scroll"),It=vt<Yt&&(H.overflowY==="auto"||H.overflowY==="scroll"));var z=Tt&&(Math.abs(lt-i)<=l&&_t+J<pt)-(Math.abs(W-i)<=l&&!!_t),st=It&&(Math.abs(T-r)<=l&&bt+vt<Yt)-(Math.abs(X-r)<=l&&!!bt);if(!j[g])for(var ft=0;ft<=g;ft++)j[ft]||(j[ft]={});j[g].vx==z&&j[g].vy==st&&j[g].el===v||(j[g].el=v,j[g].vx=z,j[g].vy=st,clearInterval(j[g].pid),z==0&&st==0||(p=!0,j[g].pid=setInterval((function(){n&&this.layer===0&&y.active._onTouchMove(ye);var V=j[this.layer].vy?j[this.layer].vy*s:0,Dt=j[this.layer].vx?j[this.layer].vx*s:0;typeof a=="function"&&a.call(y.dragged.parentNode[et],Dt,V,t,ye,j[this.layer].el)!=="continue"||uo(j[this.layer].el,Dt,V)}).bind({layer:g}),24))),g++}while(e.bubbleScroll&&E!==u&&(E=Pt(E,!1)));He=p}},30),So=function(t){var e=t.originalEvent,o=t.putSortable,n=t.dragEl,a=t.activeSortable,i=t.dispatchSortableEvent,r=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var s=o||a;r();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(p)&&(i("spill"),this.onSpill({dragEl:n,putSortable:o}))}};function We(){}function ze(){}We.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var n=Ut(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),o&&o.animateAll()},drop:So},Ct(We,{pluginName:"revertOnSpill"}),ze.prototype={onSpill:function(t){var e=t.dragEl,o=t.putSortable||this.sortable;o.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),o.animateAll()},drop:So},Ct(ze,{pluginName:"removeOnSpill"}),y.mount(new function(){function t(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var o=e.originalEvent;this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):this.options.supportPointer?S(document,"pointermove",this._handleFallbackAutoScroll):o.touches?S(document,"touchmove",this._handleFallbackAutoScroll):S(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var o=e.originalEvent;this.options.dragOverBubble||o.rootEl||this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),Do(),we(),clearTimeout($t),$t=void 0},nulling:function(){ye=Le=ne=He=ae=Fe=je=null,j.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,o){var n=this,a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(a,i);if(ye=e,o||this.options.forceAutoScrollFallback||Kt||kt||Zt){Ue(e,this.options,r,o);var l=Pt(r,!0);!He||ae&&a===Fe&&i===je||(ae&&Do(),ae=setInterval(function(){var s=Pt(document.elementFromPoint(a,i),!0);s!==l&&(l=s,we()),Ue(e,n.options,s,o)},10),Fe=a,je=i)}else{if(!this.options.bubbleScroll||Pt(r,!0)===wt())return void we();Ue(e,this.options,Pt(r,!1),!1)}}},Ct(t,{pluginName:"scroll",initializeByDefault:!0})}),y.mount(ze,We);const wn={class:"flex items-center"},_n={class:"ml-20px mr-8px text-18px"},Dn={class:"color-gray-600 text-16px"},Sn={class:"flex-1 flex"},En={class:"flex items-center"},Cn={key:2,class:"flow-icon"},xn={style:{"font-size":"12px",color:"#fff"}},kn={key:2},Tn={class:"flex items-center"},In={key:0,class:"w-150px"},Mn={class:"px-30px"},On={class:"pr-25px pb-25px"},Nn=Fo({name:"BpmModel",__name:"CategoryDraggableModel",props:{categoryInfo:{},isCategorySorting:{type:Boolean}},emits:["success"],setup(t,{emit:e}){const o=t,n=e,a=Oo(),{t:i}=No(),{push:r}=Ke(),l=Po(),s=Ot(()=>Ao().getIsDark),u=Ke(),p=Et(!1),g=Et([]),E=Et([]),v=Et(!1),P=Ot(()=>({backgroundColor:s.value?"":"#edeff0",paddingLeft:"10px"})),X=Ot(()=>({paddingLeft:"10px"})),T=Ot(()=>Xt(["bpm:model:update"])),W=Ot(()=>Xt(["bpm:model:delete"])),lt=Ot(()=>Xt(["bpm:model:deploy"])),J=Ot(()=>Xt(["bpm:process-definition:query","bpm:model:update","bpm:model:delete"])),vt=Ot(()=>Xt(["bpm:process-definition:query"])),Tt=async h=>{try{await a.delConfirm(),await zo(h.id),a.success(i("common.delSuccess")),n("success")}catch{}},It=async h=>{try{await a.confirm('\u662F\u5426\u786E\u8BA4\u6E05\u7406\u6D41\u7A0B\u540D\u5B57\u4E3A"'+h.name+'"\u7684\u6570\u636E\u9879?'),await Vo(h.id),a.success("\u6E05\u7406\u6210\u529F"),n("success")}catch{}},pt=async h=>{const c=h.processDefinition.suspensionState,L=c===1?2:1;try{const ct=h.id,B=c===1?"\u505C\u7528":"\u542F\u7528",at="\u662F\u5426\u786E\u8BA4"+B+'\u6D41\u7A0B\u540D\u5B57\u4E3A"'+h.name+'"\u7684\u6570\u636E\u9879?';await a.confirm(at),await qo(ct,L),a.success(B+"\u6210\u529F"),n("success")}catch{}},Yt=h=>{r({name:"BpmProcessDefinition",query:{key:h.key}})},H=Et(!1),_t=Et({rule:[],option:{}}),bt=async h=>{if(h.formType==xe.NORMAL){const c=await Zo(h.formId);$o(_t,c.conf,c.fields),H.value=!0}else await r({path:h.formCustomCreatePath})},z=h=>{const c=l.getUser.id;return h.managerUserIds&&h.managerUserIds.includes(c)},st=()=>{p.value?V():(g.value=ke(o.categoryInfo.modelList),p.value=!0,x())},ft=async()=>{const h=E.value.map(c=>c.id);await Ko(h),p.value=!1,a.success("\u6392\u5E8F\u6A21\u578B\u6210\u529F"),n("success")},V=()=>{E.value=ke(g.value),p.value=!1},Dt=Et(),x=Ze(()=>{const h=document.querySelector(`.${o.categoryInfo.name} .el-table__body-wrapper tbody`);h&&y.create(h,{group:"shared",animation:150,draggable:".el-table__row",handle:".drag-icon",onEnd:({newDraggableIndex:c,oldDraggableIndex:L})=>{L!==c&&E.value.splice(c,0,E.value.splice(L,1)[0])}})},200),q=Ze(()=>{const h=o.categoryInfo.modelList;un(E.value,h)||(E.value=ke(h),(h==null?void 0:h.length)>0&&(v.value=!0))},100),C=Et(!1),O=Et({name:""}),nt=async()=>{var h;if(((h=O.value)==null?void 0:h.name.length)===0)return a.warning("\u8BF7\u8F93\u5165\u540D\u79F0");await Ce.updateCategory(O.value),a.success("\u91CD\u547D\u540D\u6210\u529F"),C.value=!1,n("success")},Q=async()=>{try{if(o.categoryInfo.modelList.length>0)return a.warning("\u8BE5\u5206\u7C7B\u4E0B\u4ECD\u6709\u6D41\u7A0B\u5B9A\u4E49,\u4E0D\u5141\u8BB8\u5220\u9664");await a.confirm("\u786E\u8BA4\u5220\u9664\u5206\u7C7B\u5417?"),await Ce.deleteCategory(o.categoryInfo.id),a.success(i("common.delSuccess")),n("success")}catch{}},St=async(h,c)=>{h==="create"?await r({name:"BpmModelCreate"}):await r({name:"BpmModelUpdate",params:{id:c,type:h}})};return jo(()=>{var h;(h=o.categoryInfo)!=null&&h.modelList&&q(),o.isCategorySorting&&(v.value=!1)}),(h,c)=>{const L=Ro,ct=tn,B=nn,at=sn,re=ln,Ve=rn,Eo=en,jt=Qo,Gt=on,Co=Lo,_e=an,xo=cn,ko=Jo,To=dn,qe=Mo,Io=Ho("form-create");return I(),Nt(Se,null,[Uo([h.categoryInfo.name,h.isCategorySorting],()=>{var f;return I(),Nt("div",{class:"flex items-center h-50px"},[tt("div",wn,[h.isCategorySorting?(I(),A(ct,{key:0,content:"\u62D6\u52A8\u6392\u5E8F"},{default:m(()=>[D(L,{size:22,icon:"ic:round-drag-indicator",class:"ml-10px category-drag-icon cursor-move text-#8a909c"})]),_:1})):dt("",!0),tt("h3",_n,Z(h.categoryInfo.name),1),tt("div",Dn," ("+Z(((f=h.categoryInfo.modelList)==null?void 0:f.length)||0)+") ",1)]),$e(tt("div",Sn,[h.categoryInfo.modelList.length>0?(I(),Nt("div",{key:0,class:Ee(["ml-20px flex items-center",["transition-transform duration-300 cursor-pointer",k(v)?"rotate-180":"rotate-0"]]),onClick:c[0]||(c[0]=G=>v.value=!k(v))},[D(L,{icon:"ep:arrow-down-bold",color:"#999"})],2)):dt("",!0),tt("div",{class:Ee(["ml-auto flex items-center",k(p)?"mr-15px":"mr-45px"])},[k(p)?(I(),Nt(Se,{key:1},[D(B,{onClick:ie(V,["stop"])},{default:m(()=>c[13]||(c[13]=[M(" \u53D6 \u6D88 ")])),_:1}),D(B,{type:"primary",onClick:ie(ft,["stop"])},{default:m(()=>c[14]||(c[14]=[M(" \u4FDD\u5B58\u6392\u5E8F ")])),_:1})],64)):(I(),Nt(Se,{key:0},[h.categoryInfo.modelList.length>0?(I(),A(B,{key:0,link:"",type:"info",class:"mr-20px",onClick:ie(st,["stop"])},{default:m(()=>[D(L,{icon:"fa:sort-amount-desc",class:"mr-5px"}),c[8]||(c[8]=M(" \u6392\u5E8F "))]),_:1})):(I(),A(B,{key:1,link:"",type:"info",class:"mr-20px",onClick:c[1]||(c[1]=ie(G=>St("create"),["stop"]))},{default:m(()=>[D(L,{icon:"fa:plus",class:"mr-5px"}),c[9]||(c[9]=M(" \u65B0\u5EFA "))]),_:1})),D(Ve,{onCommand:c[2]||(c[2]=G=>(async(Mt,ht)=>{switch(Mt){case"handleRename":O.value=await Ce.getCategory(ht.id),C.value=!0;break;case"handleDeleteCategory":await Q()}})(G,h.categoryInfo)),placement:"bottom"},{dropdown:m(()=>[D(re,null,{default:m(()=>[D(at,{command:"handleRename"},{default:m(()=>c[11]||(c[11]=[M(" \u91CD\u547D\u540D ")])),_:1}),D(at,{command:"handleDeleteCategory"},{default:m(()=>c[12]||(c[12]=[M(" \u5220\u9664\u8BE5\u7C7B ")])),_:1})]),_:1})]),default:m(()=>[D(B,{link:"",type:"info"},{default:m(()=>[D(L,{icon:"ep:setting",class:"mr-5px"}),c[10]||(c[10]=M(" \u5206\u7C7B "))]),_:1})]),_:1})],64))],2)],512),[[Je,!h.isCategorySorting]])])},c,3),D(ko,null,{default:m(()=>[$e(tt("div",null,[k(E)&&k(E).length>0?(I(),A(xo,{key:0,class:Ee(h.categoryInfo.name),ref_key:"tableRef",ref:Dt,data:k(E),"row-key":"id","header-cell-style":k(P),"cell-style":k(X),"row-style":{height:"68px"}},{default:m(()=>[D(jt,{label:"\u6D41\u7A0B\u540D",prop:"name","min-width":"150"},{default:m(({row:f})=>[tt("div",En,[k(p)?(I(),A(ct,{key:0,content:"\u62D6\u52A8\u6392\u5E8F"},{default:m(()=>[D(L,{icon:"ic:round-drag-indicator",class:"drag-icon cursor-move text-#8a909c mr-10px"})]),_:1})):dt("",!0),f.icon?(I(),A(Eo,{key:1,src:f.icon,class:"h-38px w-38px mr-10px rounded"},null,8,["src"])):(I(),Nt("div",Cn,[tt("span",xn,Z(k(Yo)(f.name,0,2)),1)])),M(" "+Z(f.name),1)])]),_:1}),D(jt,{label:"\u53EF\u89C1\u8303\u56F4",prop:"startUserIds","min-width":"150"},{default:m(({row:f})=>{var G,Mt,ht,Ge;return[(G=f.startUsers)!=null&&G.length||(Mt=f.startDepts)!=null&&Mt.length?f.startUsers.length===1?(I(),A(Gt,{key:1},{default:m(()=>[M(Z(f.startUsers[0].nickname),1)]),_:2},1024)):((ht=f.startDepts)==null?void 0:ht.length)===1?(I(),A(Gt,{key:2},{default:m(()=>[M(Z(f.startDepts[0].name),1)]),_:2},1024)):((Ge=f.startDepts)==null?void 0:Ge.length)>1?(I(),A(Gt,{key:3},{default:m(()=>[D(ct,{class:"box-item",effect:"dark",placement:"top",content:f.startDepts.map(De=>De.name).join("\u3001")},{default:m(()=>[M(Z(f.startDepts[0].name)+"\u7B49 "+Z(f.startDepts.length)+" \u4E2A\u90E8\u95E8\u53EF\u89C1 ",1)]),_:2},1032,["content"])]),_:2},1024)):(I(),A(Gt,{key:4},{default:m(()=>[D(ct,{class:"box-item",effect:"dark",placement:"top",content:f.startUsers.map(De=>De.nickname).join("\u3001")},{default:m(()=>[M(Z(f.startUsers[0].nickname)+"\u7B49 "+Z(f.startUsers.length)+" \u4EBA\u53EF\u89C1 ",1)]),_:2},1032,["content"])]),_:2},1024)):(I(),A(Gt,{key:0},{default:m(()=>c[15]||(c[15]=[M(" \u5168\u90E8\u53EF\u89C1 ")])),_:1}))]}),_:1}),D(jt,{label:"\u6D41\u7A0B\u7C7B\u578B",prop:"type","min-width":"120"},{default:m(({row:f})=>[D(Co,{value:f.type,type:k(Xo).BPM_MODEL_TYPE},null,8,["value","type"])]),_:1}),D(jt,{label:"\u8868\u5355\u4FE1\u606F",prop:"formType","min-width":"150"},{default:m(f=>[f.row.formType===k(xe).NORMAL?(I(),A(B,{key:0,type:"primary",link:"",onClick:G=>bt(f.row)},{default:m(()=>[tt("span",null,Z(f.row.formName),1)]),_:2},1032,["onClick"])):f.row.formType===k(xe).CUSTOM?(I(),A(B,{key:1,type:"primary",link:"",onClick:G=>bt(f.row)},{default:m(()=>[tt("span",null,Z(f.row.formCustomCreatePath),1)]),_:2},1032,["onClick"])):(I(),Nt("label",kn,"\u6682\u65E0\u8868\u5355"))]),_:1}),D(jt,{label:"\u6700\u540E\u53D1\u5E03",prop:"deploymentTime","min-width":"250"},{default:m(f=>{var G;return[tt("div",Tn,[f.row.processDefinition?(I(),Nt("span",In,Z(k(Wo)(f.row.processDefinition.deploymentTime)),1)):dt("",!0),f.row.processDefinition?(I(),A(_e,{key:1},{default:m(()=>[M(" v"+Z(f.row.processDefinition.version),1)]),_:2},1024)):(I(),A(_e,{key:2,type:"warning"},{default:m(()=>c[16]||(c[16]=[M("\u672A\u90E8\u7F72")])),_:1})),((G=f.row.processDefinition)==null?void 0:G.suspensionState)===2?(I(),A(_e,{key:3,type:"warning",class:"ml-10px"},{default:m(()=>c[17]||(c[17]=[M(" \u5DF2\u505C\u7528 ")])),_:1})):dt("",!0)])]}),_:1}),D(jt,{label:"\u64CD\u4F5C",width:"200",fixed:"right"},{default:m(f=>[D(B,{link:"",type:"primary",onClick:G=>St("update",f.row.id),disabled:!z(f.row)&&!k(T)},{default:m(()=>c[18]||(c[18]=[M(" \u4FEE\u6539 ")])),_:2},1032,["onClick","disabled"]),D(B,{link:"",type:"primary",onClick:G=>St("copy",f.row.id),disabled:!z(f.row)&&!k(T)},{default:m(()=>c[19]||(c[19]=[M(" \u590D\u5236 ")])),_:2},1032,["onClick","disabled"]),D(B,{link:"",class:"!ml-5px",type:"primary",onClick:G=>(async Mt=>{try{await a.confirm("\u662F\u5426\u786E\u8BA4\u53D1\u5E03\u8BE5\u6D41\u7A0B\uFF1F"),await Go(Mt.id),a.success(i("\u53D1\u5E03\u6210\u529F")),n("success")}catch{}})(f.row),disabled:!z(f.row)&&!k(lt)},{default:m(()=>c[20]||(c[20]=[M(" \u53D1\u5E03 ")])),_:2},1032,["onClick","disabled"]),k(J)?(I(),A(Ve,{key:0,class:"!align-middle ml-5px",onCommand:G=>((Mt,ht)=>{switch(Mt){case"handleDefinitionList":Yt(ht);break;case"handleDelete":Tt(ht);break;case"handleChangeState":pt(ht);break;case"handleClean":It(ht);break;case"handleReport":u.push({name:"BpmProcessInstanceReport",query:{processDefinitionId:ht.processDefinition.id,processDefinitionKey:ht.key}})}})(G,f.row)},{dropdown:m(()=>[D(re,null,{default:m(()=>[k(vt)?(I(),A(at,{key:0,command:"handleDefinitionList"},{default:m(()=>c[22]||(c[22]=[M(" \u5386\u53F2 ")])),_:1})):dt("",!0),k(Xt)(["bpm:process-instance:manager-query"])&&f.row.processDefinition?(I(),A(at,{key:1,command:"handleReport",disabled:!z(f.row)},{default:m(()=>c[23]||(c[23]=[M(" \u62A5\u8868 ")])),_:2},1032,["disabled"])):dt("",!0),k(T)&&f.row.processDefinition?(I(),A(at,{key:2,command:"handleChangeState",disabled:!z(f.row)},{default:m(()=>[M(Z(f.row.processDefinition.suspensionState===1?"\u505C\u7528":"\u542F\u7528"),1)]),_:2},1032,["disabled"])):dt("",!0),k(Xt)(["bpm:model:clean"])?(I(),A(at,{key:3,type:"danger",command:"handleClean",disabled:!z(f.row)},{default:m(()=>c[24]||(c[24]=[M(" \u6E05\u7406 ")])),_:2},1032,["disabled"])):dt("",!0),k(W)?(I(),A(at,{key:4,type:"danger",command:"handleDelete",disabled:!z(f.row)},{default:m(()=>c[25]||(c[25]=[M(" \u5220\u9664 ")])),_:2},1032,["disabled"])):dt("",!0)]),_:2},1024)]),default:m(()=>[D(B,{type:"primary",link:""},{default:m(()=>c[21]||(c[21]=[M("\u66F4\u591A")])),_:1})]),_:2},1032,["onCommand"])):dt("",!0)]),_:1})]),_:1},8,["class","data","header-cell-style","cell-style"])):dt("",!0)],512),[[Je,k(v)]])]),_:1}),D(qe,{fullscreen:!1,class:"rename-dialog",modelValue:k(C),"onUpdate:modelValue":c[6]||(c[6]=f=>Qe(C)?C.value=f:null),width:"400"},{title:m(()=>c[26]||(c[26]=[tt("div",{class:"pl-10px font-bold text-18px"}," \u91CD\u547D\u540D\u5206\u7C7B ",-1)])),footer:m(()=>[tt("div",On,[D(B,{onClick:c[5]||(c[5]=f=>C.value=!1)},{default:m(()=>c[27]||(c[27]=[M("\u53D6 \u6D88")])),_:1}),D(B,{type:"primary",onClick:nt},{default:m(()=>c[28]||(c[28]=[M("\u786E \u5B9A")])),_:1})])]),default:m(()=>[tt("div",Mn,[D(To,{modelValue:k(O).name,"onUpdate:modelValue":c[4]||(c[4]=f=>k(O).name=f)},null,8,["modelValue"])])]),_:1},8,["modelValue"]),D(qe,{title:"\u8868\u5355\u8BE6\u60C5",fullscreen:!0,modelValue:k(H),"onUpdate:modelValue":c[7]||(c[7]=f=>Qe(H)?H.value=f:null)},{default:m(()=>[D(Io,{rule:k(_t).rule,option:k(_t).option},null,8,["rule","option"])]),_:1},8,["modelValue"])],64)}}}),Pn=Bo(Nn,[["__scopeId","data-v-6aa9e5f7"]]);export{Pn as default};
