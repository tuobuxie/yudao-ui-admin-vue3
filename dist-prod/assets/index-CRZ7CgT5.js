import{d as Q,a as $,h as O,D as Y,_ as W,N as ee}from"./index-DzK2S43K.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{_ as le}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as te}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{l as oe,r as p,j as ne,e as re,ag as ie,m as N,q as i,J as a,B as o,u as l,Z as se,I as M,$ as de,A as m,C as f,G as u}from"./form-create-_84fGzaM.js";import{d as R}from"./formatTime-BGPGB_ys.js";import{d as pe}from"./download-oWiM5xVU.js";import{D as v}from"./index-CILEKRg9.js";import{_ as me}from"./Demo03StudentForm.vue_vue_type_script_setup_true_lang-D-Kiqc2N.js";import{h as ue,aj as ce,k as fe,x as _e,Q as ye,F as ge,f as xe,Z as we,_ as ve,ak as be}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";import"./Demo03CourseForm.vue_vue_type_script_setup_true_lang-BIG_DOTl.js";import"./Demo03GradeForm.vue_vue_type_script_setup_true_lang-Ban6LOYX.js";const he=oe({name:"Demo03Student",__name:"index",setup(Se){const _=Q(),{t:k}=$(),b=p(!0),C=p([]),D=p(0),n=ne({pageNo:1,pageSize:10,name:void 0,sex:void 0,description:void 0,createTime:[]}),V=p(),h=p(!1),c=async()=>{b.value=!0;try{const r=await v.getDemo03StudentPage(n);C.value=r.list,D.value=r.total}finally{b.value=!1}},S=()=>{n.pageNo=1,c()},z=()=>{V.value.resetFields(),S()},T=p(),U=(r,e)=>{T.value.open(r,e)},F=async()=>{try{await _.delConfirm(),await v.deleteDemo03StudentList(x.value),x.value=[],_.success(k("common.delSuccess")),await c()}catch{}},x=p([]),P=r=>{x.value=r.map(e=>e.id)},X=async()=>{try{await _.exportConfirm(),h.value=!0;const r=await v.exportDemo03Student(n);pe.excel(r,"\u5B66\u751F.xls")}catch{}finally{h.value=!1}};return re(()=>{c()}),(r,e)=>{const j=fe,w=ce,q=ye,H=_e,Z=ge,y=W,d=xe,A=ue,E=te,s=ve,B=le,G=we,I=ae,g=ie("hasPermi"),J=be;return i(),N(M,null,[a(E,null,{default:o(()=>[a(A,{class:"-mb-15px",model:l(n),ref_key:"queryFormRef",ref:V,inline:!0,"label-width":"68px"},{default:o(()=>[a(w,{label:"\u540D\u5B57",prop:"name"},{default:o(()=>[a(j,{modelValue:l(n).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(n).name=t),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",clearable:"",onKeyup:se(S,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(w,{label:"\u6027\u522B",prop:"sex"},{default:o(()=>[a(H,{modelValue:l(n).sex,"onUpdate:modelValue":e[1]||(e[1]=t=>l(n).sex=t),placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",clearable:"",class:"!w-240px"},{default:o(()=>[(i(!0),N(M,null,de(l(O)(l(Y).SYSTEM_USER_SEX),t=>(i(),m(q,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[a(Z,{modelValue:l(n).createTime,"onUpdate:modelValue":e[2]||(e[2]=t=>l(n).createTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-220px"},null,8,["modelValue","default-time"])]),_:1}),a(w,null,{default:o(()=>[a(d,{onClick:S},{default:o(()=>[a(y,{icon:"ep:search",class:"mr-5px"}),e[6]||(e[6]=u(" \u641C\u7D22"))]),_:1}),a(d,{onClick:z},{default:o(()=>[a(y,{icon:"ep:refresh",class:"mr-5px"}),e[7]||(e[7]=u(" \u91CD\u7F6E"))]),_:1}),f((i(),m(d,{type:"primary",plain:"",onClick:e[3]||(e[3]=t=>U("create"))},{default:o(()=>[a(y,{icon:"ep:plus",class:"mr-5px"}),e[8]||(e[8]=u(" \u65B0\u589E "))]),_:1})),[[g,["infra:demo03-student:create"]]]),f((i(),m(d,{type:"success",plain:"",onClick:X,loading:l(h)},{default:o(()=>[a(y,{icon:"ep:download",class:"mr-5px"}),e[9]||(e[9]=u(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[g,["infra:demo03-student:export"]]]),f((i(),m(d,{type:"danger",plain:"",disabled:l(ee)(l(x)),onClick:F},{default:o(()=>[a(y,{icon:"ep:delete",class:"mr-5px"}),e[10]||(e[10]=u(" \u6279\u91CF\u5220\u9664 "))]),_:1},8,["disabled"])),[[g,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(E,null,{default:o(()=>[f((i(),m(G,{"row-key":"id",data:l(C),stripe:!0,"show-overflow-tooltip":!0,onSelectionChange:P},{default:o(()=>[a(s,{type:"selection",width:"55"}),a(s,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(s,{label:"\u540D\u5B57",align:"center",prop:"name"}),a(s,{label:"\u6027\u522B",align:"center",prop:"sex"},{default:o(t=>[a(B,{type:l(Y).SYSTEM_USER_SEX,value:t.row.sex},null,8,["type","value"])]),_:1}),a(s,{label:"\u51FA\u751F\u65E5\u671F",align:"center",prop:"birthday",formatter:l(R),width:"180px"},null,8,["formatter"]),a(s,{label:"\u7B80\u4ECB",align:"center",prop:"description"}),a(s,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(R),width:"180px"},null,8,["formatter"]),a(s,{label:"\u64CD\u4F5C",align:"center","min-width":"120px"},{default:o(t=>[f((i(),m(d,{link:"",type:"primary",onClick:K=>U("update",t.row.id)},{default:o(()=>e[11]||(e[11]=[u(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[g,["infra:demo03-student:update"]]]),f((i(),m(d,{link:"",type:"danger",onClick:K=>(async L=>{try{await _.delConfirm(),await v.deleteDemo03Student(L),_.success(k("common.delSuccess")),await c()}catch{}})(t.row.id)},{default:o(()=>e[12]||(e[12]=[u(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[g,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[J,l(b)]]),a(I,{total:l(D),page:l(n).pageNo,"onUpdate:page":e[4]||(e[4]=t=>l(n).pageNo=t),limit:l(n).pageSize,"onUpdate:limit":e[5]||(e[5]=t=>l(n).pageSize=t),onPagination:c},null,8,["total","page","limit"])]),_:1}),a(me,{ref_key:"formRef",ref:T,onSuccess:c},null,512)],64)}}});export{he as default};
