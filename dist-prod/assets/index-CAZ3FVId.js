import{d as G,a as J,_ as L}from"./index-D_TWD7wt.js";import{_ as P}from"./ContentWrap.vue_vue_type_script_setup_true_lang-4_WNC8um.js";import{_ as S}from"./index-CBtRt3JL.js";import{d as Z}from"./formatTime-BGPGB_ys.js";import{_ as z,M as w}from"./MessageTemplateSendForm.vue_vue_type_script_setup_true_lang-LttN1jsq.js";import{_ as E}from"./main.vue_vue_type_script_setup_true_lang-8q1CFDrv.js";import{h as K,aj as V,f as W,Z as H,_ as N,ak as O}from"./form-designer-DHHJWkD5.js";import{l as Q,r as o,j as U,ag as X,m as Y,q as i,J as e,B as a,u as l,C as c,A as d,G as h,I as $}from"./form-create-_84fGzaM.js";import"./Dialog.vue_vue_type_style_index_0_lang-CJT4CHEp.js";import"./index-DPQ1KU-A.js";import"./index-CeTsi327.js";import"./tagsView-CwT_HwtR.js";const ee=Q({name:"MpMessageTemplate",__name:"index",setup(ae){const p=G(),{t:C}=J(),u=o(!0),b=o([]),r=U({accountId:-1}),M=o(),f=o(!1),T=n=>{r.accountId=n,g()},g=async()=>{u.value=!0;try{const n=await w.getMessageTemplateList(r);n&&(b.value=n)}finally{u.value=!1}},j=async()=>{try{await p.confirm("\u662F\u5426\u786E\u8BA4\u540C\u6B65\u6D88\u606F\u6A21\u677F\uFF1F"),f.value=!0,await w.syncMessageTemplate(r.accountId),p.success("\u540C\u6B65\u6D88\u606F\u6A21\u677F\u6210\u529F"),await g()}finally{f.value=!1}},x=o();return(n,s)=>{const q=S,k=V,F=L,y=W,R=K,I=P,t=N,A=H,_=X("hasPermi"),B=O;return i(),Y($,null,[e(q,{title:"\u6A21\u7248\u6D88\u606F",url:"https://doc.iocoder.cn/mp/message-template/"}),e(I,null,{default:a(()=>[e(R,{class:"-mb-15px",model:l(r),ref_key:"queryFormRef",ref:M,inline:!0,"label-width":"68px"},{default:a(()=>[e(k,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:a(()=>[e(l(E),{onChange:T})]),_:1}),e(k,null,{default:a(()=>[c((i(),d(y,{type:"success",plain:"",onClick:j,loading:l(f),disabled:l(r).accountId===-1},{default:a(()=>[e(F,{icon:"ep:refresh",class:"mr-5px"}),s[0]||(s[0]=h(" \u540C\u6B65 "))]),_:1},8,["loading","disabled"])),[[_,["mp:message-template:sync"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(I,null,{default:a(()=>[c((i(),d(A,{data:l(b),stripe:!0,"show-overflow-tooltip":!0},{default:a(()=>[e(t,{label:"\u516C\u4F17\u53F7\u6A21\u677F ID",align:"center",prop:"templateId",width:"200px"}),e(t,{label:"\u6807\u9898",align:"center",prop:"title",width:"150px"}),e(t,{label:"\u6A21\u677F\u5185\u5BB9",align:"center",prop:"content"}),e(t,{label:"\u6A21\u677F\u793A\u4F8B",align:"center",prop:"example",width:"200px"}),e(t,{label:"\u4E00\u7EA7\u884C\u4E1A",align:"center",prop:"primaryIndustry",width:"120px"}),e(t,{label:"\u4E8C\u7EA7\u884C\u4E1A",align:"center",prop:"deputyIndustry",width:"120px"}),e(t,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l(Z),width:"180px"},null,8,["formatter"]),e(t,{label:"\u64CD\u4F5C",align:"center",width:"160"},{default:a(v=>[c((i(),d(y,{link:"",type:"primary",onClick:D=>{return m=v.row,void x.value.open(m);var m}},{default:a(()=>s[1]||(s[1]=[h(" \u53D1\u9001 ")])),_:2},1032,["onClick"])),[[_,["mp:message-template:send"]]]),c((i(),d(y,{link:"",type:"danger",onClick:D=>(async m=>{try{await p.delConfirm(),await w.deleteMessageTemplate(m),p.success(C("common.delSuccess")),await g()}catch{}})(v.row.id)},{default:a(()=>s[2]||(s[2]=[h(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[_,["mp:message-template:delete"]]])]),_:1})]),_:1},8,["data"])),[[B,l(u)]])]),_:1}),e(z,{ref_key:"sendFormRef",ref:x},null,512)],64)}}});export{ee as default};
