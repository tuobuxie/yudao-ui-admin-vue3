import{X as p,a as z,d as W,$ as Y,aw as Z,D as R,g as ee,h as ae}from"./index-DmQdxAiK.js";import{_ as le}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{C as O}from"./constants-C3gLHYOK.js";import{M as te}from"./index-ZSgx8OkH.js";import{A as oe}from"./constants-CHvLs4wt.js";import{K as ue}from"./index-mpa-JkvJ.js";import{T as se}from"./index-r5Dn7pyo.js";import{h as de,aj as re,k as ie,x as me,Q as pe,s as ce,u as ne,l as ve,ak as ge,f as ye}from"./form-designer-DHHJWkD5.js";import{l as be,r as c,c as fe,j as Ve,A as r,q as s,B as o,C as he,u as a,J as u,E as C,m as b,I as f,$ as V,G as S,H as P,h as _e}from"./form-create-_84fGzaM.js";const h={getChatRolePage:async d=>await p.get({url:"/ai/chat-role/page",params:d}),getChatRole:async d=>await p.get({url:"/ai/chat-role/get?id="+d}),createChatRole:async d=>await p.post({url:"/ai/chat-role/create",data:d}),updateChatRole:async d=>await p.put({url:"/ai/chat-role/update",data:d}),deleteChatRole:async d=>await p.delete({url:"/ai/chat-role/delete?id="+d}),getMyPage:async d=>await p.get({url:"/ai/chat-role/my-page",params:d}),getCategoryList:async()=>await p.get({url:"/ai/chat-role/category-list"}),createMy:async d=>await p.post({url:"/ai/chat-role/create-my",data:d}),updateMy:async d=>await p.put({url:"/ai/chat-role/update-my",data:d}),deleteMy:async d=>await p.delete({url:"/ai/chat-role/delete-my?id="+d})},we=be({name:"ChatRoleForm",__name:"ChatRoleForm",emits:["success"],setup(d,{expose:B,emit:F}){const{t:_}=z(),k=W(),n=c(!1),N=c(""),v=c(!1),g=c(""),t=c({id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:O.ENABLE,knowledgeIds:[],toolIds:[],mcpClientNames:[]}),U=c(),A=c([]),q=c([]),x=c([]),w=fe(()=>g.value==="my-create"||g.value==="my-update"),K=Ve({name:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],avatar:[{required:!0,message:"\u89D2\u8272\u5934\u50CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u89D2\u8272\u7C7B\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u89D2\u8272\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{required:!0,message:"\u89D2\u8272\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],systemMessage:[{required:!0,message:"\u89D2\u8272\u8BBE\u5B9A\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],publicStatus:[{required:!0,message:"\u662F\u5426\u516C\u5F00\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});B({open:async(m,l,y)=>{if(n.value=!0,N.value=y||_("action."+m),g.value=m,H(),l){v.value=!0;try{t.value=await h.getChatRole(l)}finally{v.value=!1}}A.value=await te.getModelSimpleList(oe.CHAT),q.value=await ue.getSimpleKnowledgeList(),x.value=await se.getToolSimpleList()}});const j=F,G=async()=>{await U.value.validate(),v.value=!0;try{const m=t.value;g.value==="my-create"?(await h.createMy(m),k.success(_("common.createSuccess"))):g.value==="my-update"?(await h.updateMy(m),k.success(_("common.updateSuccess"))):g.value==="create"?(await h.createChatRole(m),k.success(_("common.createSuccess"))):(await h.updateChatRole(m),k.success(_("common.updateSuccess"))),n.value=!1,j("success")}finally{v.value=!1}},H=()=>{var m;t.value={id:void 0,modelId:void 0,name:void 0,avatar:void 0,category:void 0,sort:void 0,description:void 0,systemMessage:void 0,publicStatus:!0,status:O.ENABLE,knowledgeIds:[],toolIds:[],mcpClientNames:[]},(m=U.value)==null||m.resetFields()};return(m,l)=>{const y=ie,i=re,$=Y,I=pe,M=me,E=ne,L=ce,D=ve,J=de,T=ye,Q=le,X=ge;return s(),r(Q,{title:a(N),modelValue:a(n),"onUpdate:modelValue":l[13]||(l[13]=e=>_e(n)?n.value=e:null)},{footer:o(()=>[u(T,{onClick:G,type:"primary",disabled:a(v)},{default:o(()=>l[14]||(l[14]=[S("\u786E \u5B9A")])),_:1},8,["disabled"]),u(T,{onClick:l[12]||(l[12]=e=>n.value=!1)},{default:o(()=>l[15]||(l[15]=[S("\u53D6 \u6D88")])),_:1})]),default:o(()=>[he((s(),r(J,{ref_key:"formRef",ref:U,model:a(t),rules:a(K),"label-width":"100px"},{default:o(()=>[u(i,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[u(y,{modelValue:a(t).name,"onUpdate:modelValue":l[0]||(l[0]=e=>a(t).name=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u89D2\u8272\u5934\u50CF",prop:"avatar"},{default:o(()=>[u($,{modelValue:a(t).avatar,"onUpdate:modelValue":l[1]||(l[1]=e=>a(t).avatar=e),height:"60px",width:"60px"},null,8,["modelValue"])]),_:1}),a(w)?C("",!0):(s(),r(i,{key:0,label:"\u7ED1\u5B9A\u6A21\u578B",prop:"modelId"},{default:o(()=>[u(M,{modelValue:a(t).modelId,"onUpdate:modelValue":l[2]||(l[2]=e=>a(t).modelId=e),placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B",clearable:""},{default:o(()=>[(s(!0),b(f,null,V(a(A),e=>(s(),r(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})),a(w)?C("",!0):(s(),r(i,{key:1,label:"\u89D2\u8272\u7C7B\u522B",prop:"category"},{default:o(()=>[u(y,{modelValue:a(t).category,"onUpdate:modelValue":l[3]||(l[3]=e=>a(t).category=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u7C7B\u522B"},null,8,["modelValue"])]),_:1})),u(i,{label:"\u89D2\u8272\u63CF\u8FF0",prop:"description"},{default:o(()=>[u(y,{type:"textarea",modelValue:a(t).description,"onUpdate:modelValue":l[4]||(l[4]=e=>a(t).description=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u89D2\u8272\u8BBE\u5B9A",prop:"systemMessage"},{default:o(()=>[u(y,{type:"textarea",modelValue:a(t).systemMessage,"onUpdate:modelValue":l[5]||(l[5]=e=>a(t).systemMessage=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u8BBE\u5B9A"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u5F15\u7528\u77E5\u8BC6\u5E93",prop:"knowledgeIds"},{default:o(()=>[u(M,{modelValue:a(t).knowledgeIds,"onUpdate:modelValue":l[6]||(l[6]=e=>a(t).knowledgeIds=e),placeholder:"\u8BF7\u9009\u62E9\u77E5\u8BC6\u5E93",clearable:"",multiple:""},{default:o(()=>[(s(!0),b(f,null,V(a(q),e=>(s(),r(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u5F15\u7528\u5DE5\u5177",prop:"toolIds"},{default:o(()=>[u(M,{modelValue:a(t).toolIds,"onUpdate:modelValue":l[7]||(l[7]=e=>a(t).toolIds=e),placeholder:"\u8BF7\u9009\u62E9\u5DE5\u5177",clearable:"",multiple:""},{default:o(()=>[(s(!0),b(f,null,V(a(x),e=>(s(),r(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(i,{label:"\u5F15\u7528 MCP",prop:"toolIds"},{default:o(()=>[u(M,{modelValue:a(t).mcpClientNames,"onUpdate:modelValue":l[8]||(l[8]=e=>a(t).mcpClientNames=e),placeholder:"\u8BF7\u9009\u62E9 MCP",clearable:"",multiple:""},{default:o(()=>[(s(!0),b(f,null,V(a(Z)(a(R).AI_MCP_CLIENT_NAME),e=>(s(),r(I,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w)?C("",!0):(s(),r(i,{key:2,label:"\u662F\u5426\u516C\u5F00",prop:"publicStatus"},{default:o(()=>[u(L,{modelValue:a(t).publicStatus,"onUpdate:modelValue":l[9]||(l[9]=e=>a(t).publicStatus=e)},{default:o(()=>[(s(!0),b(f,null,V(a(ee)(a(R).INFRA_BOOLEAN_STRING),e=>(s(),r(E,{key:e.value,value:e.value},{default:o(()=>[S(P(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})),a(w)?C("",!0):(s(),r(i,{key:3,label:"\u89D2\u8272\u6392\u5E8F",prop:"sort"},{default:o(()=>[u(D,{modelValue:a(t).sort,"onUpdate:modelValue":l[10]||(l[10]=e=>a(t).sort=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u6392\u5E8F",class:"!w-1/1"},null,8,["modelValue"])]),_:1})),a(w)?C("",!0):(s(),r(i,{key:4,label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[u(L,{modelValue:a(t).status,"onUpdate:modelValue":l[11]||(l[11]=e=>a(t).status=e)},{default:o(()=>[(s(!0),b(f,null,V(a(ae)(a(R).COMMON_STATUS),e=>(s(),r(E,{key:e.value,value:e.value},{default:o(()=>[S(P(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[X,a(v)]])]),_:1},8,["title","modelValue"])}}});export{h as C,we as _};
