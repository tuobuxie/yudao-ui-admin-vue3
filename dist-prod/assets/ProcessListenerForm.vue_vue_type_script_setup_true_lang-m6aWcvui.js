import{a as I,d as j,h as Y,D as h,aw as L}from"./index-DmQdxAiK.js";import{_ as D}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{P}from"./index-B6R_oMDY.js";import{C as G}from"./constants-C3gLHYOK.js";import{h as H,aj as J,k as Q,s as $,u as z,x as K,Q as W,ak as X,f as Z}from"./form-designer-DHHJWkD5.js";import{l as ee,r as i,j as le,A as r,q as o,B as s,C as ae,u as l,J as t,m as p,I as c,$ as y,G as T,H as ue,h as se}from"./form-create-_84fGzaM.js";const te=ee({name:"ProcessListenerForm",__name:"ProcessListenerForm",emits:["success"],setup(oe,{expose:q,emit:C}){const{t:f}=I(),k=j(),m=i(!1),E=i(""),n=i(!1),S=i(""),u=i({id:void 0,name:void 0,type:void 0,status:void 0,event:void 0,valueType:void 0,value:void 0}),w=le({name:[{required:!0,message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],event:[{required:!0,message:"\u76D1\u542C\u4E8B\u4EF6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],valueType:[{required:!0,message:"\u503C\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],value:[{required:!0,message:"\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=i();q({open:async(d,a)=>{if(m.value=!0,E.value=f("action."+d),S.value=d,M(),a){n.value=!0;try{u.value=await P.getProcessListener(a)}finally{n.value=!1}}}});const R=C,x=async()=>{await _.value.validate(),n.value=!0;try{const d=u.value;S.value==="create"?(await P.createProcessListener(d),k.success(f("common.createSuccess"))):(await P.updateProcessListener(d),k.success(f("common.updateSuccess"))),m.value=!1,R("success")}finally{n.value=!1}},M=()=>{var d;u.value={id:void 0,name:void 0,type:void 0,status:G.ENABLE,event:void 0,valueType:void 0,value:void 0},(d=_.value)==null||d.resetFields()};return(d,a)=>{const V=Q,v=J,N=z,A=$,b=W,g=K,B=H,U=Z,O=D,F=X;return o(),r(O,{title:l(E),modelValue:l(m),"onUpdate:modelValue":a[9]||(a[9]=e=>se(m)?m.value=e:null)},{footer:s(()=>[t(U,{onClick:x,type:"primary",disabled:l(n)},{default:s(()=>a[10]||(a[10]=[T("\u786E \u5B9A")])),_:1},8,["disabled"]),t(U,{onClick:a[8]||(a[8]=e=>m.value=!1)},{default:s(()=>a[11]||(a[11]=[T("\u53D6 \u6D88")])),_:1})]),default:s(()=>[ae((o(),r(B,{ref_key:"formRef",ref:_,model:l(u),rules:l(w),"label-width":"110px"},{default:s(()=>[t(v,{label:"\u540D\u5B57",prop:"name"},{default:s(()=>[t(V,{modelValue:l(u).name,"onUpdate:modelValue":a[0]||(a[0]=e=>l(u).name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57"},null,8,["modelValue"])]),_:1}),t(v,{label:"\u72B6\u6001",prop:"status"},{default:s(()=>[t(A,{modelValue:l(u).status,"onUpdate:modelValue":a[1]||(a[1]=e=>l(u).status=e)},{default:s(()=>[(o(!0),p(c,null,y(l(Y)(l(h).COMMON_STATUS),e=>(o(),r(N,{key:e.value,value:e.value},{default:s(()=>[T(ue(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"\u7C7B\u578B",prop:"type"},{default:s(()=>[t(g,{modelValue:l(u).type,"onUpdate:modelValue":a[2]||(a[2]=e=>l(u).type=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:a[3]||(a[3]=e=>l(u).event=void 0)},{default:s(()=>[(o(!0),p(c,null,y(l(L)(l(h).BPM_PROCESS_LISTENER_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"\u4E8B\u4EF6",prop:"event"},{default:s(()=>[t(g,{modelValue:l(u).event,"onUpdate:modelValue":a[4]||(a[4]=e=>l(u).event=e),placeholder:"\u8BF7\u9009\u62E9\u4E8B\u4EF6"},{default:s(()=>[(o(!0),p(c,null,y(l(u).type=="execution"?["\u5F00\u59CB","\u7ED3\u675F"]:["\u521B\u5EFA","\u6307\u6D3E","\u5B8C\u6210","\u5220\u9664","\u66F4\u65B0","\u8D85\u65F6"],e=>(o(),r(b,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"\u503C\u7C7B\u578B",prop:"valueType"},{default:s(()=>[t(g,{modelValue:l(u).valueType,"onUpdate:modelValue":a[5]||(a[5]=e=>l(u).valueType=e),placeholder:"\u8BF7\u9009\u62E9\u503C\u7C7B\u578B"},{default:s(()=>[(o(!0),p(c,null,y(l(L)(l(h).BPM_PROCESS_LISTENER_VALUE_TYPE),e=>(o(),r(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u).type=="class"?(o(),r(v,{key:0,label:"\u7C7B\u8DEF\u5F84",prop:"value"},{default:s(()=>[t(V,{modelValue:l(u).value,"onUpdate:modelValue":a[6]||(a[6]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):(o(),r(v,{key:1,label:"\u8868\u8FBE\u5F0F",prop:"value"},{default:s(()=>[t(V,{modelValue:l(u).value,"onUpdate:modelValue":a[7]||(a[7]=e=>l(u).value=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"},null,8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[F,l(n)]])]),_:1},8,["title","modelValue"])}}});export{te as _};
