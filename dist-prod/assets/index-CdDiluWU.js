import{a as ee,d as le,h as O,D as y,aw as ae,_ as te,H as Y}from"./index-DzK2S43K.js";import{_ as re}from"./index.vue_vue_type_script_setup_true_lang-Cvlg2yMl.js";import{_ as oe}from"./DictTag.vue_vue_type_script_lang-D8_eTNf5.js";import{_ as ue}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BYZVL11n.js";import{_ as se}from"./index-RnHrue4c.js";import{l as de,r as x,j as ie,e as ne,ag as pe,m as s,q as u,J as a,B as r,u as l,Z as U,I as _,$ as W,A as c,G as b,C as A,x as f,H as d,E as n}from"./form-create-_84fGzaM.js";import{d as me,f as ce}from"./formatTime-BGPGB_ys.js";import{_ as fe,g as we,a as q}from"./BrokerageWithdrawRejectForm.vue_vue_type_script_setup_true_lang-z3A7rVM0.js";import{n as P,o as F}from"./constants-C3gLHYOK.js";import{h as ve,aj as ye,k as _e,x as be,Q as ke,F as ge,f as xe,Z as he,_ as Ae,al as Ne,ak as Re}from"./form-designer-DHHJWkD5.js";import"./Dialog.vue_vue_type_style_index_0_lang-D3YOFsHs.js";const Te={key:0},Ve={key:1},Ee={key:0},Ie={key:1},Ue={key:3,class:"mt-2"},We={key:0,class:"text-xs"},Ce={key:1,class:"text-xs"},Ke={key:2,class:"text-xs text-red-500"},Be=de({name:"BrokerageWithdraw",__name:"index",setup(De){const{t:C}=ee(),h=le(),m=x(!0),K=x(0),B=x([]),o=ie({pageNo:1,pageSize:10,userId:null,type:void 0,userName:null,userAccount:null,bankName:void 0,status:void 0,auditReason:null,auditTime:[],remark:null,createTime:[]}),D=x(),w=async()=>{m.value=!0;try{const N=await we(o);B.value=N.list,K.value=N.total}finally{m.value=!1}},k=()=>{o.pageNo=1,w()},z=()=>{D.value.resetFields(),k()},H=x();return ne(()=>{w()}),(N,t)=>{const L=se,R=_e,p=ye,T=ke,V=be,j=ge,G=te,g=xe,Z=ve,S=ue,i=Ae,E=oe,J=Ne,Q=he,$=re,I=pe("hasPermi"),X=Re;return u(),s(_,null,[a(L,{title:"\u3010\u4EA4\u6613\u3011\u5206\u9500\u8FD4\u4F63",url:"https://doc.iocoder.cn/mall/trade-brokerage/"}),a(S,null,{default:r(()=>[a(Z,{class:"-mb-15px",model:l(o),ref_key:"queryFormRef",ref:D,inline:!0,"label-width":"68px"},{default:r(()=>[a(p,{label:"\u7528\u6237\u7F16\u53F7",prop:"userId"},{default:r(()=>[a(R,{modelValue:l(o).userId,"onUpdate:modelValue":t[0]||(t[0]=e=>l(o).userId=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7",clearable:"",onKeyup:U(k,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u63D0\u73B0\u7C7B\u578B",prop:"type"},{default:r(()=>[a(V,{modelValue:l(o).type,"onUpdate:modelValue":t[1]||(t[1]=e=>l(o).type=e),placeholder:"\u8BF7\u9009\u62E9\u63D0\u73B0\u7C7B\u578B",clearable:"",class:"!w-240px"},{default:r(()=>[(u(!0),s(_,null,W(l(O)(l(y).BROKERAGE_WITHDRAW_TYPE),e=>(u(),c(T,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"\u8D26\u53F7",prop:"userAccount"},{default:r(()=>[a(R,{modelValue:l(o).userAccount,"onUpdate:modelValue":t[2]||(t[2]=e=>l(o).userAccount=e),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",clearable:"",onKeyup:U(k,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u771F\u5B9E\u540D\u5B57",prop:"userName"},{default:r(()=>[a(R,{modelValue:l(o).userName,"onUpdate:modelValue":t[3]||(t[3]=e=>l(o).userName=e),placeholder:"\u8BF7\u8F93\u5165\u771F\u5B9E\u540D\u5B57",clearable:"",onKeyup:U(k,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u63D0\u73B0\u94F6\u884C",prop:"bankName"},{default:r(()=>[a(V,{modelValue:l(o).bankName,"onUpdate:modelValue":t[4]||(t[4]=e=>l(o).bankName=e),placeholder:"\u8BF7\u9009\u62E9\u63D0\u73B0\u94F6\u884C",clearable:"",class:"!w-240px"},{default:r(()=>[(u(!0),s(_,null,W(l(ae)(l(y).BROKERAGE_BANK_NAME),e=>(u(),c(T,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"\u72B6\u6001",prop:"status"},{default:r(()=>[a(V,{modelValue:l(o).status,"onUpdate:modelValue":t[5]||(t[5]=e=>l(o).status=e),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"!w-240px"},{default:r(()=>[(u(!0),s(_,null,W(l(O)(l(y).BROKERAGE_WITHDRAW_STATUS),e=>(u(),c(T,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"\u7533\u8BF7\u65F6\u95F4",prop:"createTime"},{default:r(()=>[a(j,{modelValue:l(o).createTime,"onUpdate:modelValue":t[6]||(t[6]=e=>l(o).createTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),a(p,null,{default:r(()=>[a(g,{onClick:k},{default:r(()=>[a(G,{icon:"ep:search",class:"mr-5px"}),t[9]||(t[9]=b(" \u641C\u7D22"))]),_:1}),a(g,{onClick:z},{default:r(()=>[a(G,{icon:"ep:refresh",class:"mr-5px"}),t[10]||(t[10]=b(" \u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(S,null,{default:r(()=>[A((u(),c(Q,{data:l(B),stripe:!0,"show-overflow-tooltip":!0},{default:r(()=>[a(i,{label:"\u7F16\u53F7",align:"left",prop:"id","min-width":"60px"}),a(i,{label:"\u7528\u6237\u4FE1\u606F",align:"left","min-width":"120px"},{default:r(e=>[f("div",null,"\u7F16\u53F7\uFF1A"+d(e.row.userId),1),f("div",null,"\u6635\u79F0\uFF1A"+d(e.row.userNickname),1)]),_:1}),a(i,{label:"\u63D0\u73B0\u91D1\u989D",align:"left",prop:"price","min-width":"80px"},{default:r(e=>[f("div",null,"\u91D1\u3000\u989D\uFF1A\uFFE5"+d(l(Y)(e.row.price)),1),f("div",null,"\u624B\u7EED\u8D39\uFF1A\uFFE5"+d(l(Y)(e.row.feePrice)),1)]),_:1}),a(i,{label:"\u63D0\u73B0\u65B9\u5F0F",align:"left",prop:"type","min-width":"80px"},{default:r(e=>[a(E,{type:l(y).BROKERAGE_WITHDRAW_TYPE,value:e.row.type},null,8,["type","value"])]),_:1}),a(i,{label:"\u63D0\u73B0\u4FE1\u606F",align:"left","min-width":"120px"},{default:r(e=>[e.row.type===l(P).WALLET.type?(u(),s("div",Te,"-")):(u(),s("div",Ve,[e.row.userAccount?(u(),s("div",Ee,"\u8D26\u53F7\uFF1A"+d(e.row.userAccount),1)):n("",!0),e.row.userName?(u(),s("div",Ie,"\u771F\u5B9E\u59D3\u540D\uFF1A"+d(e.row.userName),1)):n("",!0)])),e.row.type===l(P).BANK.type?(u(),s(_,{key:2},[f("div",null,[t[11]||(t[11]=b(" \u94F6\u884C\u540D\u79F0\uFF1A ")),a(E,{type:l(y).BROKERAGE_BANK_NAME,value:e.row.bankName},null,8,["type","value"])]),f("div",null,"\u5F00\u6237\u5730\u5740\uFF1A"+d(e.row.bankAddress),1)],64)):n("",!0),e.row.qrCodeUrl?(u(),s("div",Ue,[t[12]||(t[12]=f("div",null,"\u6536\u6B3E\u7801\uFF1A",-1)),a(J,{src:e.row.qrCodeUrl,class:"h-40px w-40px","preview-src-list":[e.row.qrCodeUrl],"preview-teleported":""},null,8,["src","preview-src-list"])])):n("",!0)]),_:1}),a(i,{label:"\u7533\u8BF7\u65F6\u95F4",align:"left",prop:"createTime",formatter:l(me),width:"180px"},null,8,["formatter"]),a(i,{label:"\u5907\u6CE8",align:"left",prop:"remark"}),a(i,{label:"\u72B6\u6001",align:"left",prop:"status","min-width":"120px"},{default:r(e=>[a(E,{type:l(y).BROKERAGE_WITHDRAW_STATUS,value:e.row.status},null,8,["type","value"]),e.row.auditTime?(u(),s("div",We," \u65F6\u95F4\uFF1A"+d(l(ce)(e.row.auditTime)),1)):n("",!0),e.row.auditReason?(u(),s("div",Ce," \u5BA1\u6838\u539F\u56E0\uFF1A"+d(e.row.auditReason),1)):n("",!0),e.row.transferErrorMsg?(u(),s("div",Ke," \u8F6C\u8D26\u5931\u8D25\u539F\u56E0\uFF1A"+d(e.row.transferErrorMsg),1)):n("",!0)]),_:1}),a(i,{label:"\u64CD\u4F5C",align:"left",width:"110px",fixed:"right"},{default:r(e=>[e.row.status!==l(F).AUDITING.status||e.row.payTransferId?n("",!0):(u(),s(_,{key:0},[A((u(),c(g,{link:"",type:"primary",onClick:M=>(async v=>{try{m.value=!0,await h.confirm("\u786E\u5B9A\u8981\u5BA1\u6838\u901A\u8FC7\u5417\uFF1F"),await q(v),await h.success(C("common.success")),await w()}finally{m.value=!1}})(e.row.id)},{default:r(()=>t[13]||(t[13]=[b(" \u901A\u8FC7 ")])),_:2},1032,["onClick"])),[[I,["trade:brokerage-withdraw:audit"]]]),A((u(),c(g,{link:"",type:"danger",onClick:M=>{return v=e.row.id,void H.value.open(v);var v}},{default:r(()=>t[14]||(t[14]=[b(" \u9A73\u56DE ")])),_:2},1032,["onClick"])),[[I,["trade:brokerage-withdraw:audit"]]])],64)),e.row.status===l(F).WITHDRAW_FAIL.status?A((u(),c(g,{key:1,link:"",type:"warning",onClick:M=>(async v=>{try{m.value=!0,await h.confirm("\u786E\u5B9A\u8981\u91CD\u65B0\u8F6C\u8D26\u5417\uFF1F"),await q(v),await h.success(C("common.success")),await w()}finally{m.value=!1}})(e.row.id)},{default:r(()=>t[15]||(t[15]=[b(" \u91CD\u65B0\u8F6C\u8D26 ")])),_:2},1032,["onClick"])),[[I,["trade:brokerage-withdraw:audit"]]]):n("",!0)]),_:1})]),_:1},8,["data"])),[[X,l(m)]]),a($,{total:l(K),page:l(o).pageNo,"onUpdate:page":t[7]||(t[7]=e=>l(o).pageNo=e),limit:l(o).pageSize,"onUpdate:limit":t[8]||(t[8]=e=>l(o).pageSize=e),onPagination:w},null,8,["total","page","limit"])]),_:1}),a(fe,{ref_key:"formRef",ref:H,onSuccess:w},null,512)],64)}}});export{Be as default};
