import{aE as F,N as v,c as M}from"./index-DmQdxAiK.js";import{_ as P}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{T as q}from"./ThingModelProperty-B5obN6Qu.js";import{a as n}from"./constants-BFrNJh5I.js";import{a as A}from"./index-DM2r8AcY.js";import{f as B,V as D,h as G,aj as H,k as J,ak as R}from"./form-designer-DHHJWkD5.js";import{l as $,r as m,m as T,q as c,I as h,J as p,$ as z,x as N,H as K,B as i,G as u,u as t,h as Q,C as W,A as X}from"./form-create-_84fGzaM.js";import"./ThingModelEnumDataSpecs-YExi8B2C.js";import"./ThingModelNumberDataSpecs-CfomIotS.js";const Y={class:"btn"},Z=M($({name:"ThingModelInputOutputParam",__name:"ThingModelInputOutputParam",props:{modelValue:{},direction:{}},emits:["update:modelValue"],setup(x,{emit:C}){const V=x,o=F(V,"modelValue",C),s=m(!1),k=m(!1),f=m(),d=m({dataType:n.INT,property:{dataType:n.INT,dataSpecs:{dataType:n.INT}}}),_=a=>{s.value=!0,g(),v(a)||(d.value={identifier:a.identifier,name:a.name,description:a.description,property:{dataType:a.dataType,dataSpecs:a.dataSpecs,dataSpecsList:a.dataSpecsList}})},L=async()=>{v(o.value)&&(o.value=[]),await f.value.validate();try{const a=t(d),e={identifier:a.identifier,name:a.name,description:a.description,dataType:a.property.dataType,paraOrder:0,direction:V.direction,dataSpecs:a.property.dataSpecs&&Object.keys(a.property.dataSpecs).length>1?a.property.dataSpecs:void 0,dataSpecsList:v(a.property.dataSpecsList)?void 0:a.property.dataSpecsList},r=o.value.findIndex(y=>y.identifier===a.identifier);r>-1?o.value[r]=e:o.value.push(e)}finally{s.value=!1}},g=()=>{var a;d.value={dataType:n.INT,property:{dataType:n.INT,dataSpecs:{dataType:n.INT}}},(a=f.value)==null||a.resetFields()};return(a,e)=>{const r=B,y=D,S=J,I=H,w=G,O=P,U=R;return c(),T(h,null,[(c(!0),T(h,null,z(t(o),(l,b)=>(c(),T("div",{key:b,class:"w-1/1 param-item flex justify-between px-10px mb-10px"},[N("span",null,"\u53C2\u6570\u540D\u79F0\uFF1A"+K(l.name),1),N("div",Y,[p(r,{link:"",type:"primary",onClick:j=>_(l)},{default:i(()=>e[6]||(e[6]=[u("\u7F16\u8F91")])),_:2},1032,["onClick"]),p(y,{direction:"vertical"}),p(r,{link:"",type:"danger",onClick:j=>(E=>{o.value.splice(E,1)})(b)},{default:i(()=>e[7]||(e[7]=[u("\u5220\u9664")])),_:2},1032,["onClick"])])]))),128)),p(r,{link:"",type:"primary",onClick:e[0]||(e[0]=l=>_(null))},{default:i(()=>e[8]||(e[8]=[u("+\u65B0\u589E\u53C2\u6570")])),_:1}),p(O,{modelValue:t(s),"onUpdate:modelValue":e[5]||(e[5]=l=>Q(s)?s.value=l:null),title:"\u65B0\u589E\u53C2\u6570","append-to-body":""},{footer:i(()=>[p(r,{disabled:t(k),type:"primary",onClick:L},{default:i(()=>e[9]||(e[9]=[u("\u786E \u5B9A")])),_:1},8,["disabled"]),p(r,{onClick:e[4]||(e[4]=l=>s.value=!1)},{default:i(()=>e[10]||(e[10]=[u("\u53D6 \u6D88")])),_:1})]),default:i(()=>[W((c(),X(w,{ref_key:"paramFormRef",ref:f,model:t(d),rules:t(A),"label-width":"100px"},{default:i(()=>[p(I,{label:"\u53C2\u6570\u540D\u79F0",prop:"name"},{default:i(()=>[p(S,{modelValue:t(d).name,"onUpdate:modelValue":e[1]||(e[1]=l=>t(d).name=l),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u540D\u79F0"},null,8,["modelValue"])]),_:1}),p(I,{label:"\u6807\u8BC6\u7B26",prop:"identifier"},{default:i(()=>[p(S,{modelValue:t(d).identifier,"onUpdate:modelValue":e[2]||(e[2]=l=>t(d).identifier=l),placeholder:"\u8BF7\u8F93\u5165\u6807\u8BC6\u7B26"},null,8,["modelValue"])]),_:1}),p(q,{modelValue:t(d).property,"onUpdate:modelValue":e[3]||(e[3]=l=>t(d).property=l),"is-params":""},null,8,["modelValue"])]),_:1},8,["model","rules"])),[[U,t(k)]])]),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-9fd9e740"]]);export{Z as default};
