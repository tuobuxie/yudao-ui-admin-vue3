import{H as y,aM as k,h as M,D as N,c as A}from"./index-B2urM1q-.js";import{e as J,_ as q}from"./Echart.vue_vue_type_script_setup_true_lang-DN874Bqe.js";import{_ as z}from"./index-Cb5mbozM.js";import{d as B,e as D,f as H,b as X}from"./member-COZ96DEz.js";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang-PuuYa4VK.js";import{c as Y}from"./china-aeAnb323.js";import{f as Z}from"./formatter-pZca4aFw.js";import F from"./MemberFunnelCard-D9N1tZPE.js";import{_ as G}from"./MemberTerminalCard.vue_vue_type_script_setup_true_lang-BtIhcDBu.js";import{C as U}from"./CardTitle-CKrD6dxp.js";import{j as K,ak as O,i as Q,ad as V,Z as W,_ as ee}from"./form-designer-DHHJWkD5.js";import{l as ae,r as S,s as te,j as w,e as re,m as le,q as d,J as e,x as oe,B as r,C as p,A as f,u as l,I as se}from"./form-create-_84fGzaM.js";import"./echarts-BmJPRACc.js";import"./formatTime-BGPGB_ys.js";import"./CountTo.vue_vue_type_script_setup_true_lang-BpjX4GIa.js";import"./index.vue_vue_type_script_setup_true_lang-DqQ9CFQb.js";const ie={class:"flex flex-col"},ne=A(ae({name:"MemberStatistics",__name:"index",setup(me){var C;const u=S(!0),b=S(),_=te();(C=J)==null||C.registerMap("china",Y);const $=w({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u7EC8\u7AEF",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),x=w({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u6027\u522B",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),h=w({tooltip:{trigger:"item",formatter:t=>{var s,o,a,i,m;return`${((s=t==null?void 0:t.data)==null?void 0:s.areaName)||(t==null?void 0:t.name)}<br/>
\u4F1A\u5458\u6570\u91CF\uFF1A${((o=t==null?void 0:t.data)==null?void 0:o.userCount)||0}<br/>
\u8BA2\u5355\u521B\u5EFA\u6570\u91CF\uFF1A${((a=t==null?void 0:t.data)==null?void 0:a.orderCreateUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u6570\u91CF\uFF1A${((i=t==null?void 0:t.data)==null?void 0:i.orderPayUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u91D1\u989D\uFF1A${y(((m=t==null?void 0:t.data)==null?void 0:m.orderPayPrice)||0)}`}},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),E=async()=>{b.value=await B()},T=async()=>{const t=await D();_.value=t.map(a=>({...a,areaName:k(a.areaName)}));let s=0,o=0;h.series[0].data=_.value.map(a=>(s=Math.min(s,a.orderPayUserCount||0),o=Math.max(o,a.orderPayUserCount||0),{...a,name:a.areaName,value:a.orderPayUserCount||0})),h.visualMap.min=s,h.visualMap.max=o},I=async()=>{const t=await H(),s=M(N.SYSTEM_USER_SEX);s.push({label:"\u672A\u77E5",value:null}),x.series[0].data=s.map(o=>{var i;const a=(i=t.find(m=>m.sex===o.value))==null?void 0:i.userCount;return{name:o.label,value:a||0}})},L=async()=>{const t=await X(),s=M(N.TERMINAL);s.push({label:"\u672A\u77E5",value:null}),$.series[0].data=s.map(o=>{var i;const a=(i=t.find(m=>m.terminal===o.value))==null?void 0:i.userCount;return{name:o.label,value:a||0}})};return re(async()=>{u.value=!0,await Promise.all([E(),L(),T(),I()]),u.value=!1}),(t,s)=>{const o=z,a=K,i=Q,m=q,g=ee,R=W,P=V,c=O;return d(),le(se,null,[e(o,{title:"\u3010\u7EDF\u8BA1\u3011\u4F1A\u5458\u3001\u5546\u54C1\u3001\u4EA4\u6613\u7EDF\u8BA1",url:"https://doc.iocoder.cn/mall/statistics/"}),oe("div",ie,[e(i,{gutter:16,class:"summary"},{default:r(()=>[p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{value:((n=l(b))==null?void 0:n.userCount)||0,icon:"fa-solid:users","icon-bg-color":"text-blue-500","icon-color":"bg-blue-100",title:"\u7D2F\u8BA1\u4F1A\u5458\u6570"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{value:((n=l(b))==null?void 0:n.rechargeUserCount)||0,icon:"fa-solid:user","icon-bg-color":"text-purple-500","icon-color":"bg-purple-100",title:"\u7D2F\u8BA1\u5145\u503C\u4EBA\u6570"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{decimals:2,value:l(y)(((n=l(b))==null?void 0:n.rechargePrice)||0),icon:"fa-solid:money-check-alt","icon-bg-color":"text-yellow-500","icon-color":"bg-yellow-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u5145\u503C\u91D1\u989D"},null,8,["value"])]}),_:1})),[[c,l(u)]]),p((d(),f(a,{sm:6,xs:12},{default:r(()=>{var n;return[e(v,{decimals:2,value:l(y)(((n=l(b))==null?void 0:n.expensePrice)||0),icon:"fa-solid:yen-sign","icon-bg-color":"text-green-500","icon-color":"bg-green-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u6D88\u8D39\u91D1\u989D"},null,8,["value"])]}),_:1})),[[c,l(u)]])]),_:1}),e(i,{gutter:16,class:"mb-4"},{default:r(()=>[e(a,{md:18,sm:24},{default:r(()=>[e(F)]),_:1}),e(a,{md:6,sm:24},{default:r(()=>[e(G)]),_:1})]),_:1}),e(i,{gutter:16},{default:r(()=>[e(a,{md:18,sm:24},{default:r(()=>[e(P,{shadow:"never"},{header:r(()=>[e(l(U),{title:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03"})]),default:r(()=>[p((d(),f(i,null,{default:r(()=>[e(a,{span:10},{default:r(()=>[e(m,{height:300,options:l(h)},null,8,["options"])]),_:1}),e(a,{span:14},{default:r(()=>[e(R,{data:l(_),height:300},{default:r(()=>[e(g,{"sort-method":(n,j)=>n.areaName.localeCompare(j.areaName,"zh-CN"),align:"center",label:"\u7701\u4EFD","min-width":"80",prop:"areaName","show-overflow-tooltip":"",sortable:""},null,8,["sort-method"]),e(g,{align:"center",label:"\u4F1A\u5458\u6570\u91CF","min-width":"105",prop:"userCount",sortable:""}),e(g,{align:"center",label:"\u8BA2\u5355\u521B\u5EFA\u6570\u91CF","min-width":"135",prop:"orderCreateUserCount",sortable:""}),e(g,{align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u6570\u91CF","min-width":"135",prop:"orderPayUserCount",sortable:""}),e(g,{formatter:l(Z),align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u91D1\u989D","min-width":"135",prop:"orderPayPrice",sortable:""},null,8,["formatter"])]),_:1},8,["data"])]),_:1})]),_:1})),[[c,l(u)]])]),_:1})]),_:1}),e(a,{md:6,sm:24},{default:r(()=>[p((d(),f(P,{shadow:"never"},{header:r(()=>[e(l(U),{title:"\u4F1A\u5458\u6027\u522B\u6BD4\u4F8B"})]),default:r(()=>[e(m,{height:300,options:l(x)},null,8,["options"])]),_:1})),[[c,l(u)]])]),_:1})]),_:1})])],64)}}}),[["__scopeId","data-v-9dd2ad6a"]]);export{ne as default};
