import{aE as B}from"./index-DzK2S43K.js";import{_ as O}from"./ProductSelector.vue_vue_type_script_setup_true_lang-jK28Cq8p.js";import{_ as S}from"./DeviceSelector.vue_vue_type_script_setup_true_lang-CoEVbf_A.js";import H from"./PropertySelector-DXfJtnvl.js";import Y from"./OperatorSelector-CxLSDA9b.js";import{_ as $}from"./ValueInput.vue_vue_type_script_setup_true_lang-DXnN4dXO.js";import x from"./JsonParamsInput-C_3giRjV.js";import{p as d,u as z,v as T,w as f,r as G}from"./constants-DGDXM-Iq.js";import{aj as W,x as X,Q as Z,i as ee,j as le}from"./form-designer-DHHJWkD5.js";import{l as ae,r as D,c as n,m as g,q as i,J as l,B as u,I as U,$ as P,u as e,A as _,E as re,x as h,H as ue}from"./form-create-_84fGzaM.js";const te={class:"space-y-16px"},de={key:0,class:"space-y-16px"},oe={key:1,class:"space-y-16px"},pe={key:2,class:"text-center py-20px"},ie={class:"text-14px text-[var(--el-text-color-secondary)] mb-4px"},ve=ae({name:"MainConditionInnerConfig",__name:"MainConditionInnerConfig",props:{modelValue:{},triggerType:{}},emits:["update:modelValue","trigger-type-change"],setup(q,{emit:R}){const p=q,C=R,k=[{label:f.ONLINE.label,value:f.ONLINE.value},{label:f.OFFLINE.label,value:f.OFFLINE.value}],t=B(p,"modelValue",C),V=D(""),m=D(null),L=n(()=>p.triggerType===d.DEVICE_PROPERTY_POST||p.triggerType===d.DEVICE_EVENT_POST||p.triggerType===d.DEVICE_SERVICE_INVOKE),K=n(()=>p.triggerType===d.DEVICE_STATE_UPDATE),A=n(()=>![d.DEVICE_SERVICE_INVOKE,d.DEVICE_EVENT_POST].includes(p.triggerType)),w=n(()=>[d.DEVICE_SERVICE_INVOKE,d.DEVICE_EVENT_POST].includes(p.triggerType)),F=n(()=>p.triggerType===d.DEVICE_SERVICE_INVOKE?"\u670D\u52A1\u53C2\u6570":"\u6BD4\u8F83\u503C"),Q=n(()=>{if(m.value&&p.triggerType===d.DEVICE_SERVICE_INVOKE)return{service:{name:m.value.name||"\u670D\u52A1",inputParams:m.value.inputParams||[]}}}),J=n(()=>{if(m.value&&p.triggerType===d.DEVICE_EVENT_POST)return{event:{name:m.value.name||"\u4E8B\u4EF6",outputParams:m.value.outputParams||[]}}}),s=(o,r)=>{t.value[o]=r},j=o=>{C("trigger-type-change",o)},b=()=>{t.value.deviceId=void 0,t.value.identifier=""},N=()=>{t.value.identifier=""},M=o=>{o&&(V.value=o.type,m.value=o.config,p.triggerType!==d.DEVICE_EVENT_POST&&p.triggerType!==d.DEVICE_SERVICE_INVOKE||(t.value.operator=T.EQUALS.value))};return(o,r)=>{const I=Z,y=X,v=W,E=le,c=ee;return i(),g("div",te,[l(v,{label:"\u89E6\u53D1\u4E8B\u4EF6\u7C7B\u578B",required:""},{default:u(()=>[l(y,{"model-value":o.triggerType,"onUpdate:modelValue":j,placeholder:"\u8BF7\u9009\u62E9\u89E6\u53D1\u4E8B\u4EF6\u7C7B\u578B",class:"w-full"},{default:u(()=>[(i(!0),g(U,null,P(e(z),a=>(i(),_(I,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"])]),_:1}),e(L)?(i(),g("div",de,[l(c,{gutter:16},{default:u(()=>[l(E,{span:12},{default:u(()=>[l(v,{label:"\u4EA7\u54C1",required:""},{default:u(()=>[l(O,{"model-value":e(t).productId,"onUpdate:modelValue":r[0]||(r[0]=a=>s("productId",a)),onChange:b},null,8,["model-value"])]),_:1})]),_:1}),l(E,{span:12},{default:u(()=>[l(v,{label:"\u8BBE\u5907",required:""},{default:u(()=>[l(S,{"model-value":e(t).deviceId,"onUpdate:modelValue":r[1]||(r[1]=a=>s("deviceId",a)),"product-id":e(t).productId,onChange:N},null,8,["model-value","product-id"])]),_:1})]),_:1})]),_:1}),l(c,{gutter:16},{default:u(()=>[l(E,{span:6},{default:u(()=>[l(v,{label:"\u76D1\u63A7\u9879",required:""},{default:u(()=>[l(H,{"model-value":e(t).identifier,"onUpdate:modelValue":r[2]||(r[2]=a=>s("identifier",a)),"trigger-type":o.triggerType,"product-id":e(t).productId,"device-id":e(t).deviceId,onChange:M},null,8,["model-value","trigger-type","product-id","device-id"])]),_:1})]),_:1}),e(A)?(i(),_(E,{key:0,span:6},{default:u(()=>[l(v,{label:"\u64CD\u4F5C\u7B26",required:""},{default:u(()=>[l(Y,{"model-value":e(t).operator,"onUpdate:modelValue":r[3]||(r[3]=a=>s("operator",a)),"property-type":e(V)},null,8,["model-value","property-type"])]),_:1})]),_:1})):re("",!0),l(E,{span:e(w)?18:12},{default:u(()=>[l(v,{label:e(F),required:""},{default:u(()=>[o.triggerType===e(d).DEVICE_SERVICE_INVOKE?(i(),_(x,{key:0,modelValue:e(t).value,"onUpdate:modelValue":r[4]||(r[4]=a=>e(t).value=a),type:"service",config:e(Q),placeholder:"\u8BF7\u8F93\u5165 JSON \u683C\u5F0F\u7684\u670D\u52A1\u53C2\u6570"},null,8,["modelValue","config"])):o.triggerType===e(d).DEVICE_EVENT_POST?(i(),_(x,{key:1,modelValue:e(t).value,"onUpdate:modelValue":r[5]||(r[5]=a=>e(t).value=a),type:"event",config:e(J),placeholder:"\u8BF7\u8F93\u5165 JSON \u683C\u5F0F\u7684\u4E8B\u4EF6\u53C2\u6570"},null,8,["modelValue","config"])):(i(),_($,{key:2,"model-value":e(t).value,"onUpdate:modelValue":r[6]||(r[6]=a=>s("value",a)),"property-type":e(V),operator:e(t).operator,"property-config":e(m)},null,8,["model-value","property-type","operator","property-config"]))]),_:1},8,["label"])]),_:1},8,["span"])]),_:1})])):e(K)?(i(),g("div",oe,[l(c,{gutter:16},{default:u(()=>[l(E,{span:12},{default:u(()=>[l(v,{label:"\u4EA7\u54C1",required:""},{default:u(()=>[l(O,{"model-value":e(t).productId,"onUpdate:modelValue":r[7]||(r[7]=a=>s("productId",a)),onChange:b},null,8,["model-value"])]),_:1})]),_:1}),l(E,{span:12},{default:u(()=>[l(v,{label:"\u8BBE\u5907",required:""},{default:u(()=>[l(S,{"model-value":e(t).deviceId,"onUpdate:modelValue":r[8]||(r[8]=a=>s("deviceId",a)),"product-id":e(t).productId,onChange:N},null,8,["model-value","product-id"])]),_:1})]),_:1})]),_:1}),l(c,{gutter:16},{default:u(()=>[l(E,{span:6},{default:u(()=>[l(v,{label:"\u64CD\u4F5C\u7B26",required:""},{default:u(()=>[l(y,{"model-value":e(t).operator,"onUpdate:modelValue":r[9]||(r[9]=a=>s("operator",a)),placeholder:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u7B26",class:"w-full"},{default:u(()=>[l(I,{label:e(T).EQUALS.name,value:e(T).EQUALS.value},null,8,["label","value"])]),_:1},8,["model-value"])]),_:1})]),_:1}),l(E,{span:6},{default:u(()=>[l(v,{label:"\u53C2\u6570",required:""},{default:u(()=>[l(y,{"model-value":e(t).value,"onUpdate:modelValue":r[10]||(r[10]=a=>s("value",a)),placeholder:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u7B26",class:"w-full"},{default:u(()=>[(i(),g(U,null,P(k,a=>l(I,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["model-value"])]),_:1})]),_:1})]),_:1})])):(i(),g("div",pe,[h("p",ie," \u5F53\u524D\u89E6\u53D1\u4E8B\u4EF6\u7C7B\u578B\uFF1A"+ue(e(G)(o.triggerType)),1),r[11]||(r[11]=h("p",{class:"text-12px text-[var(--el-text-color-placeholder)]"}," \u6B64\u89E6\u53D1\u7C7B\u578B\u6682\u4E0D\u9700\u8981\u914D\u7F6E\u989D\u5916\u6761\u4EF6 ",-1))]))])}}});export{ve as _};
