import{p as N,d as O,$,Z as q,av as A}from"./index-DmQdxAiK.js";import{d as B,h as J}from"./tree-COGD3qag.js";import{g as Q}from"./category-D9qCSQY9.js";import{g as S}from"./brand-BE2LyLvo.js";import{h as Z,k as E,aj as G,m as H,f as K,aR as h,x as L,Q as M}from"./form-designer-DHHJWkD5.js";import{r as i}from"./formRules-D53teYbH.js";import{l as T,r as u,j as I,b as W,e as X,A as _,q as c,u as a,B as r,J as s,m as Y,$ as aa,I as ea}from"./form-create-_84fGzaM.js";const la=T({name:"ProductSpuInfoForm",__name:"InfoForm",props:{propFormData:{type:Object,default:()=>{}},isDetail:N.bool.def(!1)},emits:["update:activeName"],setup(n,{expose:g,emit:v}){const f=n,x=O(),m=u(),e=I({name:"",categoryId:void 0,keyword:"",picUrl:"",sliderPicUrls:[],introduction:"",brandId:void 0}),k=I({name:[i],categoryId:[i],keyword:[i],introduction:[i],picUrl:[i],sliderPicUrls:[i],brandId:[i]});W(()=>f.propFormData,t=>{t&&A(e,t)},{immediate:!0});const D=v;g({validate:async()=>{var t;if(m)try{await((t=a(m))==null?void 0:t.validate()),Object.assign(f.propFormData,e)}catch(o){throw x.error("\u3010\u57FA\u7840\u8BBE\u7F6E\u3011\u4E0D\u5B8C\u5584\uFF0C\u8BF7\u586B\u5199\u76F8\u5173\u4FE1\u606F"),D("update:activeName","info"),o}}});const b=u([]),w=u([]);async function V(){const t=await Q({});w.value=J(t,"id")}async function y(){b.value=await S()}return X(async()=>{await V(),await y()}),(t,o)=>{const p=E,d=G,P=H,U=K,R=M,F=L,j=$,z=q,C=Z;return c(),_(C,{ref_key:"formRef",ref:m,disabled:n.isDetail,model:a(e),rules:a(k),"label-width":"120px"},{default:r(()=>[s(d,{label:"\u5546\u54C1\u540D\u79F0",prop:"name"},{default:r(()=>[s(p,{modelValue:a(e).name,"onUpdate:modelValue":o[0]||(o[0]=l=>a(e).name=l),autosize:{minRows:2,maxRows:2},clearable:!0,"show-word-limit":!0,class:"w-80!",maxlength:"64",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0",type:"textarea"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u5546\u54C1\u5206\u7C7B",prop:"categoryId"},{default:r(()=>[s(P,{modelValue:a(e).categoryId,"onUpdate:modelValue":o[1]||(o[1]=l=>a(e).categoryId=l),options:a(w),props:a(B),class:"w-80!",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u5206\u7C7B"},null,8,["modelValue","options","props"]),s(U,{icon:a(h),onClick:V,class:"ml-1",size:"small"},null,8,["icon"])]),_:1}),s(d,{label:"\u5546\u54C1\u54C1\u724C",prop:"brandId"},{default:r(()=>[s(F,{modelValue:a(e).brandId,"onUpdate:modelValue":o[2]||(o[2]=l=>a(e).brandId=l),class:"w-80!",placeholder:"\u8BF7\u9009\u62E9\u5546\u54C1\u54C1\u724C"},{default:r(()=>[(c(!0),Y(ea,null,aa(a(b),l=>(c(),_(R,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(U,{icon:a(h),onClick:y,class:"ml-1",size:"small"},null,8,["icon"])]),_:1}),s(d,{label:"\u5546\u54C1\u5173\u952E\u5B57",prop:"keyword"},{default:r(()=>[s(p,{modelValue:a(e).keyword,"onUpdate:modelValue":o[3]||(o[3]=l=>a(e).keyword=l),class:"w-80!",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u5173\u952E\u5B57"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u5546\u54C1\u7B80\u4ECB",prop:"introduction"},{default:r(()=>[s(p,{modelValue:a(e).introduction,"onUpdate:modelValue":o[4]||(o[4]=l=>a(e).introduction=l),autosize:{minRows:2,maxRows:2},clearable:!0,"show-word-limit":!0,class:"w-80!",maxlength:"128",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u4ECB",type:"textarea"},null,8,["modelValue"])]),_:1}),s(d,{label:"\u5546\u54C1\u5C01\u9762\u56FE",prop:"picUrl"},{default:r(()=>[s(j,{modelValue:a(e).picUrl,"onUpdate:modelValue":o[5]||(o[5]=l=>a(e).picUrl=l),disabled:n.isDetail,height:"80px"},null,8,["modelValue","disabled"])]),_:1}),s(d,{label:"\u5546\u54C1\u8F6E\u64AD\u56FE",prop:"sliderPicUrls"},{default:r(()=>[s(z,{modelValue:a(e).sliderPicUrls,"onUpdate:modelValue":o[6]||(o[6]=l=>a(e).sliderPicUrls=l),disabled:n.isDetail},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["disabled","model","rules"])}}});export{la as _};
