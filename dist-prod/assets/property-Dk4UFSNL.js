import{_ as se}from"./ComponentContainerProperty-BbSH0TKL.js";import{bl as ae,S as ne,_ as ie,c as A,aE as pe,$ as re}from"./index-DmQdxAiK.js";import{_ as ue}from"./AppLinkSelectDialog.vue_vue_type_script_setup_true_lang-DL2qgfEA.js";import{_ as me}from"./Dialog.vue_vue_type_style_index_0_lang-C4PMlRRW.js";import{al as de,f as Y,bj as ce,h as fe,aj as he,a7 as ye}from"./form-designer-DHHJWkD5.js";import{l as Z,r as _,m as V,q as k,I as U,J as s,u as p,h as ve,B as r,x as q,$ as B,O as J,H as ge,G as I}from"./form-create-_84fGzaM.js";import"./index-DNDzQP9I.js";import"./ProductCategorySelect.vue_vue_type_script_setup_true_lang-B6oy7nKK.js";import"./tree-COGD3qag.js";import"./category-D9qCSQY9.js";const C=100;var y=(l=>(l[l.LEFT=0]="LEFT",l[l.TOP=1]="TOP",l[l.WIDTH=2]="WIDTH",l[l.HEIGHT=3]="HEIGHT",l))(y||{});const xe=[{position:"\u5DE6\u4E0A\u89D2",types:[0,1,2,3],style:{left:"-5px",top:"-5px",cursor:"nwse-resize"}},{position:"\u4E0A\u65B9\u4E2D\u95F4",types:[1,3],style:{left:"50%",top:"-5px",cursor:"n-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0A\u89D2",types:[1,2,3],style:{right:"-5px",top:"-5px",cursor:"nesw-resize"}},{position:"\u53F3\u4FA7\u4E2D\u95F4",types:[2],style:{right:"-5px",top:"50%",cursor:"e-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0B\u89D2",types:[2,3],style:{right:"-5px",bottom:"-5px",cursor:"nwse-resize"}},{position:"\u4E0B\u65B9\u4E2D\u95F4",types:[3],style:{left:"50%",bottom:"-5px",cursor:"s-resize",transform:"translateX(-50%)"}},{position:"\u5DE6\u4E0B\u89D2",types:[0,2,3],style:{left:"-5px",bottom:"-5px",cursor:"nesw-resize"}},{position:"\u5DE6\u4FA7\u4E2D\u95F4",types:[0,2],style:{left:"-5px",top:"50%",cursor:"w-resize",transform:"translateX(-50%)"}}],S=(l,v,a)=>{v.stopPropagation();const{clientX:g,clientY:H}=v,{left:m,top:o,width:u,height:T}=l;document.onmousemove=d=>{const x=d.clientX-g,b=d.clientY-H;a(m,o,u,T,x,b)},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},we=["onMousedown","onDblclick"],_e={class:"pointer-events-none select-none"},Ve=["onMousedown"],ke=A(Z({name:"HotZoneEditDialog",__name:"index",props:{modelValue:ne(),imgUrl:ae().def("")},emits:["update:modelValue"],setup(l,{expose:v,emit:a}){const g=l,H=a,m=_([]),o=_(!1);v({open:()=>{var t;m.value=(t=g.modelValue,(t==null?void 0:t.map(e=>({...e,left:e.left*=2,top:e.top*=2,width:e.width*=2,height:e.height*=2})))||[]),o.value=!0}});const u=_(),T=()=>{m.value.push({width:C,height:C,top:0,left:0})},d=(t,e)=>{e>=0&&e<=u.value.offsetWidth-t.width&&(t.left=e)},x=(t,e)=>{e>=0&&e<=u.value.offsetHeight-t.height&&(t.top=e)},b=(t,e)=>{e>=C&&t.left+e<=u.value.offsetWidth&&(t.width=e)},D=(t,e)=>{e>=C&&t.top+e<=u.value.offsetHeight&&(t.height=e)},c=()=>{o.value=!1},K=()=>{const t=(e=>(e==null?void 0:e.map(f=>({...f,left:f.left/=2,top:f.top/=2,width:f.width/=2,height:f.height/=2})))||[])(m.value);H("update:modelValue",t)},E=_(),W=_(),N=t=>{t&&E.value&&(E.value.name=t.name,E.value.url=t.path)};return(t,e)=>{const f=de,X=ie,F=Y,Q=me,ee=ue;return k(),V(U,null,[s(Q,{modelValue:p(o),"onUpdate:modelValue":e[0]||(e[0]=i=>ve(o)?o.value=i:null),title:"\u8BBE\u7F6E\u70ED\u533A",width:"780",onClose:K},{footer:r(()=>[s(F,{onClick:T,type:"primary",plain:""},{default:r(()=>[s(X,{icon:"ep:plus",class:"mr-5px"}),e[1]||(e[1]=I(" \u6DFB\u52A0\u70ED\u533A "))]),_:1}),s(F,{onClick:c,type:"primary",plain:""},{default:r(()=>[s(X,{icon:"ep:check",class:"mr-5px"}),e[2]||(e[2]=I(" \u786E\u5B9A "))]),_:1})]),default:r(()=>[q("div",{ref_key:"container",ref:u,class:"relative h-full w-750px"},[s(f,{src:l.imgUrl,class:"pointer-events-none h-full w-750px select-none"},null,8,["src"]),(k(!0),V(U,null,B(p(m),(i,te)=>(k(),V("div",{key:te,class:"hot-zone",style:J({width:`${i.width}px`,height:`${i.height}px`,top:`${i.top}px`,left:`${i.left}px`}),onMousedown:w=>((n,$)=>{S(n,$,(h,z,G,M,L,P)=>{d(n,h+L),x(n,z+P)})})(i,w),onDblclick:w=>{return n=i,E.value=n,void W.value.open(n.url);var n}},[q("span",_e,ge(i.name||"\u53CC\u51FB\u9009\u62E9\u94FE\u63A5"),1),s(X,{icon:"ep:close",class:"delete",size:14,onClick:w=>{return n=i,void ce(m.value,n);var n}},null,8,["onClick"]),(k(!0),V(U,null,B(p(xe),(w,n)=>(k(),V("span",{class:"ctrl-dot",key:n,style:J(w.style),onMousedown:$=>((h,z,G)=>{S(h,G,(M,L,P,oe,j,R)=>{z.types.forEach(le=>{switch(le){case y.LEFT:d(h,M+j);break;case y.TOP:x(h,L+R);break;case y.WIDTH:{const O=z.types.includes(y.LEFT)?-1:1;b(h,P+j*O)}break;case y.HEIGHT:{const O=z.types.includes(y.TOP)?-1:1;D(h,oe+R*O)}}})})})(i,w,$)},null,44,Ve))),128))],44,we))),128))],512)]),_:1},8,["modelValue"]),s(ee,{ref_key:"appLinkDialogRef",ref:W,onAppLinkChange:N},null,512)],64)}}}),[["__scopeId","data-v-85e5873f"]]),He=A(Z({name:"HotZoneProperty",__name:"property",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:v}){const a=pe(l,"modelValue",v),g=_(),H=()=>{g.value.open()};return(m,o)=>{const u=ye,T=re,d=he,x=fe,b=Y,D=se;return k(),V(U,null,[s(D,{modelValue:p(a).style,"onUpdate:modelValue":o[1]||(o[1]=c=>p(a).style=c)},{default:r(()=>[s(x,{"label-width":"80px",model:p(a),class:"m-t-8px"},{default:r(()=>[s(d,{label:"\u4E0A\u4F20\u56FE\u7247",prop:"imgUrl"},{default:r(()=>[s(T,{modelValue:p(a).imgUrl,"onUpdate:modelValue":o[0]||(o[0]=c=>p(a).imgUrl=c),height:"50px",width:"auto",class:"min-w-80px"},{tip:r(()=>[s(u,{type:"info",size:"small"},{default:r(()=>o[3]||(o[3]=[I(" \u63A8\u8350\u5BBD\u5EA6 750")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),s(b,{type:"primary",plain:"",class:"w-full",onClick:H},{default:r(()=>o[4]||(o[4]=[I(" \u8BBE\u7F6E\u70ED\u533A ")])),_:1})]),_:1},8,["modelValue"]),s(ke,{ref_key:"editDialogRef",ref:g,modelValue:p(a).list,"onUpdate:modelValue":o[2]||(o[2]=c=>p(a).list=c),"img-url":p(a).imgUrl},null,8,["modelValue","img-url"])],64)}}}),[["__scopeId","data-v-c64f9a6c"]]);export{He as default};
